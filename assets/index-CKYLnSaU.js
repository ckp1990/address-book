(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function UA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cm={exports:{}},Xl={};var s0;function jA(){if(s0)return Xl;s0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Xl.Fragment=e,Xl.jsx=t,Xl.jsxs=t,Xl}var i0;function LA(){return i0||(i0=1,Cm.exports=jA()),Cm.exports}var O=LA(),Im={exports:{}},Oe={};var a0;function zA(){if(a0)return Oe;a0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function te(D,$,ie){this.props=D,this.context=$,this.refs=q,this.updater=ie||V}te.prototype.isReactComponent={},te.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},te.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function H(){}H.prototype=te.prototype;function L(D,$,ie){this.props=D,this.context=$,this.refs=q,this.updater=ie||V}var se=L.prototype=new H;se.constructor=L,z(se,te.prototype),se.isPureReactComponent=!0;var de=Array.isArray;function le(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(D,$,ie){var re=ie.ref;return{$$typeof:r,type:D,key:$,ref:re!==void 0?re:null,props:ie}}function P(D,$){return I(D.type,$,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function U(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ie){return $[ie]})}var R=/\/+/g;function Ae(D,$){return typeof D=="object"&&D!==null&&D.key!=null?U(""+D.key):$.toString(36)}function Ke(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(le,le):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function X(D,$,ie,re,he){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var Ce=!1;if(D===null)Ce=!0;else switch(Ee){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(D.$$typeof){case r:case e:Ce=!0;break;case b:return Ce=D._init,X(Ce(D._payload),$,ie,re,he)}}if(Ce)return he=he(D),Ce=re===""?"."+Ae(D,0):re,de(he)?(ie="",Ce!=null&&(ie=Ce.replace(R,"$&/")+"/"),X(he,$,ie,"",function(kt){return kt})):he!=null&&(k(he)&&(he=P(he,ie+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(R,"$&/")+"/")+Ce)),$.push(he)),1;Ce=0;var ht=re===""?".":re+":";if(de(D))for(var Xe=0;Xe<D.length;Xe++)re=D[Xe],Ee=ht+Ae(re,Xe),Ce+=X(re,$,ie,Ee,he);else if(Xe=x(D),typeof Xe=="function")for(D=Xe.call(D),Xe=0;!(re=D.next()).done;)re=re.value,Ee=ht+Ae(re,Xe++),Ce+=X(re,$,ie,Ee,he);else if(Ee==="object"){if(typeof D.then=="function")return X(Ke(D),$,ie,re,he);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function oe(D,$,ie){if(D==null)return D;var re=[],he=0;return X(D,re,"","",function(Ee){return $.call(ie,Ee,he++)}),re}function me(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=ie)},function(ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=ie)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var De=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Me={map:oe,forEach:function(D,$,ie){oe(D,function(){$.apply(this,arguments)},ie)},count:function(D){var $=0;return oe(D,function(){$++}),$},toArray:function(D){return oe(D,function($){return $})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Oe.Activity=w,Oe.Children=Me,Oe.Component=te,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=L,Oe.StrictMode=s,Oe.Suspense=g,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return C.H.useMemoCache(D)}},Oe.cache=function(D){return function(){return D.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(D,$,ie){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var re=z({},D.props),he=D.key;if($!=null)for(Ee in $.key!==void 0&&(he=""+$.key),$)!A.call($,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&$.ref===void 0||(re[Ee]=$[Ee]);var Ee=arguments.length-2;if(Ee===1)re.children=ie;else if(1<Ee){for(var Ce=Array(Ee),ht=0;ht<Ee;ht++)Ce[ht]=arguments[ht+2];re.children=Ce}return I(D.type,he,re)},Oe.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Oe.createElement=function(D,$,ie){var re,he={},Ee=null;if($!=null)for(re in $.key!==void 0&&(Ee=""+$.key),$)A.call($,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=$[re]);var Ce=arguments.length-2;if(Ce===1)he.children=ie;else if(1<Ce){for(var ht=Array(Ce),Xe=0;Xe<Ce;Xe++)ht[Xe]=arguments[Xe+2];he.children=ht}if(D&&D.defaultProps)for(re in Ce=D.defaultProps,Ce)he[re]===void 0&&(he[re]=Ce[re]);return I(D,Ee,he)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(D){return{$$typeof:m,render:D}},Oe.isValidElement=k,Oe.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:me}},Oe.memo=function(D,$){return{$$typeof:p,type:D,compare:$===void 0?null:$}},Oe.startTransition=function(D){var $=C.T,ie={};C.T=ie;try{var re=D(),he=C.S;he!==null&&he(ie,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(le,De)}catch(Ee){De(Ee)}finally{$!==null&&ie.types!==null&&($.types=ie.types),C.T=$}},Oe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Oe.use=function(D){return C.H.use(D)},Oe.useActionState=function(D,$,ie){return C.H.useActionState(D,$,ie)},Oe.useCallback=function(D,$){return C.H.useCallback(D,$)},Oe.useContext=function(D){return C.H.useContext(D)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(D,$){return C.H.useDeferredValue(D,$)},Oe.useEffect=function(D,$){return C.H.useEffect(D,$)},Oe.useEffectEvent=function(D){return C.H.useEffectEvent(D)},Oe.useId=function(){return C.H.useId()},Oe.useImperativeHandle=function(D,$,ie){return C.H.useImperativeHandle(D,$,ie)},Oe.useInsertionEffect=function(D,$){return C.H.useInsertionEffect(D,$)},Oe.useLayoutEffect=function(D,$){return C.H.useLayoutEffect(D,$)},Oe.useMemo=function(D,$){return C.H.useMemo(D,$)},Oe.useOptimistic=function(D,$){return C.H.useOptimistic(D,$)},Oe.useReducer=function(D,$,ie){return C.H.useReducer(D,$,ie)},Oe.useRef=function(D){return C.H.useRef(D)},Oe.useState=function(D){return C.H.useState(D)},Oe.useSyncExternalStore=function(D,$,ie){return C.H.useSyncExternalStore(D,$,ie)},Oe.useTransition=function(){return C.H.useTransition()},Oe.version="19.2.3",Oe}var o0;function rd(){return o0||(o0=1,Im.exports=zA()),Im.exports}var Ve=rd();const BA=UA(Ve);var Om={exports:{}},Jl={},xm={exports:{}},Nm={};var l0;function qA(){return l0||(l0=1,(function(r){function e(X,oe){var me=X.length;X.push(oe);e:for(;0<me;){var De=me-1>>>1,Me=X[De];if(0<o(Me,oe))X[De]=oe,X[me]=Me,me=De;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],me=X.pop();if(me!==oe){X[0]=me;e:for(var De=0,Me=X.length,D=Me>>>1;De<D;){var $=2*(De+1)-1,ie=X[$],re=$+1,he=X[re];if(0>o(ie,me))re<Me&&0>o(he,ie)?(X[De]=he,X[re]=me,De=re):(X[De]=ie,X[$]=me,De=$);else if(re<Me&&0>o(he,me))X[De]=he,X[re]=me,De=re;else break e}}return oe}function o(X,oe){var me=X.sortIndex-oe.sortIndex;return me!==0?me:X.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],b=1,w=null,T=3,x=!1,V=!1,z=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function se(X){for(var oe=t(p);oe!==null;){if(oe.callback===null)s(p);else if(oe.startTime<=X)s(p),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(p)}}function de(X){if(z=!1,se(X),!V)if(t(g)!==null)V=!0,le||(le=!0,U());else{var oe=t(p);oe!==null&&Ke(de,oe.startTime-X)}}var le=!1,C=-1,A=5,I=-1;function P(){return q?!0:!(r.unstable_now()-I<A)}function k(){if(q=!1,le){var X=r.unstable_now();I=X;var oe=!0;try{e:{V=!1,z&&(z=!1,H(C),C=-1),x=!0;var me=T;try{t:{for(se(X),w=t(g);w!==null&&!(w.expirationTime>X&&P());){var De=w.callback;if(typeof De=="function"){w.callback=null,T=w.priorityLevel;var Me=De(w.expirationTime<=X);if(X=r.unstable_now(),typeof Me=="function"){w.callback=Me,se(X),oe=!0;break t}w===t(g)&&s(g),se(X)}else s(g);w=t(g)}if(w!==null)oe=!0;else{var D=t(p);D!==null&&Ke(de,D.startTime-X),oe=!1}}break e}finally{w=null,T=me,x=!1}oe=void 0}}finally{oe?U():le=!1}}}var U;if(typeof L=="function")U=function(){L(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ae=R.port2;R.port1.onmessage=k,U=function(){Ae.postMessage(null)}}else U=function(){te(k,0)};function Ke(X,oe){C=te(function(){X(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(X){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var me=T;T=oe;try{return X()}finally{T=me}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var me=T;T=X;try{return oe()}finally{T=me}},r.unstable_scheduleCallback=function(X,oe,me){var De=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?De+me:De):me=De,X){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=me+Me,X={id:b++,callback:oe,priorityLevel:X,startTime:me,expirationTime:Me,sortIndex:-1},me>De?(X.sortIndex=me,e(p,X),t(g)===null&&X===t(p)&&(z?(H(C),C=-1):z=!0,Ke(de,me-De))):(X.sortIndex=Me,e(g,X),V||x||(V=!0,le||(le=!0,U()))),X},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(X){var oe=T;return function(){var me=T;T=oe;try{return X.apply(this,arguments)}finally{T=me}}}})(Nm)),Nm}var u0;function HA(){return u0||(u0=1,xm.exports=qA()),xm.exports}var km={exports:{}},fn={};var c0;function $A(){if(c0)return fn;c0=1;var r=rd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:p,implementation:b}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fn.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,b)},fn.flushSync=function(g){var p=c.T,b=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=b,s.d.f()}},fn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},fn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},fn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:x}):b==="script"&&s.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},fn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin);s.d.L(g,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fn.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},fn.requestFormReset=function(g){s.d.r(g)},fn.unstable_batchedUpdates=function(g,p){return g(p)},fn.useFormState=function(g,p,b){return c.H.useFormState(g,p,b)},fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},fn.version="19.2.3",fn}var h0;function FA(){if(h0)return km.exports;h0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),km.exports=$A(),km.exports}var d0;function GA(){if(d0)return Jl;d0=1;var r=HA(),e=rd(),t=FA();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,u=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return g(d),n;if(f===u)return g(d),i;f=f.sibling}throw Error(s(188))}if(a.return!==u.return)a=d,u=f;else{for(var _=!1,E=d.child;E;){if(E===a){_=!0,a=d,u=f;break}if(E===u){_=!0,u=d,a=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===a){_=!0,a=f,u=d;break}if(E===u){_=!0,u=f,a=d;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),L=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case te:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case L:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:Ae(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return Ae(n(i))}catch{}}return null}var Ke=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},De=[],Me=-1;function D(n){return{current:n}}function $(n){0>Me||(n.current=De[Me],De[Me]=null,Me--)}function ie(n,i){Me++,De[Me]=n.current,n.current=i}var re=D(null),he=D(null),Ee=D(null),Ce=D(null);function ht(n,i){switch(ie(Ee,i),ie(he,n),ie(re,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Cv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Cv(i),n=Iv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(re),ie(re,n)}function Xe(){$(re),$(he),$(Ee)}function kt(n){n.memoizedState!==null&&ie(Ce,n);var i=re.current,a=Iv(i,n.type);i!==a&&(ie(he,n),ie(re,a))}function _n(n){he.current===n&&($(re),$(he)),Ce.current===n&&($(Ce),Gl._currentValue=me)}var Le,Te;function dt(n){if(Le===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Le=i&&i[1]||"",Te=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+n+Te}var Qe=!1;function at(n,i){if(!n||Qe)return"";Qe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Y){var K=Y}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(Y){K=Y}n.call(Z.prototype)}}else{try{throw Error()}catch(Y){K=Y}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=u.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var N=_.split(`
`),G=E.split(`
`);for(d=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(u===N.length||d===G.length)for(u=N.length-1,d=G.length-1;1<=u&&0<=d&&N[u]!==G[d];)d--;for(;1<=u&&0<=d;u--,d--)if(N[u]!==G[d]){if(u!==1||d!==1)do if(u--,d--,0>d||N[u]!==G[d]){var J=`
`+N[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=d);break}}}finally{Qe=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?dt(a):""}function Tt(n,i){switch(n.tag){case 26:case 27:case 5:return dt(n.type);case 16:return dt("Lazy");case 13:return n.child!==i&&i!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return at(n.type,!1);case 11:return at(n.type.render,!1);case 1:return at(n.type,!0);case 31:return dt("Activity");default:return""}}function dn(n){try{var i="",a=null;do i+=Tt(n,a),a=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ye=Object.prototype.hasOwnProperty,nt=r.unstable_scheduleCallback,Sr=r.unstable_cancelCallback,Id=r.unstable_shouldYield,ju=r.unstable_requestPaint,vn=r.unstable_now,ki=r.unstable_getCurrentPriorityLevel,Yo=r.unstable_ImmediatePriority,Xo=r.unstable_UserBlockingPriority,xs=r.unstable_NormalPriority,Od=r.unstable_LowPriority,Lu=r.unstable_IdlePriority,zu=r.log,Bu=r.unstable_setDisableYieldValue,ir=null,en=null;function Fn(n){if(typeof zu=="function"&&Bu(n),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(ir,n)}catch{}}var Ct=Math.clz32?Math.clz32:Hu,qu=Math.log,Sa=Math.LN2;function Hu(n){return n>>>=0,n===0?32:31-(qu(n)/Sa|0)|0}var Ar=256,Di=262144,Dt=4194304;function Rr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Cr(n,i,a){var u=n.pendingLanes;if(u===0)return 0;var d=0,f=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~f,u!==0?d=Rr(u):(_&=E,_!==0?d=Rr(_):a||(a=E&~n,a!==0&&(d=Rr(a))))):(E=u&~f,E!==0?d=Rr(E):_!==0?d=Rr(_):a||(a=u&~n,a!==0&&(d=Rr(a)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:d}function ar(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function xd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $u(){var n=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),n}function Ir(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Pi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nd(n,i,a,u,d,f){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,N=n.expirationTimes,G=n.hiddenUpdates;for(a=_&~a;0<a;){var J=31-Ct(a),Z=1<<J;E[J]=0,N[J]=-1;var K=G[J];if(K!==null)for(G[J]=null,J=0;J<K.length;J++){var Y=K[J];Y!==null&&(Y.lane&=-536870913)}a&=~Z}u!==0&&Mi(n,u,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(_&~i))}function Mi(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Ct(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Jo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Ct(a),d=1<<u;d&i|n[u]&i&&(n[u]|=i),a&=~d}}function Wo(n,i){var a=i&-i;return a=(a&42)!==0?1:Vi(a),(a&(n.suspendedLanes|i))!==0?0:a}function Vi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function es(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fu(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:Jv(n.type))}function or(n,i){var a=oe.p;try{return oe.p=n,i()}finally{oe.p=a}}var lr=Math.random().toString(36).slice(2),Pt="__reactFiber$"+lr,Xt="__reactProps$"+lr,Or="__reactContainer$"+lr,Aa="__reactEvents$"+lr,kd="__reactListeners$"+lr,Gu="__reactHandles$"+lr,Ku="__reactResources$"+lr,xr="__reactMarker$"+lr;function Ra(n){delete n[Pt],delete n[Xt],delete n[Aa],delete n[kd],delete n[Gu]}function Nr(n){var i=n[Pt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Or]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Mv(n);n!==null;){if(a=n[Pt])return a;n=Mv(n)}return i}n=a,a=n.parentNode}return null}function Gn(n){if(n=n[Pt]||n[Or]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function kn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function kr(n){var i=n[Ku];return i||(i=n[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(n){n[xr]=!0}var Zo=new Set,el={};function Dr(n,i){Pr(n,i),Pr(n+"Capture",i)}function Pr(n,i){for(el[n]=i,n=0;n<i.length;n++)Zo.add(i[n])}var tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},rl={};function Qu(n){return Ye.call(rl,n)?!0:Ye.call(nl,n)?!1:tl.test(n)?rl[n]=!0:(nl[n]=!0,!1)}function Ca(n,i,a){if(Qu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Dn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Vt(n,i,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+u)}}function Jt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ns(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function sl(n,i,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,f=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function rt(n){if(!n._valueTracker){var i=Ns(n)?"checked":"value";n._valueTracker=sl(n,i,""+n[i])}}function Ui(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=Ns(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function Mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ji=/[\n"\\]/g;function Tn(n){return n.replace(ji,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ia(n,i,a,u,d,f,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Jt(i)):n.value!==""+Jt(i)&&(n.value=""+Jt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?il(n,_,Jt(i)):a!=null?il(n,_,Jt(a)):u!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Jt(E):n.removeAttribute("name")}function Yu(n,i,a,u,d,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){rt(n);return}a=a!=null?""+Jt(a):"",i=i!=null?""+Jt(i):a,E||i===n.value||(n.value=i),n.defaultValue=i}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),rt(n)}function il(n,i,a){i==="number"&&Mr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ks(n,i,a,u){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Jt(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Xu(n,i,a){if(i!=null&&(i=""+Jt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Jt(a):""}function Ds(n,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(Ke(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Jt(i),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),rt(n)}function Sn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function al(n,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,a):typeof a!="number"||a===0||Ju.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function ol(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in i)u=i[d],i.hasOwnProperty(d)&&a[d]!==u&&al(n,d,u)}else for(var f in i)i.hasOwnProperty(f)&&al(n,f,i[f])}function Oa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(n){return Ps.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ur(){}var ll=null;function Kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ms=null,Vr=null;function Li(n){var i=Gn(n);if(i&&(n=i.stateNode)){var a=n[Xt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ia(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var d=u[Xt]||null;if(!d)throw Error(s(90));Ia(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===n.form&&Ui(u)}break e;case"textarea":Xu(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ks(n,!!a.multiple,i,!1)}}}var Na=!1;function Vs(n,i,a){if(Na)return n(i,a);Na=!0;try{var u=n(i);return u}finally{if(Na=!1,(Ms!==null||Vr!==null)&&(Fc(),Ms&&(i=Ms,n=Vr,Vr=Ms=null,Li(i),n)))for(i=0;i<n.length;i++)Li(n[i])}}function cr(n,i){var a=n.stateNode;if(a===null)return null;var u=a[Xt]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zi=!1;if(Qn)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){zi=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{zi=!1}var Ur=null,ul=null,Bi=null;function cl(){if(Bi)return Bi;var n,i=ul,a=i.length,u,d="value"in Ur?Ur.value:Ur.textContent,f=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(u=1;u<=_&&i[a-u]===d[f-u];u++);return Bi=d.slice(n,1<u?1-u:void 0)}function qi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ts(){return!0}function hr(){return!1}function tn(n){function i(a,u,d,f,_){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ts:hr,this.isPropagationStopped=hr,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),i}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=tn(ns),Us=w({},ns,{view:0,detail:0}),hl=tn(Us),js,ka,Lr,Da=w({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lr&&(Lr&&n.type==="mousemove"?(js=n.screenX-Lr.screenX,ka=n.screenY-Lr.screenY):ka=js=0,Lr=n),js)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),dl=tn(Da),Hi=w({},Da,{dataTransfer:0}),Zu=tn(Hi),ec=w({},Us,{relatedTarget:0}),$i=tn(ec),fl=w({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),tc=tn(fl),Pa=w({},ns,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nc=tn(Pa),rc=w({},ns,{data:0}),zr=tn(rc),sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ac[n])?!!i[n]:!1}function Ls(){return oc}var bn=w({},Us,{key:function(n){if(n.key){var i=sc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ic[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(n){return n.type==="keypress"?qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lc=tn(bn),uc=w({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=tn(uc),h=w({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),y=tn(h),v=w({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=tn(v),B=w({},Da,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=tn(B),ae=w({},ns,{newState:0,oldState:0}),Ne=tn(ae),It=[9,13,27,32],Ze=Qn&&"CompositionEvent"in window,vt=null;Qn&&"documentMode"in document&&(vt=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!vt,Br=Qn&&(!Ze||vt&&8<vt&&11>=vt),dr=" ",fr=!1;function Fi(n,i){switch(n){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Va=!1;function oS(n,i){switch(n){case"compositionend":return Ma(i);case"keypress":return i.which!==32?null:(fr=!0,dr);case"textInput":return n=i.data,n===dr&&fr?null:n;default:return null}}function lS(n,i){if(Va)return n==="compositionend"||!Ze&&Fi(n,i)?(n=cl(),Bi=ul=Ur=null,Va=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Br&&i.locale!=="ko"?null:i.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!uS[n.type]:i==="textarea"}function Lp(n,i,a,u){Ms?Vr?Vr.push(u):Vr=[u]:Ms=u,i=Wc(i,"onChange"),0<i.length&&(a=new jr("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var ml=null,gl=null;function cS(n){wv(n,0)}function cc(n){var i=kn(n);if(Ui(i))return n}function zp(n,i){if(n==="change")return i}var Bp=!1;if(Qn){var Dd;if(Qn){var Pd="oninput"in document;if(!Pd){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),Pd=typeof qp.oninput=="function"}Dd=Pd}else Dd=!1;Bp=Dd&&(!document.documentMode||9<document.documentMode)}function Hp(){ml&&(ml.detachEvent("onpropertychange",$p),gl=ml=null)}function $p(n){if(n.propertyName==="value"&&cc(gl)){var i=[];Lp(i,gl,n,Kn(n)),Vs(cS,i)}}function hS(n,i,a){n==="focusin"?(Hp(),ml=i,gl=a,ml.attachEvent("onpropertychange",$p)):n==="focusout"&&Hp()}function dS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cc(gl)}function fS(n,i){if(n==="click")return cc(i)}function mS(n,i){if(n==="input"||n==="change")return cc(i)}function gS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Pn=typeof Object.is=="function"?Object.is:gS;function pl(n,i){if(Pn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!Ye.call(i,d)||!Pn(n[d],i[d]))return!1}return!0}function Fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gp(n,i){var a=Fp(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function Kp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Kp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Qp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Mr(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Mr(n.document)}return i}function Md(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var pS=Qn&&"documentMode"in document&&11>=document.documentMode,Ua=null,Vd=null,yl=null,Ud=!1;function Yp(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ud||Ua==null||Ua!==Mr(u)||(u=Ua,"selectionStart"in u&&Md(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yl&&pl(yl,u)||(yl=u,u=Wc(Vd,"onSelect"),0<u.length&&(i=new jr("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Ua)))}function Gi(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var ja={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},jd={},Xp={};Qn&&(Xp=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Ki(n){if(jd[n])return jd[n];if(!ja[n])return n;var i=ja[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Xp)return jd[n]=i[a];return n}var Jp=Ki("animationend"),Wp=Ki("animationiteration"),Zp=Ki("animationstart"),yS=Ki("transitionrun"),_S=Ki("transitionstart"),vS=Ki("transitioncancel"),ey=Ki("transitionend"),ty=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function mr(n,i){ty.set(n,i),Dr(i,[n])}var hc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Xn=[],La=0,zd=0;function dc(){for(var n=La,i=zd=La=0;i<n;){var a=Xn[i];Xn[i++]=null;var u=Xn[i];Xn[i++]=null;var d=Xn[i];Xn[i++]=null;var f=Xn[i];if(Xn[i++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}f!==0&&ny(a,d,f)}}function fc(n,i,a,u){Xn[La++]=n,Xn[La++]=i,Xn[La++]=a,Xn[La++]=u,zd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,a,u){return fc(n,i,a,u),mc(n)}function Qi(n,i){return fc(n,null,null,i),mc(n)}function ny(n,i,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var d=!1,f=n.return;f!==null;)f.childLanes|=a,u=f.alternate,u!==null&&(u.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&i!==null&&(d=31-Ct(a),n=f.hiddenUpdates,u=n[d],u===null?n[d]=[i]:u.push(i),i.lane=a|536870912),f):null}function mc(n){if(50<Ll)throw Ll=0,Jf=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var za={};function bS(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,i,a,u){return new bS(n,i,a,u)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ss(n,i){var a=n.alternate;return a===null?(a=Mn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function ry(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function gc(n,i,a,u,d,f){var _=0;if(u=n,typeof n=="function")qd(n)&&(_=1);else if(typeof n=="string")_=AA(n,a,re.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Mn(31,a,i,d),n.elementType=I,n.lanes=f,n;case z:return Yi(a.children,d,f,i);case q:_=8,d|=24;break;case te:return n=Mn(12,a,i,d|2),n.elementType=te,n.lanes=f,n;case de:return n=Mn(13,a,i,d),n.elementType=de,n.lanes=f,n;case le:return n=Mn(19,a,i,d),n.elementType=le,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case L:_=10;break e;case H:_=9;break e;case se:_=11;break e;case C:_=14;break e;case A:_=16,u=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=Mn(_,a,i,d),i.elementType=n,i.type=u,i.lanes=f,i}function Yi(n,i,a,u){return n=Mn(7,n,u,i),n.lanes=a,n}function Hd(n,i,a){return n=Mn(6,n,null,i),n.lanes=a,n}function sy(n){var i=Mn(18,null,null,0);return i.stateNode=n,i}function $d(n,i,a){return i=Mn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var iy=new WeakMap;function Jn(n,i){if(typeof n=="object"&&n!==null){var a=iy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:dn(i)},iy.set(n,i),i)}return{value:n,source:i,stack:dn(i)}}var Ba=[],qa=0,pc=null,_l=0,Wn=[],Zn=0,zs=null,qr=1,Hr="";function is(n,i){Ba[qa++]=_l,Ba[qa++]=pc,pc=n,_l=i}function ay(n,i,a){Wn[Zn++]=qr,Wn[Zn++]=Hr,Wn[Zn++]=zs,zs=n;var u=qr;n=Hr;var d=32-Ct(u)-1;u&=~(1<<d),a+=1;var f=32-Ct(i)+d;if(30<f){var _=d-d%5;f=(u&(1<<_)-1).toString(32),u>>=_,d-=_,qr=1<<32-Ct(i)+d|a<<d|u,Hr=f+n}else qr=1<<f|a<<d|u,Hr=n}function Fd(n){n.return!==null&&(is(n,1),ay(n,1,0))}function Gd(n){for(;n===pc;)pc=Ba[--qa],Ba[qa]=null,_l=Ba[--qa],Ba[qa]=null;for(;n===zs;)zs=Wn[--Zn],Wn[Zn]=null,Hr=Wn[--Zn],Wn[Zn]=null,qr=Wn[--Zn],Wn[Zn]=null}function oy(n,i){Wn[Zn++]=qr,Wn[Zn++]=Hr,Wn[Zn++]=zs,qr=i.id,Hr=i.overflow,zs=n}var nn=null,pt=null,Fe=!1,Bs=null,er=!1,Kd=Error(s(519));function qs(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Jn(i,n)),Kd}function ly(n){var i=n.stateNode,a=n.type,u=n.memoizedProps;switch(i[Pt]=n,i[Xt]=u,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Bl.length;a++)je(Bl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),Yu(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Ds(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||Av(i.textContent,a)?(u.popover!=null&&(je("beforetoggle",i),je("toggle",i)),u.onScroll!=null&&je("scroll",i),u.onScrollEnd!=null&&je("scrollend",i),u.onClick!=null&&(i.onclick=ur),i=!0):i=!1,i||qs(n,!0)}function uy(n){for(nn=n.return;nn;)switch(nn.tag){case 5:case 31:case 13:er=!1;return;case 27:case 3:er=!0;return;default:nn=nn.return}}function Ha(n){if(n!==nn)return!1;if(!Fe)return uy(n),Fe=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||dm(n.type,n.memoizedProps)),a=!a),a&&pt&&qs(n),uy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));pt=Pv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));pt=Pv(n)}else i===27?(i=pt,ni(n.type)?(n=ym,ym=null,pt=n):pt=i):pt=nn?nr(n.stateNode.nextSibling):null;return!0}function Xi(){pt=nn=null,Fe=!1}function Qd(){var n=Bs;return n!==null&&(In===null?In=n:In.push.apply(In,n),Bs=null),n}function vl(n){Bs===null?Bs=[n]:Bs.push(n)}var Yd=D(null),Ji=null,as=null;function Hs(n,i,a){ie(Yd,i._currentValue),i._currentValue=a}function os(n){n._currentValue=Yd.current,$(Yd)}function Xd(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function Jd(n,i,a,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=d;for(var N=0;N<i.length;N++)if(E.context===i[N]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Xd(f.return,a,n),u||(_=null);break e}f=E.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Xd(_,a,n),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===n){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function $a(n,i,a,u){n=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=d.type;Pn(d.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(d===Ce.current){if(_=d.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Gl):n=[Gl])}d=d.return}n!==null&&Jd(i,n,a,u),i.flags|=262144}function yc(n){for(n=n.firstContext;n!==null;){if(!Pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Wi(n){Ji=n,as=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function rn(n){return cy(Ji,n)}function _c(n,i){return Ji===null&&Wi(n),cy(n,i)}function cy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},as===null){if(n===null)throw Error(s(308));as=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else as=as.next=i;return a}var wS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},ES=r.unstable_scheduleCallback,TS=r.unstable_NormalPriority,Ut={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new wS,data:new Map,refCount:0}}function bl(n){n.refCount--,n.refCount===0&&ES(TS,function(){n.controller.abort()})}var wl=null,Zd=0,Fa=0,Ga=null;function SS(n,i){if(wl===null){var a=wl=[];Zd=0,Fa=rm(),Ga={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Zd++,i.then(hy,hy),i}function hy(){if(--Zd===0&&wl!==null){Ga!==null&&(Ga.status="fulfilled");var n=wl;wl=null,Fa=0,Ga=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function AS(n,i){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var dy=X.S;X.S=function(n,i){Y_=vn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&SS(n,i),dy!==null&&dy(n,i)};var Zi=D(null);function ef(){var n=Zi.current;return n!==null?n:ft.pooledCache}function vc(n,i){i===null?ie(Zi,Zi.current):ie(Zi,i.pool)}function fy(){var n=ef();return n===null?null:{parent:Ut._currentValue,pool:n}}var Ka=Error(s(460)),tf=Error(s(474)),bc=Error(s(542)),wc={then:function(){}};function my(n){return n=n.status,n==="fulfilled"||n==="rejected"}function gy(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(ur,ur),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,yy(n),n;default:if(typeof i.status=="string")i.then(ur,ur);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=u}},function(u){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,yy(n),n}throw ta=i,Ka}}function ea(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,Ka):a}}var ta=null;function py(){if(ta===null)throw Error(s(459));var n=ta;return ta=null,n}function yy(n){if(n===Ka||n===bc)throw Error(s(483))}var Qa=null,El=0;function Ec(n){var i=El;return El+=1,Qa===null&&(Qa=[]),gy(Qa,n,i)}function Tl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Tc(n,i){throw i.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function _y(n){function i(j,M){if(n){var F=j.deletions;F===null?(j.deletions=[M],j.flags|=16):F.push(M)}}function a(j,M){if(!n)return null;for(;M!==null;)i(j,M),M=M.sibling;return null}function u(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function d(j,M){return j=ss(j,M),j.index=0,j.sibling=null,j}function f(j,M,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<M?(j.flags|=67108866,M):F):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function E(j,M,F,W){return M===null||M.tag!==6?(M=Hd(F,j.mode,W),M.return=j,M):(M=d(M,F),M.return=j,M)}function N(j,M,F,W){var ye=F.type;return ye===z?J(j,M,F.props.children,W,F.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===A&&ea(ye)===M.type)?(M=d(M,F.props),Tl(M,F),M.return=j,M):(M=gc(F.type,F.key,F.props,null,j.mode,W),Tl(M,F),M.return=j,M)}function G(j,M,F,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=$d(F,j.mode,W),M.return=j,M):(M=d(M,F.children||[]),M.return=j,M)}function J(j,M,F,W,ye){return M===null||M.tag!==7?(M=Yi(F,j.mode,W,ye),M.return=j,M):(M=d(M,F),M.return=j,M)}function Z(j,M,F){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Hd(""+M,j.mode,F),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return F=gc(M.type,M.key,M.props,null,j.mode,F),Tl(F,M),F.return=j,F;case V:return M=$d(M,j.mode,F),M.return=j,M;case A:return M=ea(M),Z(j,M,F)}if(Ke(M)||U(M))return M=Yi(M,j.mode,F,null),M.return=j,M;if(typeof M.then=="function")return Z(j,Ec(M),F);if(M.$$typeof===L)return Z(j,_c(j,M),F);Tc(j,M)}return null}function K(j,M,F,W){var ye=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:E(j,M,""+F,W);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case x:return F.key===ye?N(j,M,F,W):null;case V:return F.key===ye?G(j,M,F,W):null;case A:return F=ea(F),K(j,M,F,W)}if(Ke(F)||U(F))return ye!==null?null:J(j,M,F,W,null);if(typeof F.then=="function")return K(j,M,Ec(F),W);if(F.$$typeof===L)return K(j,M,_c(j,F),W);Tc(j,F)}return null}function Y(j,M,F,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return j=j.get(F)||null,E(M,j,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return j=j.get(W.key===null?F:W.key)||null,N(M,j,W,ye);case V:return j=j.get(W.key===null?F:W.key)||null,G(M,j,W,ye);case A:return W=ea(W),Y(j,M,F,W,ye)}if(Ke(W)||U(W))return j=j.get(F)||null,J(M,j,W,ye,null);if(typeof W.then=="function")return Y(j,M,F,Ec(W),ye);if(W.$$typeof===L)return Y(j,M,F,_c(M,W),ye);Tc(M,W)}return null}function fe(j,M,F,W){for(var ye=null,Je=null,ge=M,Pe=M=0,Be=null;ge!==null&&Pe<F.length;Pe++){ge.index>Pe?(Be=ge,ge=null):Be=ge.sibling;var We=K(j,ge,F[Pe],W);if(We===null){ge===null&&(ge=Be);break}n&&ge&&We.alternate===null&&i(j,ge),M=f(We,M,Pe),Je===null?ye=We:Je.sibling=We,Je=We,ge=Be}if(Pe===F.length)return a(j,ge),Fe&&is(j,Pe),ye;if(ge===null){for(;Pe<F.length;Pe++)ge=Z(j,F[Pe],W),ge!==null&&(M=f(ge,M,Pe),Je===null?ye=ge:Je.sibling=ge,Je=ge);return Fe&&is(j,Pe),ye}for(ge=u(ge);Pe<F.length;Pe++)Be=Y(ge,j,Pe,F[Pe],W),Be!==null&&(n&&Be.alternate!==null&&ge.delete(Be.key===null?Pe:Be.key),M=f(Be,M,Pe),Je===null?ye=Be:Je.sibling=Be,Je=Be);return n&&ge.forEach(function(oi){return i(j,oi)}),Fe&&is(j,Pe),ye}function ve(j,M,F,W){if(F==null)throw Error(s(151));for(var ye=null,Je=null,ge=M,Pe=M=0,Be=null,We=F.next();ge!==null&&!We.done;Pe++,We=F.next()){ge.index>Pe?(Be=ge,ge=null):Be=ge.sibling;var oi=K(j,ge,We.value,W);if(oi===null){ge===null&&(ge=Be);break}n&&ge&&oi.alternate===null&&i(j,ge),M=f(oi,M,Pe),Je===null?ye=oi:Je.sibling=oi,Je=oi,ge=Be}if(We.done)return a(j,ge),Fe&&is(j,Pe),ye;if(ge===null){for(;!We.done;Pe++,We=F.next())We=Z(j,We.value,W),We!==null&&(M=f(We,M,Pe),Je===null?ye=We:Je.sibling=We,Je=We);return Fe&&is(j,Pe),ye}for(ge=u(ge);!We.done;Pe++,We=F.next())We=Y(ge,j,Pe,We.value,W),We!==null&&(n&&We.alternate!==null&&ge.delete(We.key===null?Pe:We.key),M=f(We,M,Pe),Je===null?ye=We:Je.sibling=We,Je=We);return n&&ge.forEach(function(VA){return i(j,VA)}),Fe&&is(j,Pe),ye}function ct(j,M,F,W){if(typeof F=="object"&&F!==null&&F.type===z&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case x:e:{for(var ye=F.key;M!==null;){if(M.key===ye){if(ye=F.type,ye===z){if(M.tag===7){a(j,M.sibling),W=d(M,F.props.children),W.return=j,j=W;break e}}else if(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===A&&ea(ye)===M.type){a(j,M.sibling),W=d(M,F.props),Tl(W,F),W.return=j,j=W;break e}a(j,M);break}else i(j,M);M=M.sibling}F.type===z?(W=Yi(F.props.children,j.mode,W,F.key),W.return=j,j=W):(W=gc(F.type,F.key,F.props,null,j.mode,W),Tl(W,F),W.return=j,j=W)}return _(j);case V:e:{for(ye=F.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){a(j,M.sibling),W=d(M,F.children||[]),W.return=j,j=W;break e}else{a(j,M);break}else i(j,M);M=M.sibling}W=$d(F,j.mode,W),W.return=j,j=W}return _(j);case A:return F=ea(F),ct(j,M,F,W)}if(Ke(F))return fe(j,M,F,W);if(U(F)){if(ye=U(F),typeof ye!="function")throw Error(s(150));return F=ye.call(F),ve(j,M,F,W)}if(typeof F.then=="function")return ct(j,M,Ec(F),W);if(F.$$typeof===L)return ct(j,M,_c(j,F),W);Tc(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,M!==null&&M.tag===6?(a(j,M.sibling),W=d(M,F),W.return=j,j=W):(a(j,M),W=Hd(F,j.mode,W),W.return=j,j=W),_(j)):a(j,M)}return function(j,M,F,W){try{El=0;var ye=ct(j,M,F,W);return Qa=null,ye}catch(ge){if(ge===Ka||ge===bc)throw ge;var Je=Mn(29,ge,null,j.mode);return Je.lanes=W,Je.return=j,Je}}}var na=_y(!0),vy=_y(!1),$s=!1;function nf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Gs(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,i=mc(n),ny(n,null,a),i}return fc(n,u,i,a),mc(n)}function Sl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,Jo(n,a)}}function sf(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var af=!1;function Al(){if(af){var n=Ga;if(n!==null)throw n}}function Rl(n,i,a,u){af=!1;var d=n.updateQueue;$s=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var N=E,G=N.next;N.next=null,_===null?f=G:_.next=G,_=N;var J=n.alternate;J!==null&&(J=J.updateQueue,E=J.lastBaseUpdate,E!==_&&(E===null?J.firstBaseUpdate=G:E.next=G,J.lastBaseUpdate=N))}if(f!==null){var Z=d.baseState;_=0,J=G=N=null,E=f;do{var K=E.lane&-536870913,Y=K!==E.lane;if(Y?(ze&K)===K:(u&K)===K){K!==0&&K===Fa&&(af=!0),J!==null&&(J=J.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var fe=n,ve=E;K=i;var ct=a;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){Z=fe.call(ct,Z,K);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,K=typeof fe=="function"?fe.call(ct,Z,K):fe,K==null)break e;Z=w({},Z,K);break e;case 2:$s=!0}}K=E.callback,K!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},J===null?(G=J=Y,N=Z):J=J.next=Y,_|=K;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;Y=E,E=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);J===null&&(N=Z),d.baseState=N,d.firstBaseUpdate=G,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),Js|=_,n.lanes=_,n.memoizedState=Z}}function by(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function wy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)by(a[n],i)}var Ya=D(null),Sc=D(0);function Ey(n,i){n=ps,ie(Sc,n),ie(Ya,i),ps=n|i.baseLanes}function of(){ie(Sc,ps),ie(Ya,Ya.current)}function lf(){ps=Sc.current,$(Ya),$(Sc)}var Vn=D(null),tr=null;function Ks(n){var i=n.alternate;ie(Ot,Ot.current&1),ie(Vn,n),tr===null&&(i===null||Ya.current!==null||i.memoizedState!==null)&&(tr=n)}function uf(n){ie(Ot,Ot.current),ie(Vn,n),tr===null&&(tr=n)}function Ty(n){n.tag===22?(ie(Ot,Ot.current),ie(Vn,n),tr===null&&(tr=n)):Qs()}function Qs(){ie(Ot,Ot.current),ie(Vn,Vn.current)}function Un(n){$(Vn),tr===n&&(tr=null),$(Ot)}var Ot=D(0);function Ac(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||gm(a)||pm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ls=0,ke=null,lt=null,jt=null,Rc=!1,Xa=!1,ra=!1,Cc=0,Cl=0,Ja=null,RS=0;function St(){throw Error(s(321))}function cf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Pn(n[a],i[a]))return!1;return!0}function hf(n,i,a,u,d,f){return ls=f,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?a_:Rf,ra=!1,f=a(u,d),ra=!1,Xa&&(f=Ay(i,a,u,d)),Sy(n),f}function Sy(n){X.H=xl;var i=lt!==null&&lt.next!==null;if(ls=0,jt=lt=ke=null,Rc=!1,Cl=0,Ja=null,i)throw Error(s(300));n===null||Lt||(n=n.dependencies,n!==null&&yc(n)&&(Lt=!0))}function Ay(n,i,a,u){ke=n;var d=0;do{if(Xa&&(Ja=null),Cl=0,Xa=!1,25<=d)throw Error(s(301));if(d+=1,jt=lt=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}X.H=o_,f=i(a,u)}while(Xa);return f}function CS(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Il(i):i,n=n.useState()[0],(lt!==null?lt.memoizedState:null)!==n&&(ke.flags|=1024),i}function df(){var n=Cc!==0;return Cc=0,n}function ff(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function mf(n){if(Rc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Rc=!1}ls=0,jt=lt=ke=null,Xa=!1,Cl=Cc=0,Ja=null}function wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?ke.memoizedState=jt=n:jt=jt.next=n,jt}function xt(){if(lt===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=lt.next;var i=jt===null?ke.memoizedState:jt.next;if(i!==null)jt=i,lt=n;else{if(n===null)throw ke.alternate===null?Error(s(467)):Error(s(310));lt=n,n={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},jt===null?ke.memoizedState=jt=n:jt=jt.next=n}return jt}function Ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var i=Cl;return Cl+=1,Ja===null&&(Ja=[]),n=gy(Ja,n,i),i=ke,(jt===null?i.memoizedState:jt.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?a_:Rf),n}function Oc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===L)return rn(n)}throw Error(s(438,String(n)))}function gf(n){var i=null,a=ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ic(),ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),u=0;u<n;u++)a[u]=P;return i.index++,a}function us(n,i){return typeof i=="function"?i(n):i}function xc(n){var i=xt();return pf(i,lt,n)}function pf(n,i,a){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var d=n.baseQueue,f=u.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}i.baseQueue=d=f,u.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{i=d.next;var E=_=null,N=null,G=i,J=!1;do{var Z=G.lane&-536870913;if(Z!==G.lane?(ze&Z)===Z:(ls&Z)===Z){var K=G.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Z===Fa&&(J=!0);else if((ls&K)===K){G=G.next,K===Fa&&(J=!0);continue}else Z={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(E=N=Z,_=f):N=N.next=Z,ke.lanes|=K,Js|=K;Z=G.action,ra&&a(f,Z),f=G.hasEagerState?G.eagerState:a(f,Z)}else K={lane:Z,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(E=N=K,_=f):N=N.next=K,ke.lanes|=Z,Js|=Z;G=G.next}while(G!==null&&G!==i);if(N===null?_=f:N.next=E,!Pn(f,n.memoizedState)&&(Lt=!0,J&&(a=Ga,a!==null)))throw a;n.memoizedState=f,n.baseState=_,n.baseQueue=N,u.lastRenderedState=f}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function yf(n){var i=xt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=n(f,_.action),_=_.next;while(_!==d);Pn(f,i.memoizedState)||(Lt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,u]}function Ry(n,i,a){var u=ke,d=xt(),f=Fe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Pn((lt||d).memoizedState,a);if(_&&(d.memoizedState=a,Lt=!0),d=d.queue,bf(Oy.bind(null,u,d,n),[n]),d.getSnapshot!==i||_||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,Wa(9,{destroy:void 0},Iy.bind(null,u,d,a,i),null),ft===null)throw Error(s(349));f||(ls&127)!==0||Cy(u,i,a)}return a}function Cy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ke.updateQueue,i===null?(i=Ic(),ke.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Iy(n,i,a,u){i.value=a,i.getSnapshot=u,xy(i)&&Ny(n)}function Oy(n,i,a){return a(function(){xy(i)&&Ny(n)})}function xy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Pn(n,a)}catch{return!0}}function Ny(n){var i=Qi(n,2);i!==null&&On(i,n,2)}function _f(n){var i=wn();if(typeof n=="function"){var a=n;if(n=a(),ra){Fn(!0);try{a()}finally{Fn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:n},i}function ky(n,i,a,u){return n.baseState=a,pf(n,lt,typeof u=="function"?u:us)}function IS(n,i,a,u,d){if(Dc(n))throw Error(s(485));if(n=i.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};X.T!==null?a(!0):f.isTransition=!1,u(f),a=i.pending,a===null?(f.next=i.pending=f,Dy(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Dy(n,i){var a=i.action,u=i.payload,d=n.state;if(i.isTransition){var f=X.T,_={};X.T=_;try{var E=a(d,u),N=X.S;N!==null&&N(_,E),Py(n,i,E)}catch(G){vf(n,i,G)}finally{f!==null&&_.types!==null&&(f.types=_.types),X.T=f}}else try{f=a(d,u),Py(n,i,f)}catch(G){vf(n,i,G)}}function Py(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){My(n,i,u)},function(u){return vf(n,i,u)}):My(n,i,a)}function My(n,i,a){i.status="fulfilled",i.value=a,Vy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,Dy(n,a)))}function vf(n,i,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Vy(i),i=i.next;while(i!==u)}n.action=null}function Vy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Uy(n,i){return i}function jy(n,i){if(Fe){var a=ft.formState;if(a!==null){e:{var u=ke;if(Fe){if(pt){t:{for(var d=pt,f=er;d.nodeType!==8;){if(!f){d=null;break t}if(d=nr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){pt=nr(d.nextSibling),u=d.data==="F!";break e}}qs(u)}u=!1}u&&(i=a[0])}}return a=wn(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:i},a.queue=u,a=r_.bind(null,ke,u),u.dispatch=a,u=_f(!1),f=Af.bind(null,ke,!1,u.queue),u=wn(),d={state:i,dispatch:null,action:n,pending:null},u.queue=d,a=IS.bind(null,ke,d,f,a),d.dispatch=a,u.memoizedState=n,[i,a,!1]}function Ly(n){var i=xt();return zy(i,lt,n)}function zy(n,i,a){if(i=pf(n,i,Uy)[0],n=xc(us)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Il(i)}catch(_){throw _===Ka?bc:_}else u=i;i=xt();var d=i.queue,f=d.dispatch;return a!==i.memoizedState&&(ke.flags|=2048,Wa(9,{destroy:void 0},OS.bind(null,d,a),null)),[u,f,n]}function OS(n,i){n.action=i}function By(n){var i=xt(),a=lt;if(a!==null)return zy(i,a,n);xt(),i=i.memoizedState,a=xt();var u=a.queue.dispatch;return a.memoizedState=n,[i,u,!1]}function Wa(n,i,a,u){return n={tag:n,create:a,deps:u,inst:i,next:null},i=ke.updateQueue,i===null&&(i=Ic(),ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n),n}function qy(){return xt().memoizedState}function Nc(n,i,a,u){var d=wn();ke.flags|=n,d.memoizedState=Wa(1|i,{destroy:void 0},a,u===void 0?null:u)}function kc(n,i,a,u){var d=xt();u=u===void 0?null:u;var f=d.memoizedState.inst;lt!==null&&u!==null&&cf(u,lt.memoizedState.deps)?d.memoizedState=Wa(i,f,a,u):(ke.flags|=n,d.memoizedState=Wa(1|i,f,a,u))}function Hy(n,i){Nc(8390656,8,n,i)}function bf(n,i){kc(2048,8,n,i)}function xS(n){ke.flags|=4;var i=ke.updateQueue;if(i===null)i=Ic(),ke.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function $y(n){var i=xt().memoizedState;return xS({ref:i,nextImpl:n}),function(){if((et&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Fy(n,i){return kc(4,2,n,i)}function Gy(n,i){return kc(4,4,n,i)}function Ky(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qy(n,i,a){a=a!=null?a.concat([n]):null,kc(4,4,Ky.bind(null,i,n),a)}function wf(){}function Yy(n,i){var a=xt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&cf(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function Xy(n,i){var a=xt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&cf(i,u[1]))return u[0];if(u=n(),ra){Fn(!0);try{n()}finally{Fn(!1)}}return a.memoizedState=[u,i],u}function Ef(n,i,a){return a===void 0||(ls&1073741824)!==0&&(ze&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=J_(),ke.lanes|=n,Js|=n,a)}function Jy(n,i,a,u){return Pn(a,i)?a:Ya.current!==null?(n=Ef(n,a,u),Pn(n,i)||(Lt=!0),n):(ls&42)===0||(ls&1073741824)!==0&&(ze&261930)===0?(Lt=!0,n.memoizedState=a):(n=J_(),ke.lanes|=n,Js|=n,i)}function Wy(n,i,a,u,d){var f=oe.p;oe.p=f!==0&&8>f?f:8;var _=X.T,E={};X.T=E,Af(n,!1,i,a);try{var N=d(),G=X.S;if(G!==null&&G(E,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=AS(N,u);Ol(n,i,J,zn(n))}else Ol(n,i,u,zn(n))}catch(Z){Ol(n,i,{then:function(){},status:"rejected",reason:Z},zn())}finally{oe.p=f,_!==null&&E.types!==null&&(_.types=E.types),X.T=_}}function NS(){}function Tf(n,i,a,u){if(n.tag!==5)throw Error(s(476));var d=Zy(n).queue;Wy(n,d,i,me,a===null?NS:function(){return e_(n),a(u)})}function Zy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function e_(n){var i=Zy(n);i.next===null&&(i=n.alternate.memoizedState),Ol(n,i.next.queue,{},zn())}function Sf(){return rn(Gl)}function t_(){return xt().memoizedState}function n_(){return xt().memoizedState}function kS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=zn();n=Fs(a);var u=Gs(i,n,a);u!==null&&(On(u,i,a),Sl(u,i,a)),i={cache:Wd()},n.payload=i;return}i=i.return}}function DS(n,i,a){var u=zn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Dc(n)?s_(i,a):(a=Bd(n,i,a,u),a!==null&&(On(a,n,u),i_(a,i,u)))}function r_(n,i,a){var u=zn();Ol(n,i,a,u)}function Ol(n,i,a,u){var d={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dc(n))s_(i,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,E=f(_,a);if(d.hasEagerState=!0,d.eagerState=E,Pn(E,_))return fc(n,i,d,0),ft===null&&dc(),!1}catch{}if(a=Bd(n,i,d,u),a!==null)return On(a,n,u),i_(a,i,u),!0}return!1}function Af(n,i,a,u){if(u={lane:2,revertLane:rm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dc(n)){if(i)throw Error(s(479))}else i=Bd(n,a,u,2),i!==null&&On(i,n,2)}function Dc(n){var i=n.alternate;return n===ke||i!==null&&i===ke}function s_(n,i){Xa=Rc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function i_(n,i,a){if((a&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,Jo(n,a)}}var xl={readContext:rn,use:Oc,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};xl.useEffectEvent=St;var a_={readContext:rn,use:Oc,useCallback:function(n,i){return wn().memoizedState=[n,i===void 0?null:i],n},useContext:rn,useEffect:Hy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Nc(4194308,4,Ky.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Nc(4194308,4,n,i)},useInsertionEffect:function(n,i){Nc(4,2,n,i)},useMemo:function(n,i){var a=wn();i=i===void 0?null:i;var u=n();if(ra){Fn(!0);try{n()}finally{Fn(!1)}}return a.memoizedState=[u,i],u},useReducer:function(n,i,a){var u=wn();if(a!==void 0){var d=a(i);if(ra){Fn(!0);try{a(i)}finally{Fn(!1)}}}else d=i;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=DS.bind(null,ke,n),[u.memoizedState,n]},useRef:function(n){var i=wn();return n={current:n},i.memoizedState=n},useState:function(n){n=_f(n);var i=n.queue,a=r_.bind(null,ke,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:wf,useDeferredValue:function(n,i){var a=wn();return Ef(a,n,i)},useTransition:function(){var n=_f(!1);return n=Wy.bind(null,ke,n.queue,!0,!1),wn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var u=ke,d=wn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ft===null)throw Error(s(349));(ze&127)!==0||Cy(u,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,Hy(Oy.bind(null,u,f,n),[n]),u.flags|=2048,Wa(9,{destroy:void 0},Iy.bind(null,u,f,a,i),null),a},useId:function(){var n=wn(),i=ft.identifierPrefix;if(Fe){var a=Hr,u=qr;a=(u&~(1<<32-Ct(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Cc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=RS++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Sf,useFormState:jy,useActionState:jy,useOptimistic:function(n){var i=wn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Af.bind(null,ke,!0,a),a.dispatch=i,[n,i]},useMemoCache:gf,useCacheRefresh:function(){return wn().memoizedState=kS.bind(null,ke)},useEffectEvent:function(n){var i=wn(),a={impl:n};return i.memoizedState=a,function(){if((et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Rf={readContext:rn,use:Oc,useCallback:Yy,useContext:rn,useEffect:bf,useImperativeHandle:Qy,useInsertionEffect:Fy,useLayoutEffect:Gy,useMemo:Xy,useReducer:xc,useRef:qy,useState:function(){return xc(us)},useDebugValue:wf,useDeferredValue:function(n,i){var a=xt();return Jy(a,lt.memoizedState,n,i)},useTransition:function(){var n=xc(us)[0],i=xt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Ry,useId:t_,useHostTransitionStatus:Sf,useFormState:Ly,useActionState:Ly,useOptimistic:function(n,i){var a=xt();return ky(a,lt,n,i)},useMemoCache:gf,useCacheRefresh:n_};Rf.useEffectEvent=$y;var o_={readContext:rn,use:Oc,useCallback:Yy,useContext:rn,useEffect:bf,useImperativeHandle:Qy,useInsertionEffect:Fy,useLayoutEffect:Gy,useMemo:Xy,useReducer:yf,useRef:qy,useState:function(){return yf(us)},useDebugValue:wf,useDeferredValue:function(n,i){var a=xt();return lt===null?Ef(a,n,i):Jy(a,lt.memoizedState,n,i)},useTransition:function(){var n=yf(us)[0],i=xt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Ry,useId:t_,useHostTransitionStatus:Sf,useFormState:By,useActionState:By,useOptimistic:function(n,i){var a=xt();return lt!==null?ky(a,lt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:gf,useCacheRefresh:n_};o_.useEffectEvent=$y;function Cf(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:w({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var If={enqueueSetState:function(n,i,a){n=n._reactInternals;var u=zn(),d=Fs(u);d.payload=i,a!=null&&(d.callback=a),i=Gs(n,d,u),i!==null&&(On(i,n,u),Sl(i,n,u))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=zn(),d=Fs(u);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Gs(n,d,u),i!==null&&(On(i,n,u),Sl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=zn(),u=Fs(a);u.tag=2,i!=null&&(u.callback=i),i=Gs(n,u,a),i!==null&&(On(i,n,a),Sl(i,n,a))}};function l_(n,i,a,u,d,f,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,f,_):i.prototype&&i.prototype.isPureReactComponent?!pl(a,u)||!pl(d,f):!0}function u_(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&If.enqueueReplaceState(i,i.state,null)}function sa(n,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(n=n.defaultProps){a===i&&(a=w({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}function c_(n){hc(n)}function h_(n){console.error(n)}function d_(n){hc(n)}function Pc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function f_(n,i,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Of(n,i,a){return a=Fs(a),a.tag=3,a.payload={element:null},a.callback=function(){Pc(n,i)},a}function m_(n){return n=Fs(n),n.tag=3,n}function g_(n,i,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=u.value;n.payload=function(){return d(f)},n.callback=function(){f_(i,a,u)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){f_(i,a,u),typeof d!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function PS(n,i,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&$a(i,a,d,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return tr===null?Gc():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===wc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),em(n,u,d)),!1;case 22:return a.flags|=65536,u===wc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),em(n,u,d)),!1}throw Error(s(435,a.tag))}return em(n,u,d),Gc(),!1}if(Fe)return i=Vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,u!==Kd&&(n=Error(s(422),{cause:u}),vl(Jn(n,a)))):(u!==Kd&&(i=Error(s(423),{cause:u}),vl(Jn(i,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Jn(u,a),d=Of(n.stateNode,u,d),sf(n,d),At!==4&&(At=2)),!1;var f=Error(s(520),{cause:u});if(f=Jn(f,a),jl===null?jl=[f]:jl.push(f),At!==4&&(At=2),i===null)return!0;u=Jn(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Of(a.stateNode,u,n),sf(a,n),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=m_(d),g_(d,n,a,u),sf(a,d),!1}a=a.return}while(a!==null);return!1}var xf=Error(s(461)),Lt=!1;function sn(n,i,a,u){i.child=n===null?vy(i,null,a,u):na(i,n.child,a,u)}function p_(n,i,a,u,d){a=a.render;var f=i.ref;if("ref"in u){var _={};for(var E in u)E!=="ref"&&(_[E]=u[E])}else _=u;return Wi(i),u=hf(n,i,a,_,f,d),E=df(),n!==null&&!Lt?(ff(n,i,d),cs(n,i,d)):(Fe&&E&&Fd(i),i.flags|=1,sn(n,i,u,d),i.child)}function y_(n,i,a,u,d){if(n===null){var f=a.type;return typeof f=="function"&&!qd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,__(n,i,f,u,d)):(n=gc(a.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(f=n.child,!jf(n,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(_,u)&&n.ref===i.ref)return cs(n,i,d)}return i.flags|=1,n=ss(f,u),n.ref=i.ref,n.return=i,i.child=n}function __(n,i,a,u,d){if(n!==null){var f=n.memoizedProps;if(pl(f,u)&&n.ref===i.ref)if(Lt=!1,i.pendingProps=u=f,jf(n,d))(n.flags&131072)!==0&&(Lt=!0);else return i.lanes=n.lanes,cs(n,i,d)}return Nf(n,i,a,u,d)}function v_(n,i,a,u){var d=u.children,f=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,n!==null){for(u=i.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~f}else u=0,i.child=null;return b_(n,i,f,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&vc(i,f!==null?f.cachePool:null),f!==null?Ey(i,f):of(),Ty(i);else return u=i.lanes=536870912,b_(n,i,f!==null?f.baseLanes|a:a,a,u)}else f!==null?(vc(i,f.cachePool),Ey(i,f),Qs(),i.memoizedState=null):(n!==null&&vc(i,null),of(),Qs());return sn(n,i,d,a),i.child}function Nl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function b_(n,i,a,u,d){var f=ef();return f=f===null?null:{parent:Ut._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&vc(i,null),of(),Ty(i),n!==null&&$a(n,i,u,!0),i.childLanes=d,null}function Mc(n,i){return i=Uc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function w_(n,i,a){return na(i,n.child,null,a),n=Mc(i,i.pendingProps),n.flags|=2,Un(i),i.memoizedState=null,n}function MS(n,i,a){var u=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Fe){if(u.mode==="hidden")return n=Mc(i,u),i.lanes=536870912,Nl(null,n);if(uf(i),(n=pt)?(n=Dv(n,er),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:zs!==null?{id:qr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},a=sy(n),a.return=i,i.child=a,nn=i,pt=null)):n=null,n===null)throw qs(i);return i.lanes=536870912,null}return Mc(i,u)}var f=n.memoizedState;if(f!==null){var _=f.dehydrated;if(uf(i),d)if(i.flags&256)i.flags&=-257,i=w_(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Lt||$a(n,i,a,!1),d=(a&n.childLanes)!==0,Lt||d){if(u=ft,u!==null&&(_=Wo(u,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Qi(n,_),On(u,n,_),xf;Gc(),i=w_(n,i,a)}else n=f.treeContext,pt=nr(_.nextSibling),nn=i,Fe=!0,Bs=null,er=!1,n!==null&&oy(i,n),i=Mc(i,u),i.flags|=4096;return i}return n=ss(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Vc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Nf(n,i,a,u,d){return Wi(i),a=hf(n,i,a,u,void 0,d),u=df(),n!==null&&!Lt?(ff(n,i,d),cs(n,i,d)):(Fe&&u&&Fd(i),i.flags|=1,sn(n,i,a,d),i.child)}function E_(n,i,a,u,d,f){return Wi(i),i.updateQueue=null,a=Ay(i,u,a,d),Sy(n),u=df(),n!==null&&!Lt?(ff(n,i,f),cs(n,i,f)):(Fe&&u&&Fd(i),i.flags|=1,sn(n,i,a,f),i.child)}function T_(n,i,a,u,d){if(Wi(i),i.stateNode===null){var f=za,_=a.contextType;typeof _=="object"&&_!==null&&(f=rn(_)),f=new a(u,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=If,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=u,f.state=i.memoizedState,f.refs={},nf(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?rn(_):za,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Cf(i,a,_,u),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&If.enqueueReplaceState(f,f.state,null),Rl(i,u,f,d),Al(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){f=i.stateNode;var E=i.memoizedProps,N=sa(a,E);f.props=N;var G=f.context,J=a.contextType;_=za,typeof J=="object"&&J!==null&&(_=rn(J));var Z=a.getDerivedStateFromProps;J=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||G!==_)&&u_(i,f,u,_),$s=!1;var K=i.memoizedState;f.state=K,Rl(i,u,f,d),Al(),G=i.memoizedState,E||K!==G||$s?(typeof Z=="function"&&(Cf(i,a,Z,u),G=i.memoizedState),(N=$s||l_(i,a,N,u,K,G,_))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=G),f.props=u,f.state=G,f.context=_,u=N):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{f=i.stateNode,rf(n,i),_=i.memoizedProps,J=sa(a,_),f.props=J,Z=i.pendingProps,K=f.context,G=a.contextType,N=za,typeof G=="object"&&G!==null&&(N=rn(G)),E=a.getDerivedStateFromProps,(G=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==Z||K!==N)&&u_(i,f,u,N),$s=!1,K=i.memoizedState,f.state=K,Rl(i,u,f,d),Al();var Y=i.memoizedState;_!==Z||K!==Y||$s||n!==null&&n.dependencies!==null&&yc(n.dependencies)?(typeof E=="function"&&(Cf(i,a,E,u),Y=i.memoizedState),(J=$s||l_(i,a,J,u,K,Y,N)||n!==null&&n.dependencies!==null&&yc(n.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(u,Y,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(u,Y,N)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),f.props=u,f.state=Y,f.context=N,u=J):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),u=!1)}return f=u,Vc(n,i),u=(i.flags&128)!==0,f||u?(f=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,n!==null&&u?(i.child=na(i,n.child,null,d),i.child=na(i,null,a,d)):sn(n,i,a,d),i.memoizedState=f.state,n=i.child):n=cs(n,i,d),n}function S_(n,i,a,u){return Xi(),i.flags|=256,sn(n,i,a,u),i.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(n){return{baseLanes:n,cachePool:fy()}}function Pf(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Ln),n}function A_(n,i,a){var u=i.pendingProps,d=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Fe){if(d?Ks(i):Qs(),(n=pt)?(n=Dv(n,er),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:zs!==null?{id:qr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},a=sy(n),a.return=i,i.child=a,nn=i,pt=null)):n=null,n===null)throw qs(i);return pm(n)?i.lanes=32:i.lanes=536870912,null}var E=u.children;return u=u.fallback,d?(Qs(),d=i.mode,E=Uc({mode:"hidden",children:E},d),u=Yi(u,d,a,null),E.return=i,u.return=i,E.sibling=u,i.child=E,u=i.child,u.memoizedState=Df(a),u.childLanes=Pf(n,_,a),i.memoizedState=kf,Nl(null,u)):(Ks(i),Mf(i,E))}var N=n.memoizedState;if(N!==null&&(E=N.dehydrated,E!==null)){if(f)i.flags&256?(Ks(i),i.flags&=-257,i=Vf(n,i,a)):i.memoizedState!==null?(Qs(),i.child=n.child,i.flags|=128,i=null):(Qs(),E=u.fallback,d=i.mode,u=Uc({mode:"visible",children:u.children},d),E=Yi(E,d,a,null),E.flags|=2,u.return=i,E.return=i,u.sibling=E,i.child=u,na(i,n.child,null,a),u=i.child,u.memoizedState=Df(a),u.childLanes=Pf(n,_,a),i.memoizedState=kf,i=Nl(null,u));else if(Ks(i),pm(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(s(419)),u.stack="",u.digest=_,vl({value:u,source:null,stack:null}),i=Vf(n,i,a)}else if(Lt||$a(n,i,a,!1),_=(a&n.childLanes)!==0,Lt||_){if(_=ft,_!==null&&(u=Wo(_,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Qi(n,u),On(_,n,u),xf;gm(E)||Gc(),i=Vf(n,i,a)}else gm(E)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,pt=nr(E.nextSibling),nn=i,Fe=!0,Bs=null,er=!1,n!==null&&oy(i,n),i=Mf(i,u.children),i.flags|=4096);return i}return d?(Qs(),E=u.fallback,d=i.mode,N=n.child,G=N.sibling,u=ss(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,G!==null?E=ss(G,E):(E=Yi(E,d,a,null),E.flags|=2),E.return=i,u.return=i,u.sibling=E,i.child=u,Nl(null,u),u=i.child,E=n.child.memoizedState,E===null?E=Df(a):(d=E.cachePool,d!==null?(N=Ut._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=fy(),E={baseLanes:E.baseLanes|a,cachePool:d}),u.memoizedState=E,u.childLanes=Pf(n,_,a),i.memoizedState=kf,Nl(n.child,u)):(Ks(i),a=n.child,n=a.sibling,a=ss(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Mf(n,i){return i=Uc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Uc(n,i){return n=Mn(22,n,null,i),n.lanes=0,n}function Vf(n,i,a){return na(i,n.child,null,a),n=Mf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function R_(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Xd(n.return,i,a)}function Uf(n,i,a,u,d,f){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=a,_.tailMode=d,_.treeForkCount=f)}function C_(n,i,a){var u=i.pendingProps,d=u.revealOrder,f=u.tail;u=u.children;var _=Ot.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,ie(Ot,_),sn(n,i,u,a),u=Fe?_l:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&R_(n,a,i);else if(n.tag===19)R_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Ac(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Uf(i,!1,d,a,f,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Ac(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Uf(i,!0,a,null,f,u);break;case"together":Uf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function cs(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Js|=i.lanes,(a&i.childLanes)===0)if(n!==null){if($a(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=ss(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ss(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function jf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&yc(n)))}function VS(n,i,a){switch(i.tag){case 3:ht(i,i.stateNode.containerInfo),Hs(i,Ut,n.memoizedState.cache),Xi();break;case 27:case 5:kt(i);break;case 4:ht(i,i.stateNode.containerInfo);break;case 10:Hs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,uf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ks(i),i.flags|=128,null):(a&i.child.childLanes)!==0?A_(n,i,a):(Ks(i),n=cs(n,i,a),n!==null?n.sibling:null);Ks(i);break;case 19:var d=(n.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||($a(n,i,a,!1),u=(a&i.childLanes)!==0),d){if(u)return C_(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ie(Ot,Ot.current),u)break;return null;case 22:return i.lanes=0,v_(n,i,a,i.pendingProps);case 24:Hs(i,Ut,n.memoizedState.cache)}return cs(n,i,a)}function I_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Lt=!0;else{if(!jf(n,a)&&(i.flags&128)===0)return Lt=!1,VS(n,i,a);Lt=(n.flags&131072)!==0}else Lt=!1,Fe&&(i.flags&1048576)!==0&&ay(i,_l,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=ea(i.elementType),i.type=n,typeof n=="function")qd(n)?(u=sa(n,u),i.tag=1,i=T_(null,i,n,u,a)):(i.tag=0,i=Nf(null,i,n,u,a));else{if(n!=null){var d=n.$$typeof;if(d===se){i.tag=11,i=p_(null,i,n,u,a);break e}else if(d===C){i.tag=14,i=y_(null,i,n,u,a);break e}}throw i=Ae(n)||n,Error(s(306,i,""))}}return i;case 0:return Nf(n,i,i.type,i.pendingProps,a);case 1:return u=i.type,d=sa(u,i.pendingProps),T_(n,i,u,d,a);case 3:e:{if(ht(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var f=i.memoizedState;d=f.element,rf(n,i),Rl(i,u,null,a);var _=i.memoizedState;if(u=_.cache,Hs(i,Ut,u),u!==f.cache&&Jd(i,[Ut],a,!0),Al(),u=_.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=S_(n,i,u,a);break e}else if(u!==d){d=Jn(Error(s(424)),i),vl(d),i=S_(n,i,u,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,pt=nr(n.firstChild),nn=i,Fe=!0,Bs=null,er=!0,a=vy(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xi(),u===d){i=cs(n,i,a);break e}sn(n,i,u,a)}i=i.child}return i;case 26:return Vc(n,i),n===null?(a=Lv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Fe||(a=i.type,n=i.pendingProps,u=Zc(Ee.current).createElement(a),u[Pt]=i,u[Xt]=n,an(u,a,n),Mt(u),i.stateNode=u):i.memoizedState=Lv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return kt(i),n===null&&Fe&&(u=i.stateNode=Vv(i.type,i.pendingProps,Ee.current),nn=i,er=!0,d=pt,ni(i.type)?(ym=d,pt=nr(u.firstChild)):pt=d),sn(n,i,i.pendingProps.children,a),Vc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Fe&&((d=u=pt)&&(u=dA(u,i.type,i.pendingProps,er),u!==null?(i.stateNode=u,nn=i,pt=nr(u.firstChild),er=!1,d=!0):d=!1),d||qs(i)),kt(i),d=i.type,f=i.pendingProps,_=n!==null?n.memoizedProps:null,u=f.children,dm(d,f)?u=null:_!==null&&dm(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=hf(n,i,CS,null,null,a),Gl._currentValue=d),Vc(n,i),sn(n,i,u,a),i.child;case 6:return n===null&&Fe&&((n=a=pt)&&(a=fA(a,i.pendingProps,er),a!==null?(i.stateNode=a,nn=i,pt=null,n=!0):n=!1),n||qs(i)),null;case 13:return A_(n,i,a);case 4:return ht(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=na(i,null,u,a):sn(n,i,u,a),i.child;case 11:return p_(n,i,i.type,i.pendingProps,a);case 7:return sn(n,i,i.pendingProps,a),i.child;case 8:return sn(n,i,i.pendingProps.children,a),i.child;case 12:return sn(n,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,Hs(i,i.type,u.value),sn(n,i,u.children,a),i.child;case 9:return d=i.type._context,u=i.pendingProps.children,Wi(i),d=rn(d),u=u(d),i.flags|=1,sn(n,i,u,a),i.child;case 14:return y_(n,i,i.type,i.pendingProps,a);case 15:return __(n,i,i.type,i.pendingProps,a);case 19:return C_(n,i,a);case 31:return MS(n,i,a);case 22:return v_(n,i,a,i.pendingProps);case 24:return Wi(i),u=rn(Ut),n===null?(d=ef(),d===null&&(d=ft,f=Wd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),i.memoizedState={parent:u,cache:d},nf(i),Hs(i,Ut,d)):((n.lanes&a)!==0&&(rf(n,i),Rl(i,null,null,a),Al()),d=n.memoizedState,f=i.memoizedState,d.parent!==u?(d={parent:u,cache:u},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Hs(i,Ut,u)):(u=f.cache,Hs(i,Ut,u),u!==d.cache&&Jd(i,[Ut],a,!0))),sn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function hs(n){n.flags|=4}function Lf(n,i,a,u,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(tv())n.flags|=8192;else throw ta=wc,tf}else n.flags&=-16777217}function O_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$v(i))if(tv())n.flags|=8192;else throw ta=wc,tf}function jc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?$u():536870912,n.lanes|=i,no|=i)}function kl(n,i){if(!Fe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function yt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function US(n,i,a){var u=i.pendingProps;switch(Gd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(i),null;case 1:return yt(i),null;case 3:return a=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),os(Ut),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ha(i)?hs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qd())),yt(i),null;case 26:var d=i.type,f=i.memoizedState;return n===null?(hs(i),f!==null?(yt(i),O_(i,f)):(yt(i),Lf(i,d,null,u,a))):f?f!==n.memoizedState?(hs(i),yt(i),O_(i,f)):(yt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&hs(i),yt(i),Lf(i,d,n,u,a)),null;case 27:if(_n(i),a=Ee.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return yt(i),null}n=re.current,Ha(i)?ly(i):(n=Vv(d,u,a),i.stateNode=n,hs(i))}return yt(i),null;case 5:if(_n(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return yt(i),null}if(f=re.current,Ha(i))ly(i);else{var _=Zc(Ee.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?f.multiple=!0:u.size&&(f.size=u.size);break;default:f=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}f[Pt]=i,f[Xt]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(an(f,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hs(i)}}return yt(i),Lf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&hs(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ee.current,Ha(i)){if(n=i.stateNode,a=i.memoizedProps,u=null,d=nn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Pt]=i,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Av(n.nodeValue,a)),n||qs(i,!0)}else n=Zc(n).createTextNode(u),n[Pt]=i,i.stateNode=n}return yt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(u=Ha(i),a!==null){if(n===null){if(!u)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Pt]=i}else Xi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),n=!1}else a=Qd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Un(i),i):(Un(i),null);if((i.flags&128)!==0)throw Error(s(558))}return yt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ha(i),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Pt]=i}else Xi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),d=!1}else d=Qd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Un(i),i):(Un(i),null)}return Un(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=i.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),f=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),f!==d&&(u.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),jc(i,i.updateQueue),yt(i),null);case 4:return Xe(),n===null&&om(i.stateNode.containerInfo),yt(i),null;case 10:return os(i.type),yt(i),null;case 19:if($(Ot),u=i.memoizedState,u===null)return yt(i),null;if(d=(i.flags&128)!==0,f=u.rendering,f===null)if(d)kl(u,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(f=Ac(n),f!==null){for(i.flags|=128,kl(u,!1),n=f.updateQueue,i.updateQueue=n,jc(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)ry(a,n),a=a.sibling;return ie(Ot,Ot.current&1|2),Fe&&is(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&vn()>Hc&&(i.flags|=128,d=!0,kl(u,!1),i.lanes=4194304)}else{if(!d)if(n=Ac(f),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,jc(i,n),kl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Fe)return yt(i),null}else 2*vn()-u.renderingStartTime>Hc&&a!==536870912&&(i.flags|=128,d=!0,kl(u,!1),i.lanes=4194304);u.isBackwards?(f.sibling=i.child,i.child=f):(n=u.last,n!==null?n.sibling=f:i.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=vn(),n.sibling=null,a=Ot.current,ie(Ot,d?a&1|2:a&1),Fe&&is(i,u.treeForkCount),n):(yt(i),null);case 22:case 23:return Un(i),lf(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(yt(i),i.subtreeFlags&6&&(i.flags|=8192)):yt(i),a=i.updateQueue,a!==null&&jc(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),n!==null&&$(Zi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),os(Ut),yt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function jS(n,i){switch(Gd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return os(Ut),Xe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return _n(i),null;case 31:if(i.memoizedState!==null){if(Un(i),i.alternate===null)throw Error(s(340));Xi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Un(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return $(Ot),null;case 4:return Xe(),null;case 10:return os(i.type),null;case 22:case 23:return Un(i),lf(),n!==null&&$(Zi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return os(Ut),null;case 25:return null;default:return null}}function x_(n,i){switch(Gd(i),i.tag){case 3:os(Ut),Xe();break;case 26:case 27:case 5:_n(i);break;case 4:Xe();break;case 31:i.memoizedState!==null&&Un(i);break;case 13:Un(i);break;case 19:$(Ot);break;case 10:os(i.type);break;case 22:case 23:Un(i),lf(),n!==null&&$(Zi);break;case 24:os(Ut)}}function Dl(n,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&n)===n){u=void 0;var f=a.create,_=a.inst;u=f(),_.destroy=u}a=a.next}while(a!==d)}}catch(E){it(i,i.return,E)}}function Ys(n,i,a){try{var u=i.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var f=d.next;u=f;do{if((u.tag&n)===n){var _=u.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,d=i;var N=a,G=E;try{G()}catch(J){it(d,N,J)}}}u=u.next}while(u!==f)}}catch(J){it(i,i.return,J)}}function N_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{wy(i,a)}catch(u){it(n,n.return,u)}}}function k_(n,i,a){a.props=sa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){it(n,i,u)}}function Pl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(d){it(n,i,d)}}function $r(n,i){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){it(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){it(n,i,d)}else a.current=null}function D_(n){var i=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){it(n,n.return,d)}}function zf(n,i,a){try{var u=n.stateNode;aA(u,n.type,a,i),u[Xt]=i}catch(d){it(n,n.return,d)}}function P_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ni(n.type)||n.tag===4}function Bf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||P_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ni(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qf(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ur));else if(u!==4&&(u===27&&ni(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(qf(n,i,a),n=n.sibling;n!==null;)qf(n,i,a),n=n.sibling}function Lc(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(u===27&&ni(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Lc(n,i,a),n=n.sibling;n!==null;)Lc(n,i,a),n=n.sibling}function M_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);an(i,u,a),i[Pt]=n,i[Xt]=a}catch(f){it(n,n.return,f)}}var ds=!1,zt=!1,Hf=!1,V_=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function LS(n,i){if(n=n.containerInfo,cm=ah,n=Qp(n),Md(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,E=-1,N=-1,G=0,J=0,Z=n,K=null;t:for(;;){for(var Y;Z!==a||d!==0&&Z.nodeType!==3||(E=_+d),Z!==f||u!==0&&Z.nodeType!==3||(N=_+u),Z.nodeType===3&&(_+=Z.nodeValue.length),(Y=Z.firstChild)!==null;)K=Z,Z=Y;for(;;){if(Z===n)break t;if(K===a&&++G===d&&(E=_),K===f&&++J===u&&(N=_),(Y=Z.nextSibling)!==null)break;Z=K,K=Z.parentNode}Z=Y}a=E===-1||N===-1?null:{start:E,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(hm={focusedElem:n,selectionRange:a},ah=!1,Wt=i;Wt!==null;)if(i=Wt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Wt=n;else for(;Wt!==null;){switch(i=Wt,f=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)d=n[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=i,d=f.memoizedProps,f=f.memoizedState,u=a.stateNode;try{var fe=sa(a.type,d);n=u.getSnapshotBeforeUpdate(fe,f),u.__reactInternalSnapshotBeforeUpdate=n}catch(ve){it(a,a.return,ve)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)mm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":mm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Wt=n;break}Wt=i.return}}function U_(n,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ms(n,a),u&4&&Dl(5,a);break;case 1:if(ms(n,a),u&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){it(a,a.return,_)}else{var d=sa(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){it(a,a.return,_)}}u&64&&N_(a),u&512&&Pl(a,a.return);break;case 3:if(ms(n,a),u&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{wy(n,i)}catch(_){it(a,a.return,_)}}break;case 27:i===null&&u&4&&M_(a);case 26:case 5:ms(n,a),i===null&&u&4&&D_(a),u&512&&Pl(a,a.return);break;case 12:ms(n,a);break;case 31:ms(n,a),u&4&&z_(n,a);break;case 13:ms(n,a),u&4&&B_(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=QS.bind(null,a),mA(n,a))));break;case 22:if(u=a.memoizedState!==null||ds,!u){i=i!==null&&i.memoizedState!==null||zt,d=ds;var f=zt;ds=u,(zt=i)&&!f?gs(n,a,(a.subtreeFlags&8772)!==0):ms(n,a),ds=d,zt=f}break;case 30:break;default:ms(n,a)}}function j_(n){var i=n.alternate;i!==null&&(n.alternate=null,j_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ra(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var bt=null,An=!1;function fs(n,i,a){for(a=a.child;a!==null;)L_(n,i,a),a=a.sibling}function L_(n,i,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(ir,a)}catch{}switch(a.tag){case 26:zt||$r(a,i),fs(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||$r(a,i);var u=bt,d=An;ni(a.type)&&(bt=a.stateNode,An=!1),fs(n,i,a),Hl(a.stateNode),bt=u,An=d;break;case 5:zt||$r(a,i);case 6:if(u=bt,d=An,bt=null,fs(n,i,a),bt=u,An=d,bt!==null)if(An)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(f){it(a,i,f)}else try{bt.removeChild(a.stateNode)}catch(f){it(a,i,f)}break;case 18:bt!==null&&(An?(n=bt,Nv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),co(n)):Nv(bt,a.stateNode));break;case 4:u=bt,d=An,bt=a.stateNode.containerInfo,An=!0,fs(n,i,a),bt=u,An=d;break;case 0:case 11:case 14:case 15:Ys(2,a,i),zt||Ys(4,a,i),fs(n,i,a);break;case 1:zt||($r(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&k_(a,i,u)),fs(n,i,a);break;case 21:fs(n,i,a);break;case 22:zt=(u=zt)||a.memoizedState!==null,fs(n,i,a),zt=u;break;default:fs(n,i,a)}}function z_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{co(n)}catch(a){it(i,i.return,a)}}}function B_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{co(n)}catch(a){it(i,i.return,a)}}function zS(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new V_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new V_),i;default:throw Error(s(435,n.tag))}}function zc(n,i){var a=zS(n);i.forEach(function(u){if(!a.has(u)){a.add(u);var d=YS.bind(null,n,u);u.then(d,d)}})}function Rn(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],f=n,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ni(E.type)){bt=E.stateNode,An=!1;break e}break;case 5:bt=E.stateNode,An=!1;break e;case 3:case 4:bt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(bt===null)throw Error(s(160));L_(f,_,d),bt=null,An=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)q_(i,n),i=i.sibling}var gr=null;function q_(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Rn(i,n),Cn(n),u&4&&(Ys(3,n,n.return),Dl(3,n),Ys(5,n,n.return));break;case 1:Rn(i,n),Cn(n),u&512&&(zt||a===null||$r(a,a.return)),u&64&&ds&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=gr;if(Rn(i,n),Cn(n),u&512&&(zt||a===null||$r(a,a.return)),u&4){var f=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":f=d.getElementsByTagName("title")[0],(!f||f[xr]||f[Pt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(u),d.head.insertBefore(f,d.querySelector("head > title"))),an(f,u,a),f[Pt]=n,Mt(f),u=f;break e;case"link":var _=qv("link","href",d).get(u+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}f=d.createElement(u),an(f,u,a),d.head.appendChild(f);break;case"meta":if(_=qv("meta","content",d).get(u+(a.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}f=d.createElement(u),an(f,u,a),d.head.appendChild(f);break;default:throw Error(s(468,u))}f[Pt]=n,Mt(f),u=f}n.stateNode=u}else Hv(d,n.type,n.stateNode);else n.stateNode=Bv(d,u,n.memoizedProps);else f!==u?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,u===null?Hv(d,n.type,n.stateNode):Bv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&zf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Rn(i,n),Cn(n),u&512&&(zt||a===null||$r(a,a.return)),a!==null&&u&4&&zf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Rn(i,n),Cn(n),u&512&&(zt||a===null||$r(a,a.return)),n.flags&32){d=n.stateNode;try{Sn(d,"")}catch(fe){it(n,n.return,fe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,zf(n,d,a!==null?a.memoizedProps:d)),u&1024&&(Hf=!0);break;case 6:if(Rn(i,n),Cn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(fe){it(n,n.return,fe)}}break;case 3:if(nh=null,d=gr,gr=eh(i.containerInfo),Rn(i,n),gr=d,Cn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{co(i.containerInfo)}catch(fe){it(n,n.return,fe)}Hf&&(Hf=!1,H_(n));break;case 4:u=gr,gr=eh(n.stateNode.containerInfo),Rn(i,n),Cn(n),gr=u;break;case 12:Rn(i,n),Cn(n);break;case 31:Rn(i,n),Cn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zc(n,u)));break;case 13:Rn(i,n),Cn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qc=vn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zc(n,u)));break;case 22:d=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,G=ds,J=zt;if(ds=G||d,zt=J||N,Rn(i,n),zt=J,ds=G,Cn(n),u&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||N||ds||zt||ia(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(f=N.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=N.stateNode;var Z=N.memoizedProps.style,K=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(fe){it(N,N.return,fe)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(fe){it(N,N.return,fe)}}}else if(i.tag===18){if(a===null){N=i;try{var Y=N.stateNode;d?kv(Y,!0):kv(N.stateNode,!1)}catch(fe){it(N,N.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,zc(n,a))));break;case 19:Rn(i,n),Cn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zc(n,u)));break;case 30:break;case 21:break;default:Rn(i,n),Cn(n)}}function Cn(n){var i=n.flags;if(i&2){try{for(var a,u=n.return;u!==null;){if(P_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=Bf(n);Lc(n,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(Sn(_,""),a.flags&=-33);var E=Bf(n);Lc(n,E,_);break;case 3:case 4:var N=a.stateNode.containerInfo,G=Bf(n);qf(n,G,N);break;default:throw Error(s(161))}}catch(J){it(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function H_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;H_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ms(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)U_(n,i.alternate,i),i=i.sibling}function ia(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ys(4,i,i.return),ia(i);break;case 1:$r(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&k_(i,i.return,a),ia(i);break;case 27:Hl(i.stateNode);case 26:case 5:$r(i,i.return),ia(i);break;case 22:i.memoizedState===null&&ia(i);break;case 30:ia(i);break;default:ia(i)}n=n.sibling}}function gs(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,d=n,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:gs(d,f,a),Dl(4,f);break;case 1:if(gs(d,f,a),u=f,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){it(u,u.return,G)}if(u=f,d=u.updateQueue,d!==null){var E=u.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)by(N[d],E)}catch(G){it(u,u.return,G)}}a&&_&64&&N_(f),Pl(f,f.return);break;case 27:M_(f);case 26:case 5:gs(d,f,a),a&&u===null&&_&4&&D_(f),Pl(f,f.return);break;case 12:gs(d,f,a);break;case 31:gs(d,f,a),a&&_&4&&z_(d,f);break;case 13:gs(d,f,a),a&&_&4&&B_(d,f);break;case 22:f.memoizedState===null&&gs(d,f,a),Pl(f,f.return);break;case 30:break;default:gs(d,f,a)}i=i.sibling}}function $f(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&bl(a))}function Ff(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&bl(n))}function pr(n,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$_(n,i,a,u),i=i.sibling}function $_(n,i,a,u){var d=i.flags;switch(i.tag){case 0:case 11:case 15:pr(n,i,a,u),d&2048&&Dl(9,i);break;case 1:pr(n,i,a,u);break;case 3:pr(n,i,a,u),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&bl(n)));break;case 12:if(d&2048){pr(n,i,a,u),n=i.stateNode;try{var f=i.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){it(i,i.return,N)}}else pr(n,i,a,u);break;case 31:pr(n,i,a,u);break;case 13:pr(n,i,a,u);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?pr(n,i,a,u):Ml(n,i):f._visibility&2?pr(n,i,a,u):(f._visibility|=2,Za(n,i,a,u,(i.subtreeFlags&10256)!==0||!1)),d&2048&&$f(_,i);break;case 24:pr(n,i,a,u),d&2048&&Ff(i.alternate,i);break;default:pr(n,i,a,u)}}function Za(n,i,a,u,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=n,_=i,E=a,N=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:Za(f,_,E,N,d),Dl(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?Za(f,_,E,N,d):Ml(f,_):(J._visibility|=2,Za(f,_,E,N,d)),d&&G&2048&&$f(_.alternate,_);break;case 24:Za(f,_,E,N,d),d&&G&2048&&Ff(_.alternate,_);break;default:Za(f,_,E,N,d)}i=i.sibling}}function Ml(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,u=i,d=u.flags;switch(u.tag){case 22:Ml(a,u),d&2048&&$f(u.alternate,u);break;case 24:Ml(a,u),d&2048&&Ff(u.alternate,u);break;default:Ml(a,u)}i=i.sibling}}var Vl=8192;function eo(n,i,a){if(n.subtreeFlags&Vl)for(n=n.child;n!==null;)F_(n,i,a),n=n.sibling}function F_(n,i,a){switch(n.tag){case 26:eo(n,i,a),n.flags&Vl&&n.memoizedState!==null&&RA(a,gr,n.memoizedState,n.memoizedProps);break;case 5:eo(n,i,a);break;case 3:case 4:var u=gr;gr=eh(n.stateNode.containerInfo),eo(n,i,a),gr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,eo(n,i,a),Vl=u):eo(n,i,a));break;default:eo(n,i,a)}}function G_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ul(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Wt=u,Q_(u,n)}G_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)K_(n),n=n.sibling}function K_(n){switch(n.tag){case 0:case 11:case 15:Ul(n),n.flags&2048&&Ys(9,n,n.return);break;case 3:Ul(n);break;case 12:Ul(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Bc(n)):Ul(n);break;default:Ul(n)}}function Bc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Wt=u,Q_(u,n)}G_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ys(8,i,i.return),Bc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Bc(i));break;default:Bc(i)}n=n.sibling}}function Q_(n,i){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:Ys(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Wt=u;else e:for(a=n;Wt!==null;){u=Wt;var d=u.sibling,f=u.return;if(j_(u),u===a){Wt=null;break e}if(d!==null){d.return=f,Wt=d;break e}Wt=f}}}var BS={getCacheForType:function(n){var i=rn(Ut),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return rn(Ut).controller.signal}},qS=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,Ue=null,ze=0,st=0,jn=null,Xs=!1,to=!1,Gf=!1,ps=0,At=0,Js=0,aa=0,Kf=0,Ln=0,no=0,jl=null,In=null,Qf=!1,qc=0,Y_=0,Hc=1/0,$c=null,Ws=null,Ft=0,Zs=null,ro=null,ys=0,Yf=0,Xf=null,X_=null,Ll=0,Jf=null;function zn(){return(et&2)!==0&&ze!==0?ze&-ze:X.T!==null?rm():Fu()}function J_(){if(Ln===0)if((ze&536870912)===0||Fe){var n=Di;Di<<=1,(Di&3932160)===0&&(Di=262144),Ln=n}else Ln=536870912;return n=Vn.current,n!==null&&(n.flags|=32),Ln}function On(n,i,a){(n===ft&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(so(n,0),ei(n,ze,Ln,!1)),Pi(n,a),((et&2)===0||n!==ft)&&(n===ft&&((et&2)===0&&(aa|=a),At===4&&ei(n,ze,Ln,!1)),Fr(n))}function W_(n,i,a){if((et&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&n.expiredLanes)===0||ar(n,i),d=u?FS(n,i):Zf(n,i,!0),f=u;do{if(d===0){to&&!u&&ei(n,i,0,!1);break}else{if(a=n.current.alternate,f&&!HS(a)){d=Zf(n,i,!1),f=!1;continue}if(d===2){if(f=i,n.errorRecoveryDisabledLanes&f)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=n;d=jl;var N=E.current.memoizedState.isDehydrated;if(N&&(so(E,_).flags|=256),_=Zf(E,_,!1),_!==2){if(Gf&&!N){E.errorRecoveryDisabledLanes|=f,aa|=f,d=4;break e}f=In,In=d,f!==null&&(In===null?In=f:In.push.apply(In,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){so(n,0),ei(n,i,0,!0);break}e:{switch(u=n,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ei(u,i,Ln,!Xs);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=qc+300-vn(),10<d)){if(ei(u,i,Ln,!Xs),Cr(u,0,!0)!==0)break e;ys=i,u.timeoutHandle=Ov(Z_.bind(null,u,a,In,$c,Qf,i,Ln,aa,no,Xs,f,"Throttled",-0,0),d);break e}Z_(u,a,In,$c,Qf,i,Ln,aa,no,Xs,f,null,-0,0)}}break}while(!0);Fr(n)}function Z_(n,i,a,u,d,f,_,E,N,G,J,Z,K,Y){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},F_(i,f,Z);var fe=(f&62914560)===f?qc-vn():(f&4194048)===f?Y_-vn():0;if(fe=CA(Z,fe),fe!==null){ys=f,n.cancelPendingCommit=fe(ov.bind(null,n,i,f,a,u,d,_,E,N,J,Z,null,K,Y)),ei(n,f,_,!G);return}}ov(n,i,f,a,u,d,_,E,N)}function HS(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],f=d.getSnapshot;d=d.value;try{if(!Pn(f(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ei(n,i,a,u){i&=~Kf,i&=~aa,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var d=i;0<d;){var f=31-Ct(d),_=1<<f;u[f]=-1,d&=~_}a!==0&&Mi(n,a,i)}function Fc(){return(et&6)===0?(zl(0),!1):!0}function Wf(){if(Ue!==null){if(st===0)var n=Ue.return;else n=Ue,as=Ji=null,mf(n),Qa=null,El=0,n=Ue;for(;n!==null;)x_(n.alternate,n),n=n.return;Ue=null}}function so(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,uA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ys=0,Wf(),ft=n,Ue=a=ss(n.current,null),ze=i,st=0,jn=null,Xs=!1,to=ar(n,i),Gf=!1,no=Ln=Kf=aa=Js=At=0,In=jl=null,Qf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var d=31-Ct(u),f=1<<d;i|=n[d],u&=~f}return ps=i,dc(),a}function ev(n,i){ke=null,X.H=xl,i===Ka||i===bc?(i=py(),st=3):i===tf?(i=py(),st=4):st=i===xf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,jn=i,Ue===null&&(At=1,Pc(n,Jn(i,n.current)))}function tv(){var n=Vn.current;return n===null?!0:(ze&4194048)===ze?tr===null:(ze&62914560)===ze||(ze&536870912)!==0?n===tr:!1}function nv(){var n=X.H;return X.H=xl,n===null?xl:n}function rv(){var n=X.A;return X.A=BS,n}function Gc(){At=4,Xs||(ze&4194048)!==ze&&Vn.current!==null||(to=!0),(Js&134217727)===0&&(aa&134217727)===0||ft===null||ei(ft,ze,Ln,!1)}function Zf(n,i,a){var u=et;et|=2;var d=nv(),f=rv();(ft!==n||ze!==i)&&($c=null,so(n,i)),i=!1;var _=At;e:do try{if(st!==0&&Ue!==null){var E=Ue,N=jn;switch(st){case 8:Wf(),_=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(i=!0);var G=st;if(st=0,jn=null,io(n,E,N,G),a&&to){_=0;break e}break;default:G=st,st=0,jn=null,io(n,E,N,G)}}$S(),_=At;break}catch(J){ev(n,J)}while(!0);return i&&n.shellSuspendCounter++,as=Ji=null,et=u,X.H=d,X.A=f,Ue===null&&(ft=null,ze=0,dc()),_}function $S(){for(;Ue!==null;)sv(Ue)}function FS(n,i){var a=et;et|=2;var u=nv(),d=rv();ft!==n||ze!==i?($c=null,Hc=vn()+500,so(n,i)):to=ar(n,i);e:do try{if(st!==0&&Ue!==null){i=Ue;var f=jn;t:switch(st){case 1:st=0,jn=null,io(n,i,f,1);break;case 2:case 9:if(my(f)){st=0,jn=null,iv(i);break}i=function(){st!==2&&st!==9||ft!==n||(st=7),Fr(n)},f.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:my(f)?(st=0,jn=null,iv(i)):(st=0,jn=null,io(n,i,f,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var E=Ue;if(_?$v(_):E.stateNode.complete){st=0,jn=null;var N=E.sibling;if(N!==null)Ue=N;else{var G=E.return;G!==null?(Ue=G,Kc(G)):Ue=null}break t}}st=0,jn=null,io(n,i,f,5);break;case 6:st=0,jn=null,io(n,i,f,6);break;case 8:Wf(),At=6;break e;default:throw Error(s(462))}}GS();break}catch(J){ev(n,J)}while(!0);return as=Ji=null,X.H=u,X.A=d,et=a,Ue!==null?0:(ft=null,ze=0,dc(),At)}function GS(){for(;Ue!==null&&!Id();)sv(Ue)}function sv(n){var i=I_(n.alternate,n,ps);n.memoizedProps=n.pendingProps,i===null?Kc(n):Ue=i}function iv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=E_(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=E_(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:mf(i);default:x_(a,i),i=Ue=ry(i,ps),i=I_(a,i,ps)}n.memoizedProps=n.pendingProps,i===null?Kc(n):Ue=i}function io(n,i,a,u){as=Ji=null,mf(i),Qa=null,El=0;var d=i.return;try{if(PS(n,d,i,a,ze)){At=1,Pc(n,Jn(a,n.current)),Ue=null;return}}catch(f){if(d!==null)throw Ue=d,f;At=1,Pc(n,Jn(a,n.current)),Ue=null;return}i.flags&32768?(Fe||u===1?n=!0:to||(ze&536870912)!==0?n=!1:(Xs=n=!0,(u===2||u===9||u===3||u===6)&&(u=Vn.current,u!==null&&u.tag===13&&(u.flags|=16384))),av(i,n)):Kc(i)}function Kc(n){var i=n;do{if((i.flags&32768)!==0){av(i,Xs);return}n=i.return;var a=US(i.alternate,i,ps);if(a!==null){Ue=a;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);At===0&&(At=5)}function av(n,i){do{var a=jS(n.alternate,n);if(a!==null){a.flags&=32767,Ue=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=a}while(n!==null);At=6,Ue=null}function ov(n,i,a,u,d,f,_,E,N){n.cancelPendingCommit=null;do Qc();while(Ft!==0);if((et&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=zd,Nd(n,a,f,_,E,N),n===ft&&(Ue=ft=null,ze=0),ro=i,Zs=n,ys=a,Yf=f,Xf=d,X_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XS(xs,function(){return dv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=oe.p,oe.p=2,_=et,et|=4;try{LS(n,i,a)}finally{et=_,oe.p=d,X.T=u}}Ft=1,lv(),uv(),cv()}}function lv(){if(Ft===1){Ft=0;var n=Zs,i=ro,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var u=oe.p;oe.p=2;var d=et;et|=4;try{q_(i,n);var f=hm,_=Qp(n.containerInfo),E=f.focusedElem,N=f.selectionRange;if(_!==E&&E&&E.ownerDocument&&Kp(E.ownerDocument.documentElement,E)){if(N!==null&&Md(E)){var G=N.start,J=N.end;if(J===void 0&&(J=G),"selectionStart"in E)E.selectionStart=G,E.selectionEnd=Math.min(J,E.value.length);else{var Z=E.ownerDocument||document,K=Z&&Z.defaultView||window;if(K.getSelection){var Y=K.getSelection(),fe=E.textContent.length,ve=Math.min(N.start,fe),ct=N.end===void 0?ve:Math.min(N.end,fe);!Y.extend&&ve>ct&&(_=ct,ct=ve,ve=_);var j=Gp(E,ve),M=Gp(E,ct);if(j&&M&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var F=Z.createRange();F.setStart(j.node,j.offset),Y.removeAllRanges(),ve>ct?(Y.addRange(F),Y.extend(M.node,M.offset)):(F.setEnd(M.node,M.offset),Y.addRange(F))}}}}for(Z=[],Y=E;Y=Y.parentNode;)Y.nodeType===1&&Z.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var W=Z[E];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}ah=!!cm,hm=cm=null}finally{et=d,oe.p=u,X.T=a}}n.current=i,Ft=2}}function uv(){if(Ft===2){Ft=0;var n=Zs,i=ro,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var u=oe.p;oe.p=2;var d=et;et|=4;try{U_(n,i.alternate,i)}finally{et=d,oe.p=u,X.T=a}}Ft=3}}function cv(){if(Ft===4||Ft===3){Ft=0,ju();var n=Zs,i=ro,a=ys,u=X_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ft=5:(Ft=0,ro=Zs=null,hv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Ws=null),es(a),i=i.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(ir,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=X.T,d=oe.p,oe.p=2,X.T=null;try{for(var f=n.onRecoverableError,_=0;_<u.length;_++){var E=u[_];f(E.value,{componentStack:E.stack})}}finally{X.T=i,oe.p=d}}(ys&3)!==0&&Qc(),Fr(n),d=n.pendingLanes,(a&261930)!==0&&(d&42)!==0?n===Jf?Ll++:(Ll=0,Jf=n):Ll=0,zl(0)}}function hv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,bl(i)))}function Qc(){return lv(),uv(),cv(),dv()}function dv(){if(Ft!==5)return!1;var n=Zs,i=Yf;Yf=0;var a=es(ys),u=X.T,d=oe.p;try{oe.p=32>a?32:a,X.T=null,a=Xf,Xf=null;var f=Zs,_=ys;if(Ft=0,ro=Zs=null,ys=0,(et&6)!==0)throw Error(s(331));var E=et;if(et|=4,K_(f.current),$_(f,f.current,_,a),et=E,zl(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(ir,f)}catch{}return!0}finally{oe.p=d,X.T=u,hv(n,i)}}function fv(n,i,a){i=Jn(a,i),i=Of(n.stateNode,i,2),n=Gs(n,i,2),n!==null&&(Pi(n,2),Fr(n))}function it(n,i,a){if(n.tag===3)fv(n,n,a);else for(;i!==null;){if(i.tag===3){fv(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ws===null||!Ws.has(u))){n=Jn(a,n),a=m_(2),u=Gs(i,a,2),u!==null&&(g_(a,u,i,n),Pi(u,2),Fr(u));break}}i=i.return}}function em(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new qS;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(a)||(Gf=!0,d.add(a),n=KS.bind(null,n,i,a),i.then(n,n))}function KS(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ft===n&&(ze&a)===a&&(At===4||At===3&&(ze&62914560)===ze&&300>vn()-qc?(et&2)===0&&so(n,0):Kf|=a,no===ze&&(no=0)),Fr(n)}function mv(n,i){i===0&&(i=$u()),n=Qi(n,i),n!==null&&(Pi(n,i),Fr(n))}function QS(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),mv(n,a)}function YS(n,i){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),mv(n,a)}function XS(n,i){return nt(n,i)}var Yc=null,ao=null,tm=!1,Xc=!1,nm=!1,ti=0;function Fr(n){n!==ao&&n.next===null&&(ao===null?Yc=ao=n:ao=ao.next=n),Xc=!0,tm||(tm=!0,WS())}function zl(n,i){if(!nm&&Xc){nm=!0;do for(var a=!1,u=Yc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var f=0;else{var _=u.suspendedLanes,E=u.pingedLanes;f=(1<<31-Ct(42|n)+1)-1,f&=d&~(_&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,_v(u,f))}else f=ze,f=Cr(u,u===ft?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(f&3)===0||ar(u,f)||(a=!0,_v(u,f));u=u.next}while(a);nm=!1}}function JS(){gv()}function gv(){Xc=tm=!1;var n=0;ti!==0&&lA()&&(n=ti);for(var i=vn(),a=null,u=Yc;u!==null;){var d=u.next,f=pv(u,i);f===0?(u.next=null,a===null?Yc=d:a.next=d,d===null&&(ao=a)):(a=u,(n!==0||(f&3)!==0)&&(Xc=!0)),u=d}Ft!==0&&Ft!==5||zl(n),ti!==0&&(ti=0)}function pv(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var _=31-Ct(f),E=1<<_,N=d[_];N===-1?((E&a)===0||(E&u)!==0)&&(d[_]=xd(E,i)):N<=i&&(n.expiredLanes|=E),f&=~E}if(i=ft,a=ze,a=Cr(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===i&&(st===2||st===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Sr(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ar(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(u!==null&&Sr(u),es(a)){case 2:case 8:a=Xo;break;case 32:a=xs;break;case 268435456:a=Lu;break;default:a=xs}return u=yv.bind(null,n),a=nt(a,u),n.callbackPriority=i,n.callbackNode=a,i}return u!==null&&u!==null&&Sr(u),n.callbackPriority=2,n.callbackNode=null,2}function yv(n,i){if(Ft!==0&&Ft!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Qc()&&n.callbackNode!==a)return null;var u=ze;return u=Cr(n,n===ft?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(W_(n,u,i),pv(n,vn()),n.callbackNode!=null&&n.callbackNode===a?yv.bind(null,n):null)}function _v(n,i){if(Qc())return null;W_(n,i,!0)}function WS(){cA(function(){(et&6)!==0?nt(Yo,JS):gv()})}function rm(){if(ti===0){var n=Fa;n===0&&(n=Ar,Ar<<=1,(Ar&261888)===0&&(Ar=256)),ti=n}return ti}function vv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xa(""+n)}function bv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function ZS(n,i,a,u,d){if(i==="submit"&&a&&a.stateNode===d){var f=vv((d[Xt]||null).action),_=u.submitter;_&&(i=(i=_[Xt]||null)?vv(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var E=new jr("action","action",null,u,d);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ti!==0){var N=_?bv(d,_):new FormData(d);Tf(a,{pending:!0,data:N,method:d.method,action:f},null,N)}}else typeof f=="function"&&(E.preventDefault(),N=_?bv(d,_):new FormData(d),Tf(a,{pending:!0,data:N,method:d.method,action:f},f,N))},currentTarget:d}]})}}for(var sm=0;sm<Ld.length;sm++){var im=Ld[sm],eA=im.toLowerCase(),tA=im[0].toUpperCase()+im.slice(1);mr(eA,"on"+tA)}mr(Jp,"onAnimationEnd"),mr(Wp,"onAnimationIteration"),mr(Zp,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(yS,"onTransitionRun"),mr(_S,"onTransitionStart"),mr(vS,"onTransitionCancel"),mr(ey,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function wv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var f=void 0;if(i)for(var _=u.length-1;0<=_;_--){var E=u[_],N=E.instance,G=E.currentTarget;if(E=E.listener,N!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=G;try{f(d)}catch(J){hc(J)}d.currentTarget=null,f=N}else for(_=0;_<u.length;_++){if(E=u[_],N=E.instance,G=E.currentTarget,E=E.listener,N!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=G;try{f(d)}catch(J){hc(J)}d.currentTarget=null,f=N}}}}function je(n,i){var a=i[Aa];a===void 0&&(a=i[Aa]=new Set);var u=n+"__bubble";a.has(u)||(Ev(i,n,2,!1),a.add(u))}function am(n,i,a){var u=0;i&&(u|=4),Ev(a,n,u,i)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function om(n){if(!n[Jc]){n[Jc]=!0,Zo.forEach(function(a){a!=="selectionchange"&&(nA.has(a)||am(a,!1,n),am(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jc]||(i[Jc]=!0,am("selectionchange",!1,i))}}function Ev(n,i,a,u){switch(Jv(i)){case 2:var d=xA;break;case 8:d=NA;break;default:d=Em}a=d.bind(null,i,a,n),d=void 0,!zi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function lm(n,i,a,u,d){var f=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var E=u.stateNode.containerInfo;if(E===d)break;if(_===4)for(_=u.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;E!==null;){if(_=Nr(E),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){u=f=_;continue e}E=E.parentNode}}u=u.return}Vs(function(){var G=f,J=Kn(a),Z=[];e:{var K=ty.get(n);if(K!==void 0){var Y=jr,fe=n;switch(n){case"keypress":if(qi(a)===0)break e;case"keydown":case"keyup":Y=lc;break;case"focusin":fe="focus",Y=$i;break;case"focusout":fe="blur",Y=$i;break;case"beforeblur":case"afterblur":Y=$i;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Jp:case Wp:case Zp:Y=tc;break;case ey:Y=S;break;case"scroll":case"scrollend":Y=hl;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=rs;break;case"toggle":case"beforetoggle":Y=Ne}var ve=(i&4)!==0,ct=!ve&&(n==="scroll"||n==="scrollend"),j=ve?K!==null?K+"Capture":null:K;ve=[];for(var M=G,F;M!==null;){var W=M;if(F=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||F===null||j===null||(W=cr(M,j),W!=null&&ve.push(ql(M,W,F))),ct)break;M=M.return}0<ve.length&&(K=new Y(K,fe,null,a,J),Z.push({event:K,listeners:ve}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",K&&a!==ll&&(fe=a.relatedTarget||a.fromElement)&&(Nr(fe)||fe[Or]))break e;if((Y||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(fe=a.relatedTarget||a.toElement,Y=G,fe=fe?Nr(fe):null,fe!==null&&(ct=l(fe),ve=fe.tag,fe!==ct||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(Y=null,fe=G),Y!==fe)){if(ve=dl,W="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ve=rs,W="onPointerLeave",j="onPointerEnter",M="pointer"),ct=Y==null?K:kn(Y),F=fe==null?K:kn(fe),K=new ve(W,M+"leave",Y,a,J),K.target=ct,K.relatedTarget=F,W=null,Nr(J)===G&&(ve=new ve(j,M+"enter",fe,a,J),ve.target=F,ve.relatedTarget=ct,W=ve),ct=W,Y&&fe)t:{for(ve=rA,j=Y,M=fe,F=0,W=j;W;W=ve(W))F++;W=0;for(var ye=M;ye;ye=ve(ye))W++;for(;0<F-W;)j=ve(j),F--;for(;0<W-F;)M=ve(M),W--;for(;F--;){if(j===M||M!==null&&j===M.alternate){ve=j;break t}j=ve(j),M=ve(M)}ve=null}else ve=null;Y!==null&&Tv(Z,K,Y,ve,!1),fe!==null&&ct!==null&&Tv(Z,ct,fe,ve,!0)}}e:{if(K=G?kn(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var Je=zp;else if(jp(K))if(Bp)Je=mS;else{Je=dS;var ge=hS}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Oa(G.elementType)&&(Je=zp):Je=fS;if(Je&&(Je=Je(n,G))){Lp(Z,Je,a,J);break e}ge&&ge(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&il(K,"number",K.value)}switch(ge=G?kn(G):window,n){case"focusin":(jp(ge)||ge.contentEditable==="true")&&(Ua=ge,Vd=G,yl=null);break;case"focusout":yl=Vd=Ua=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,Yp(Z,a,J);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":Yp(Z,a,J)}var Pe;if(Ze)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Va?Fi(n,a)&&(Be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Br&&a.locale!=="ko"&&(Va||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Va&&(Pe=cl()):(Ur=J,ul="value"in Ur?Ur.value:Ur.textContent,Va=!0)),ge=Wc(G,Be),0<ge.length&&(Be=new zr(Be,n,null,a,J),Z.push({event:Be,listeners:ge}),Pe?Be.data=Pe:(Pe=Ma(a),Pe!==null&&(Be.data=Pe)))),(Pe=Yn?oS(n,a):lS(n,a))&&(Be=Wc(G,"onBeforeInput"),0<Be.length&&(ge=new zr("onBeforeInput","beforeinput",null,a,J),Z.push({event:ge,listeners:Be}),ge.data=Pe)),ZS(Z,n,G,a,J)}wv(Z,i)})}function ql(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Wc(n,i){for(var a=i+"Capture",u=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=cr(n,a),d!=null&&u.unshift(ql(n,d,f)),d=cr(n,i),d!=null&&u.push(ql(n,d,f))),n.tag===3)return u;n=n.return}return[]}function rA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Tv(n,i,a,u,d){for(var f=i._reactName,_=[];a!==null&&a!==u;){var E=a,N=E.alternate,G=E.stateNode;if(E=E.tag,N!==null&&N===u)break;E!==5&&E!==26&&E!==27||G===null||(N=G,d?(G=cr(a,f),G!=null&&_.unshift(ql(a,G,N))):d||(G=cr(a,f),G!=null&&_.push(ql(a,G,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var sA=/\r\n?/g,iA=/\u0000|\uFFFD/g;function Sv(n){return(typeof n=="string"?n:""+n).replace(sA,`
`).replace(iA,"")}function Av(n,i){return i=Sv(i),Sv(n)===i}function ut(n,i,a,u,d,f){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Sn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Sn(n,""+u);break;case"className":Dn(n,"class",u);break;case"tabIndex":Dn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(n,a,u);break;case"style":ol(n,u,f);break;case"data":if(i!=="object"){Dn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=xa(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&ut(n,i,"name",d.name,d,null),ut(n,i,"formEncType",d.formEncType,d,null),ut(n,i,"formMethod",d.formMethod,d,null),ut(n,i,"formTarget",d.formTarget,d,null)):(ut(n,i,"encType",d.encType,d,null),ut(n,i,"method",d.method,d,null),ut(n,i,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=xa(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=ur);break;case"onScroll":u!=null&&je("scroll",n);break;case"onScrollEnd":u!=null&&je("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":je("beforetoggle",n),je("toggle",n),Ca(n,"popover",u);break;case"xlinkActuate":Vt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Vt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Vt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Vt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Vt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Vt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Vt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ca(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wu.get(a)||a,Ca(n,a,u))}}function um(n,i,a,u,d,f){switch(a){case"style":ol(n,u,f);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof u=="string"?Sn(n,u):(typeof u=="number"||typeof u=="bigint")&&Sn(n,""+u);break;case"onScroll":u!=null&&je("scroll",n);break;case"onScrollEnd":u!=null&&je("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!el.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),f=n[Xt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(i,f,d),typeof u=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,u,d);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Ca(n,a,u)}}}function an(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",n),je("load",n);var u=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(n,i,f,_,a,null)}}d&&ut(n,i,"srcSet",a.srcSet,a,null),u&&ut(n,i,"src",a.src,a,null);return;case"input":je("invalid",n);var E=f=_=d=null,N=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var J=a[u];if(J!=null)switch(u){case"name":d=J;break;case"type":_=J;break;case"checked":N=J;break;case"defaultChecked":G=J;break;case"value":f=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:ut(n,i,u,J,a,null)}}Yu(n,f,E,N,G,_,d,!1);return;case"select":je("invalid",n),u=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(E=a[d],E!=null))switch(d){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":u=E;default:ut(n,i,d,E,a,null)}i=f,a=_,n.multiple=!!u,i!=null?ks(n,!!u,i,!1):a!=null&&ks(n,!!u,a,!0);return;case"textarea":je("invalid",n),f=d=u=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":u=E;break;case"defaultValue":d=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ut(n,i,_,E,a,null)}Ds(n,u,d,f);return;case"option":for(N in a)a.hasOwnProperty(N)&&(u=a[N],u!=null)&&(N==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":ut(n,i,N,u,a,null));return;case"dialog":je("beforetoggle",n),je("toggle",n),je("cancel",n),je("close",n);break;case"iframe":case"object":je("load",n);break;case"video":case"audio":for(u=0;u<Bl.length;u++)je(Bl[u],n);break;case"image":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"embed":case"source":case"link":je("error",n),je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(n,i,G,u,a,null)}return;default:if(Oa(i)){for(J in a)a.hasOwnProperty(J)&&(u=a[J],u!==void 0&&um(n,i,J,u,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(u=a[E],u!=null&&ut(n,i,E,u,a,null))}function aA(n,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,E=null,N=null,G=null,J=null;for(Y in a){var Z=a[Y];if(a.hasOwnProperty(Y)&&Z!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=Z;default:u.hasOwnProperty(Y)||ut(n,i,Y,null,u,Z)}}for(var K in u){var Y=u[K];if(Z=a[K],u.hasOwnProperty(K)&&(Y!=null||Z!=null))switch(K){case"type":f=Y;break;case"name":d=Y;break;case"checked":G=Y;break;case"defaultChecked":J=Y;break;case"value":_=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==Z&&ut(n,i,K,Y,u,Z)}}Ia(n,_,E,N,G,J,f,d);return;case"select":Y=_=E=K=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":Y=N;default:u.hasOwnProperty(f)||ut(n,i,f,null,u,N)}for(d in u)if(f=u[d],N=a[d],u.hasOwnProperty(d)&&(f!=null||N!=null))switch(d){case"value":K=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==N&&ut(n,i,d,f,u,N)}i=E,a=_,u=Y,K!=null?ks(n,!!a,K,!1):!!u!=!!a&&(i!=null?ks(n,!!a,i,!0):ks(n,!!a,a?[]:"",!1));return;case"textarea":Y=K=null;for(E in a)if(d=a[E],a.hasOwnProperty(E)&&d!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ut(n,i,E,null,u,d)}for(_ in u)if(d=u[_],f=a[_],u.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":K=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&ut(n,i,_,d,u,f)}Xu(n,K,Y);return;case"option":for(var fe in a)K=a[fe],a.hasOwnProperty(fe)&&K!=null&&!u.hasOwnProperty(fe)&&(fe==="selected"?n.selected=!1:ut(n,i,fe,null,u,K));for(N in u)K=u[N],Y=a[N],u.hasOwnProperty(N)&&K!==Y&&(K!=null||Y!=null)&&(N==="selected"?n.selected=K&&typeof K!="function"&&typeof K!="symbol":ut(n,i,N,K,u,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)K=a[ve],a.hasOwnProperty(ve)&&K!=null&&!u.hasOwnProperty(ve)&&ut(n,i,ve,null,u,K);for(G in u)if(K=u[G],Y=a[G],u.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:ut(n,i,G,K,u,Y)}return;default:if(Oa(i)){for(var ct in a)K=a[ct],a.hasOwnProperty(ct)&&K!==void 0&&!u.hasOwnProperty(ct)&&um(n,i,ct,void 0,u,K);for(J in u)K=u[J],Y=a[J],!u.hasOwnProperty(J)||K===Y||K===void 0&&Y===void 0||um(n,i,J,K,u,Y);return}}for(var j in a)K=a[j],a.hasOwnProperty(j)&&K!=null&&!u.hasOwnProperty(j)&&ut(n,i,j,null,u,K);for(Z in u)K=u[Z],Y=a[Z],!u.hasOwnProperty(Z)||K===Y||K==null&&Y==null||ut(n,i,Z,K,u,Y)}function Rv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var d=a[u],f=d.transferSize,_=d.initiatorType,E=d.duration;if(f&&E&&Rv(_)){for(_=0,E=d.responseEnd,u+=1;u<a.length;u++){var N=a[u],G=N.startTime;if(G>E)break;var J=N.transferSize,Z=N.initiatorType;J&&Rv(Z)&&(N=N.responseEnd,_+=J*(N<E?1:(E-G)/(N-G)))}if(--u,i+=8*(f+_)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var cm=null,hm=null;function Zc(n){return n.nodeType===9?n:n.ownerDocument}function Cv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function dm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fm=null;function lA(){var n=window.event;return n&&n.type==="popstate"?n===fm?!1:(fm=n,!0):(fm=null,!1)}var Ov=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,xv=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof xv<"u"?function(n){return xv.resolve(null).then(n).catch(hA)}:Ov;function hA(n){setTimeout(function(){throw n})}function ni(n){return n==="head"}function Nv(n,i){var a=i,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(d),co(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Hl(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Hl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,E=f.nodeName;f[xr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&Hl(n.ownerDocument.body);a=d}while(a);co(i)}function kv(n,i){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function mm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mm(a),Ra(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function dA(n,i,a,u){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=nr(n.nextSibling),n===null)break}return null}function fA(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=nr(n.nextSibling),n===null))return null;return n}function Dv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=nr(n.nextSibling),n===null))return null;return n}function gm(n){return n.data==="$?"||n.data==="$~"}function pm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function mA(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function nr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ym=null;function Pv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return nr(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function Mv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function Vv(n,i,a){switch(i=Zc(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Hl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ra(n)}var rr=new Map,Uv=new Set;function eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _s=oe.d;oe.d={f:gA,r:pA,D:yA,C:_A,L:vA,m:bA,X:EA,S:wA,M:TA};function gA(){var n=_s.f(),i=Fc();return n||i}function pA(n){var i=Gn(n);i!==null&&i.tag===5&&i.type==="form"?e_(i):_s.r(n)}var oo=typeof document>"u"?null:document;function jv(n,i,a){var u=oo;if(u&&typeof i=="string"&&i){var d=Tn(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Uv.has(d)||(Uv.add(d),n={rel:n,crossOrigin:a,href:i},u.querySelector(d)===null&&(i=u.createElement("link"),an(i,"link",n),Mt(i),u.head.appendChild(i)))}}function yA(n){_s.D(n),jv("dns-prefetch",n,null)}function _A(n,i){_s.C(n,i),jv("preconnect",n,i)}function vA(n,i,a){_s.L(n,i,a);var u=oo;if(u&&n&&i){var d='link[rel="preload"][as="'+Tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Tn(a.imageSizes)+'"]')):d+='[href="'+Tn(n)+'"]';var f=d;switch(i){case"style":f=lo(n);break;case"script":f=uo(n)}rr.has(f)||(n=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),rr.set(f,n),u.querySelector(d)!==null||i==="style"&&u.querySelector($l(f))||i==="script"&&u.querySelector(Fl(f))||(i=u.createElement("link"),an(i,"link",n),Mt(i),u.head.appendChild(i)))}}function bA(n,i){_s.m(n,i);var a=oo;if(a&&n){var u=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(n)+'"]',f=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=uo(n)}if(!rr.has(f)&&(n=w({rel:"modulepreload",href:n},i),rr.set(f,n),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(f)))return}u=a.createElement("link"),an(u,"link",n),Mt(u),a.head.appendChild(u)}}}function wA(n,i,a){_s.S(n,i,a);var u=oo;if(u&&n){var d=kr(u).hoistableStyles,f=lo(n);i=i||"default";var _=d.get(f);if(!_){var E={loading:0,preload:null};if(_=u.querySelector($l(f)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":i},a),(a=rr.get(f))&&_m(n,a);var N=_=u.createElement("link");Mt(N),an(N,"link",n),N._p=new Promise(function(G,J){N.onload=G,N.onerror=J}),N.addEventListener("load",function(){E.loading|=1}),N.addEventListener("error",function(){E.loading|=2}),E.loading|=4,th(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:E},d.set(f,_)}}}function EA(n,i){_s.X(n,i);var a=oo;if(a&&n){var u=kr(a).hoistableScripts,d=uo(n),f=u.get(d);f||(f=a.querySelector(Fl(d)),f||(n=w({src:n,async:!0},i),(i=rr.get(d))&&vm(n,i),f=a.createElement("script"),Mt(f),an(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function TA(n,i){_s.M(n,i);var a=oo;if(a&&n){var u=kr(a).hoistableScripts,d=uo(n),f=u.get(d);f||(f=a.querySelector(Fl(d)),f||(n=w({src:n,async:!0,type:"module"},i),(i=rr.get(d))&&vm(n,i),f=a.createElement("script"),Mt(f),an(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function Lv(n,i,a,u){var d=(d=Ee.current)?eh(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=lo(a.href),a=kr(d).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=lo(a.href);var f=kr(d).hoistableStyles,_=f.get(n);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,_),(f=d.querySelector($l(n)))&&!f._p&&(_.instance=f,_.state.loading=5),rr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},rr.set(n,a),f||SA(d,n,a,_.state))),i&&u===null)throw Error(s(528,""));return _}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(a),a=kr(d).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function lo(n){return'href="'+Tn(n)+'"'}function $l(n){return'link[rel="stylesheet"]['+n+"]"}function zv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function SA(n,i,a,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),an(i,"link",a),Mt(i),n.head.appendChild(i))}function uo(n){return'[src="'+Tn(n)+'"]'}function Fl(n){return"script[async]"+n}function Bv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(u)return i.instance=u,Mt(u),u;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Mt(u),an(u,"style",d),th(u,a.precedence,n),i.instance=u;case"stylesheet":d=lo(a.href);var f=n.querySelector($l(d));if(f)return i.state.loading|=4,i.instance=f,Mt(f),f;u=zv(a),(d=rr.get(d))&&_m(u,d),f=(n.ownerDocument||n).createElement("link"),Mt(f);var _=f;return _._p=new Promise(function(E,N){_.onload=E,_.onerror=N}),an(f,"link",u),i.state.loading|=4,th(f,a.precedence,n),i.instance=f;case"script":return f=uo(a.src),(d=n.querySelector(Fl(f)))?(i.instance=d,Mt(d),d):(u=a,(d=rr.get(f))&&(u=w({},a),vm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Mt(d),an(d,"link",u),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,th(u,a.precedence,n));return i.instance}function th(n,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,f=d,_=0;_<u.length;_++){var E=u[_];if(E.dataset.precedence===i)f=E;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function _m(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var nh=null;function qv(n,i,a){if(nh===null){var u=new Map,d=nh=new Map;d.set(a,u)}else d=nh,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var f=a[d];if(!(f[xr]||f[Pt]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=n+_;var E=u.get(_);E?E.push(f):u.set(_,[f])}}return u}function Hv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function AA(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $v(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function RA(n,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=lo(u.href),f=i.querySelector($l(d));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=rh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=f,Mt(f);return}f=i.ownerDocument||i,u=zv(u),(d=rr.get(d))&&_m(u,d),f=f.createElement("link"),Mt(f);var _=f;_._p=new Promise(function(E,N){_.onload=E,_.onerror=N}),an(f,"link",u),a.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=rh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var bm=0;function CA(n,i){return n.stylesheets&&n.count===0&&ih(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4+i);0<n.imgBytes&&bm===0&&(bm=62500*oA());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend)){var f=n.unsuspend;n.unsuspend=null,f()}},(n.imgBytes>bm?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ih(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var sh=null;function ih(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,sh=new Map,i.forEach(IA,n),sh=null,rh.call(n))}function IA(n,i){if(!(i.state.loading&4)){var a=sh.get(n);if(a)var u=a.get(null);else{a=new Map,sh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),u=_)}u&&a.set(null,u)}d=i.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||u,f===u&&a.set(null,d),a.set(_,d),this.count++,u=rh.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var Gl={$$typeof:L,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function OA(n,i,a,u,d,f,_,E,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Fv(n,i,a,u,d,f,_,E,N,G,J,Z){return n=new OA(n,i,a,_,N,G,J,Z,E),i=1,f===!0&&(i|=24),f=Mn(3,null,null,i),n.current=f,f.stateNode=n,i=Wd(),i.refCount++,n.pooledCache=i,i.refCount++,f.memoizedState={element:u,isDehydrated:a,cache:i},nf(f),n}function Gv(n){return n?(n=za,n):za}function Kv(n,i,a,u,d,f){d=Gv(d),u.context===null?u.context=d:u.pendingContext=d,u=Fs(i),u.payload={element:a},f=f===void 0?null:f,f!==null&&(u.callback=f),a=Gs(n,u,i),a!==null&&(On(a,n,i),Sl(a,n,i))}function Qv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function wm(n,i){Qv(n,i),(n=n.alternate)&&Qv(n,i)}function Yv(n){if(n.tag===13||n.tag===31){var i=Qi(n,67108864);i!==null&&On(i,n,67108864),wm(n,67108864)}}function Xv(n){if(n.tag===13||n.tag===31){var i=zn();i=Vi(i);var a=Qi(n,i);a!==null&&On(a,n,i),wm(n,i)}}var ah=!0;function xA(n,i,a,u){var d=X.T;X.T=null;var f=oe.p;try{oe.p=2,Em(n,i,a,u)}finally{oe.p=f,X.T=d}}function NA(n,i,a,u){var d=X.T;X.T=null;var f=oe.p;try{oe.p=8,Em(n,i,a,u)}finally{oe.p=f,X.T=d}}function Em(n,i,a,u){if(ah){var d=Tm(u);if(d===null)lm(n,i,u,oh,a),Wv(n,u);else if(DA(d,n,i,a,u))u.stopPropagation();else if(Wv(n,u),i&4&&-1<kA.indexOf(n)){for(;d!==null;){var f=Gn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Rr(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var N=1<<31-Ct(_);E.entanglements[1]|=N,_&=~N}Fr(f),(et&6)===0&&(Hc=vn()+500,zl(0))}}break;case 31:case 13:E=Qi(f,2),E!==null&&On(E,f,2),Fc(),wm(f,2)}if(f=Tm(u),f===null&&lm(n,i,u,oh,a),f===d)break;d=f}d!==null&&u.stopPropagation()}else lm(n,i,u,null,a)}}function Tm(n){return n=Kn(n),Sm(n)}var oh=null;function Sm(n){if(oh=null,n=Nr(n),n!==null){var i=l(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return oh=n,null}function Jv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case Yo:return 2;case Xo:return 8;case xs:case Od:return 32;case Lu:return 268435456;default:return 32}default:return 32}}var Am=!1,ri=null,si=null,ii=null,Kl=new Map,Ql=new Map,ai=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(n,i){switch(n){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Kl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(i.pointerId)}}function Yl(n,i,a,u,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Gn(i),i!==null&&Yv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function DA(n,i,a,u,d){switch(i){case"focusin":return ri=Yl(ri,n,i,a,u,d),!0;case"dragenter":return si=Yl(si,n,i,a,u,d),!0;case"mouseover":return ii=Yl(ii,n,i,a,u,d),!0;case"pointerover":var f=d.pointerId;return Kl.set(f,Yl(Kl.get(f)||null,n,i,a,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Ql.set(f,Yl(Ql.get(f)||null,n,i,a,u,d)),!0}return!1}function Zv(n){var i=Nr(n.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,or(n.priority,function(){Xv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,or(n.priority,function(){Xv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Tm(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);ll=u,a.target.dispatchEvent(u),ll=null}else return i=Gn(a),i!==null&&Yv(i),n.blockedOn=a,!1;i.shift()}return!0}function e0(n,i,a){lh(n)&&a.delete(i)}function PA(){Am=!1,ri!==null&&lh(ri)&&(ri=null),si!==null&&lh(si)&&(si=null),ii!==null&&lh(ii)&&(ii=null),Kl.forEach(e0),Ql.forEach(e0)}function uh(n,i){n.blockedOn===i&&(n.blockedOn=null,Am||(Am=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,PA)))}var ch=null;function t0(n){ch!==n&&(ch=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ch===n&&(ch=null);for(var i=0;i<n.length;i+=3){var a=n[i],u=n[i+1],d=n[i+2];if(typeof u!="function"){if(Sm(u||a)===null)continue;break}var f=Gn(a);f!==null&&(n.splice(i,3),i-=3,Tf(f,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function co(n){function i(N){return uh(N,n)}ri!==null&&uh(ri,n),si!==null&&uh(si,n),ii!==null&&uh(ii,n),Kl.forEach(i),Ql.forEach(i);for(var a=0;a<ai.length;a++){var u=ai[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ai.length&&(a=ai[0],a.blockedOn===null);)Zv(a),a.blockedOn===null&&ai.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],f=a[u+1],_=d[Xt]||null;if(typeof f=="function")_||t0(a);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[Xt]||null)E=_.formAction;else if(Sm(d)!==null)continue}else E=_.action;typeof E=="function"?a[u+1]=E:(a.splice(u,3),u-=3),t0(a)}}}function n0(){function n(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Rm(n){this._internalRoot=n}hh.prototype.render=Rm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=zn();Kv(a,u,n,i,null,null)},hh.prototype.unmount=Rm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Kv(n.current,2,null,n,null,null),Fc(),i[Or]=null}};function hh(n){this._internalRoot=n}hh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fu();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ai.length&&i!==0&&i<ai[a].priority;a++);ai.splice(a,0,n),a===0&&Zv(n)}};var r0=e.version;if(r0!=="19.2.3")throw Error(s(527,r0,"19.2.3"));oe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var MA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{ir=dh.inject(MA),en=dh}catch{}}return Jl.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,u="",d=c_,f=h_,_=d_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Fv(n,1,!1,null,null,a,u,null,d,f,_,n0),n[Or]=i.current,om(n),new Rm(i)},Jl.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var u=!1,d="",f=c_,_=h_,E=d_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=Fv(n,1,!0,i,a??null,u,d,N,f,_,E,n0),i.context=Gv(null),a=i.current,u=zn(),u=Vi(u),d=Fs(u),d.callback=null,Gs(a,d,u),a=u,i.current.lanes=a,Pi(i,a),Fr(i),n[Or]=i.current,om(n),new hh(i)},Jl.version="19.2.3",Jl}var f0;function KA(){if(f0)return Om.exports;f0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Om.exports=GA(),Om.exports}var QA=KA();const YA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),m0=r=>{const e=XA(r);return e.charAt(0).toUpperCase()+e.slice(1)},yw=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),JA=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var WA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZA=Ve.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...m},g)=>Ve.createElement("svg",{ref:g,...WA,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:yw("lucide",o),...!l&&!JA(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,b])=>Ve.createElement(p,b)),...Array.isArray(l)?l:[l]]));const Yt=(r,e)=>{const t=Ve.forwardRef(({className:s,...o},l)=>Ve.createElement(ZA,{ref:l,iconNode:e,className:yw(`lucide-${YA(m0(r))}`,`lucide-${r}`,s),...o}));return t.displayName=m0(r),t};const e1=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],t1=Yt("cloud-upload",e1);const n1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_w=Yt("database",n1);const r1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],s1=Yt("eye",r1);const i1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vw=Yt("loader-circle",i1);const a1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],g0=Yt("lock",a1);const o1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],l1=Yt("log-out",o1);const u1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],c1=Yt("map-pin",u1);const h1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],d1=Yt("pen",h1);const f1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],m1=Yt("phone",f1);const g1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],p0=Yt("plus",g1);const p1=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],bw=Yt("printer",p1);const y1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_1=Yt("rotate-ccw",y1);const v1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],b1=Yt("save",v1);const w1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],E1=Yt("search",w1);const T1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S1=Yt("settings",T1);const A1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],R1=Yt("trash-2",A1);const C1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ww=Yt("user",C1);const I1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],O1=Yt("users",I1);const x1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sd=Yt("x",x1);var Sh={exports:{}},N1=Sh.exports,y0;function k1(){return y0||(y0=1,(function(r,e){(function(t,s){r.exports=s(rd())})(typeof self<"u"?self:N1,function(t){return(function(){var s={155:function(H){H.exports=t}},o={};function l(H){var L=o[H];if(L!==void 0)return L.exports;var se=o[H]={exports:{}};return s[H](se,se.exports,l),se.exports}l.d=function(H,L){for(var se in L)l.o(L,se)&&!l.o(H,se)&&Object.defineProperty(H,se,{enumerable:!0,get:L[se]})},l.o=function(H,L){return Object.prototype.hasOwnProperty.call(H,L)},l.r=function(H){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var c={};l.r(c),l.d(c,{useReactToPrint:function(){return te}});var m=l(155);const g="printWindow";function p({level:H="error",messages:L,suppressErrors:se=!1}){se||(H==="error"?console.error(L):H==="warning"?console.warn(L):console.debug(L))}function b(H,L){if(L||!H){const se=document.getElementById(g);se&&document.body.removeChild(se)}}function w(H){return H instanceof Error?H:new Error("Unknown Error")}function T(H,L){const{documentTitle:se,onAfterPrint:de,onPrintError:le,preserveAfterPrint:C,print:A,suppressErrors:I}=L;setTimeout(()=>{var P,k;if(H.contentWindow){let R=function(){de?.(),b(C)};var U=R;if(H.contentWindow.focus(),A)A(H).then(R).catch(Ae=>{le?le("print",w(Ae)):p({messages:["An error was thrown by the specified `print` function"],suppressErrors:I})});else{if(H.contentWindow.print){const Ae=(k=(P=H.contentDocument)===null||P===void 0?void 0:P.title)!==null&&k!==void 0?k:"",Ke=H.ownerDocument.title;se&&(H.ownerDocument.title=se,H.contentDocument&&(H.contentDocument.title=se)),H.contentWindow.print(),se&&(H.ownerDocument.title=Ke,H.contentDocument&&(H.contentDocument.title=Ae))}else p({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:I});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(Ae=>{var Ke,X;return((X=(Ke=navigator.userAgent)!==null&&Ke!==void 0?Ke:navigator.vendor)!==null&&X!==void 0?X:"opera"in window&&window.opera).match(Ae)})?setTimeout(R,500):R()}}else p({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:I})},500)}function x(H){const L=[],se=document.createTreeWalker(H,NodeFilter.SHOW_ELEMENT,null);let de=se.nextNode();for(;de;)L.push(de),de=se.nextNode();return L}function V(H,L,se){const de=x(H),le=x(L);if(de.length===le.length)for(let C=0;C<de.length;C++){const A=de[C],I=le[C],P=A.shadowRoot;if(P!==null){const k=I.attachShadow({mode:P.mode});k.innerHTML=P.innerHTML,V(P,k,se)}}else p({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",H,L],suppressErrors:se})}const z=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function q(H,L,se,de){var le,C,A,I,P;const{contentNode:k,clonedContentNode:U,clonedImgNodes:R,clonedVideoNodes:Ae,numResourcesToLoad:Ke,originalCanvasNodes:X}=se,{bodyClass:oe,fonts:me,ignoreGlobalStyles:De,pageStyle:Me,nonce:D,suppressErrors:$,copyShadowRoots:ie}=de;H.onload=null;const re=(le=H.contentDocument)!==null&&le!==void 0?le:(C=H.contentWindow)===null||C===void 0?void 0:C.document;if(re){const he=re.body.appendChild(U);ie&&V(k,he,!!$),me&&(!((A=H.contentDocument)===null||A===void 0)&&A.fonts&&(!((I=H.contentWindow)===null||I===void 0)&&I.FontFace)?me.forEach(Le=>{const Te=new FontFace(Le.family,Le.source,{weight:Le.weight,style:Le.style});H.contentDocument.fonts.add(Te),Te.loaded.then(()=>{L(Te)}).catch(dt=>{L(Te,["Failed loading the font:",Te,"Load error:",w(dt)])})}):(me.forEach(Le=>{L(Le)}),p({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:$})));const Ee=Me??z,Ce=re.createElement("style");D&&(Ce.setAttribute("nonce",D),re.head.setAttribute("nonce",D)),Ce.appendChild(re.createTextNode(Ee)),re.head.appendChild(Ce),oe&&re.body.classList.add(...oe.split(" "));const ht=re.querySelectorAll("canvas");for(let Le=0;Le<X.length;++Le){const Te=X[Le],dt=ht[Le];if(dt===void 0){p({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Te],suppressErrors:$});continue}const Qe=dt.getContext("2d");Qe&&Qe.drawImage(Te,0,0)}for(let Le=0;Le<R.length;Le++){const Te=R[Le],dt=Te.getAttribute("src");if(dt){const Qe=new Image;Qe.onload=()=>{L(Te)},Qe.onerror=(at,Tt,dn,Ye,nt)=>{L(Te,["Error loading <img>",Te,"Error",nt])},Qe.src=dt}else L(Te,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Te])}for(let Le=0;Le<Ae.length;Le++){const Te=Ae[Le];Te.preload="auto";const dt=Te.getAttribute("poster");if(dt){const Qe=new Image;Qe.onload=()=>{L(Te)},Qe.onerror=(at,Tt,dn,Ye,nt)=>{L(Te,["Error loading video poster",dt,"for video",Te,"Error:",nt])},Qe.src=dt}else Te.readyState>=2?L(Te):Te.src?(Te.onloadeddata=()=>{L(Te)},Te.onerror=(Qe,at,Tt,dn,Ye)=>{L(Te,["Error loading video",Te,"Error",Ye])},Te.onstalled=()=>{L(Te,["Loading video stalled, skipping",Te])}):L(Te,["Error loading video, `src` is empty",Te])}const Xe="select",kt=k.querySelectorAll(Xe),_n=re.querySelectorAll(Xe);for(let Le=0;Le<kt.length;Le++)_n[Le].value=kt[Le].value;if(!De){const Le=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Te=0,dt=Le.length;Te<dt;++Te){const Qe=Le[Te];if(Qe.tagName.toLowerCase()==="style"){const at=re.createElement(Qe.tagName),Tt=Qe.sheet;if(Tt){let dn="";try{const Ye=Tt.cssRules.length;for(let nt=0;nt<Ye;++nt)typeof Tt.cssRules[nt].cssText=="string"&&(dn+=`${Tt.cssRules[nt].cssText}\r
`)}catch(Ye){p({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Qe,`Original error: ${w(Ye).message}`],level:"warning"})}at.setAttribute("id",`react-to-print-${Te}`),D&&at.setAttribute("nonce",D),at.appendChild(re.createTextNode(dn)),re.head.appendChild(at)}}else if(Qe.getAttribute("href"))if(Qe.hasAttribute("disabled"))p({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Qe],level:"warning"}),L(Qe);else{const at=re.createElement(Qe.tagName);for(let Tt=0,dn=Qe.attributes.length;Tt<dn;++Tt){const Ye=Qe.attributes[Tt];Ye&&at.setAttribute(Ye.nodeName,(P=Ye.nodeValue)!==null&&P!==void 0?P:"")}at.onload=()=>{L(at)},at.onerror=(Tt,dn,Ye,nt,Sr)=>{L(at,["Failed to load",at,"Error:",Sr])},D&&at.setAttribute("nonce",D),re.head.appendChild(at)}else p({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Qe],level:"warning"}),L(Qe)}}}Ke===0&&T(H,de)}function te({bodyClass:H,contentRef:L,copyShadowRoots:se,documentTitle:de,fonts:le,ignoreGlobalStyles:C,nonce:A,onAfterPrint:I,onBeforePrint:P,onPrintError:k,pageStyle:U,preserveAfterPrint:R,print:Ae,printIframeProps:Ke,suppressErrors:X}){return(0,m.useCallback)(me=>{function De(){const Me={bodyClass:H,contentRef:L,copyShadowRoots:se,documentTitle:de,fonts:le,ignoreGlobalStyles:C,nonce:A,onAfterPrint:I,onPrintError:k,pageStyle:U,preserveAfterPrint:R,print:Ae,suppressErrors:X},D=(function(re){const he=document.createElement("iframe");return he.width=`${document.documentElement.clientWidth}px`,he.height=`${document.documentElement.clientHeight}px`,he.style.position="absolute",he.style.top=`-${document.documentElement.clientHeight+100}px`,he.style.left=`-${document.documentElement.clientWidth+100}px`,he.id=g,he.srcdoc="<!DOCTYPE html>",re&&(re.allow&&(he.allow=re.allow),re.referrerPolicy!==void 0&&(he.referrerPolicy=re.referrerPolicy),re.sandbox!==void 0&&(he.sandbox=re.sandbox)),he})(Ke),$=(function(re,he){const{contentRef:Ee,fonts:Ce,ignoreGlobalStyles:ht,suppressErrors:Xe}=he,kt=(function({contentRef:at,optionalContent:Tt,suppressErrors:dn}){return Tt&&typeof Tt=="function"?(at&&p({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),Tt()):at?at.current:void p({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:dn})})({contentRef:Ee,optionalContent:re,suppressErrors:Xe});if(!kt)return;const _n=kt.cloneNode(!0),Le=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Te=_n.querySelectorAll("img"),dt=_n.querySelectorAll("video"),Qe=Ce?Ce.length:0;return{contentNode:kt,clonedContentNode:_n,clonedImgNodes:Te,clonedVideoNodes:dt,numResourcesToLoad:(ht?0:Le.length)+Te.length+dt.length+Qe,originalCanvasNodes:kt.querySelectorAll("canvas")}})(me,Me);if(!$)return void p({messages:["There is nothing to print"],suppressErrors:X});const ie=(function(re,he,Ee){const{suppressErrors:Ce}=re,ht=[],Xe=[];return function(kt,_n){ht.includes(kt)?p({level:"debug",messages:["Tried to mark a resource that has already been handled",kt],suppressErrors:Ce}):(_n?(p({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',..._n],suppressErrors:Ce}),Xe.push(kt)):ht.push(kt),ht.length+Xe.length===he&&T(Ee,re))}})(Me,$.numResourcesToLoad,D);(function(re,he,Ee,Ce){re.onload=()=>{q(re,he,Ee,Ce)},document.body.appendChild(re)})(D,ie,$,Me)}b(R,!0),P?P().then(()=>{De()}).catch(Me=>{k?.("onBeforePrint",w(Me))}):De()},[H,L,se,de,le,C,A,I,P,k,U,R,Ae,X])}return c})()})})(Sh)),Sh.exports}var D1=k1();function P1({isDemo:r,onSetupClick:e}){return r?O.jsx("div",{className:"bg-indigo-50 border-b border-indigo-100 p-4",children:O.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"p-2 bg-indigo-100 rounded-full text-indigo-600",children:O.jsx(_w,{size:20})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-semibold text-indigo-900",children:"Demo Mode Active"}),O.jsx("p",{className:"text-sm text-indigo-700",children:"Data is saved to your browser (Local Storage). Connect Firebase to save to the cloud."})]})]}),O.jsx("button",{onClick:e,className:"hidden sm:inline-flex items-center gap-2 text-sm font-medium text-indigo-600 hover:text-indigo-800 underline decoration-indigo-300 underline-offset-2",children:"Setup Firebase "})]})}):null}function M1({children:r,isDemo:e,onLogout:t,onSetupClick:s}){return O.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[O.jsx(P1,{isDemo:e,onSetupClick:s}),O.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:O.jsx("span",{className:"text-white font-bold text-lg",children:"A"})}),O.jsx("h1",{className:"text-xl font-bold text-gray-900 tracking-tight",children:"Address Book"})]}),t&&O.jsxs("button",{onClick:t,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:[O.jsx(l1,{className:"h-5 w-5 mr-2"}),"Sign out"]})]})}),O.jsx("main",{className:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:r}),O.jsx("footer",{className:"bg-white border-t border-gray-200 py-6 mt-auto",children:O.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center text-sm text-gray-500",children:O.jsxs("p",{children:[" ",new Date().getFullYear()," Address Book App. Built with React & Firebase."]})})})]})}function Ew(r){if(!r)return null;const e=r.split(",");return O.jsx(O.Fragment,{children:e.map((t,s)=>{const o=s===e.length-1,l=t.trim();return!l&&!o?O.jsx("br",{},s):O.jsxs("span",{className:"block",children:[l,!o&&","]},s)})})}function V1({contact:r,onDelete:e,onEdit:t,canEdit:s,canDelete:o,onSelect:l,isSelected:c}){return O.jsxs("div",{className:`bg-white rounded-xl shadow-sm border hover:shadow-md transition-all duration-200 overflow-hidden group relative ${c?"border-blue-500 ring-1 ring-blue-500 bg-blue-50/10":"border-gray-100"}`,children:[O.jsx("div",{className:"absolute top-4 right-4 z-10",children:O.jsx("input",{type:"checkbox",checked:c||!1,onChange:m=>l(r.id,m.target.checked),className:"h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 cursor-pointer"})}),O.jsxs("div",{className:"p-5",children:[O.jsxs("div",{className:"flex justify-between items-start",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-50 overflow-hidden flex items-center justify-center border border-blue-100",children:O.jsx(ww,{size:24,className:"text-blue-400"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:r.name}),O.jsxs("p",{className:"text-xs text-gray-500",children:["Added ",new Date(r.created_at).toLocaleDateString()]})]})]}),O.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity mr-8",children:[s&&O.jsx("button",{onClick:()=>t(r),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:O.jsx(d1,{size:16})}),o&&O.jsx("button",{onClick:()=>e(r.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:O.jsx(R1,{size:16})})]})]}),O.jsxs("div",{className:"mt-6 space-y-3",children:[O.jsxs("div",{className:"flex items-center gap-3 text-gray-600 text-sm",children:[O.jsx(m1,{size:16,className:"text-gray-400"}),O.jsx("a",{href:`tel:${r.phone}`,className:"hover:text-blue-600",children:r.phone})]}),O.jsxs("div",{className:"flex items-start gap-3 text-gray-600 text-sm",children:[O.jsx(c1,{size:16,className:"text-gray-400 mt-1 shrink-0"}),O.jsxs("div",{children:[Ew(r.address),O.jsx("span",{children:[r.city,r.state,r.pincode,r.country].filter(Boolean).join(", ")})]})]})]})]})]})}function U1({isOpen:r,onClose:e,onSubmit:t,initialData:s=null}){const[o,l]=Ve.useState({name:"",phone:"",address:"",city:"",state:"",country:"",pincode:""}),[c,m]=Ve.useState(!1);if(Ve.useEffect(()=>{l(s?{name:s.name||"",phone:s.phone||"",address:s.address||"",city:s.city||"",state:s.state||"",country:s.country||"",pincode:s.pincode||"",...s}:{name:"",phone:"",address:"",city:"",state:"",country:"",pincode:""})},[s,r]),!r)return null;async function g(p){p.preventDefault(),m(!0);try{await t(o),e()}catch(b){console.error(b),alert(`Failed to save contact: ${b.message||"Unknown error"}`)}finally{m(!1)}}return O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:O.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[O.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 bg-gray-50/50",children:[O.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s?"Edit Contact":"New Contact"}),O.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:O.jsx(sd,{size:20})})]}),O.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),O.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.name,onChange:p=>l({...o,name:p.target.value}),placeholder:"e.g. John Doe"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),O.jsx("input",{type:"tel",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.phone,onChange:p=>l({...o,phone:p.target.value}),placeholder:"+1 (555) 000-0000"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),O.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none",rows:"2",value:o.address,onChange:p=>l({...o,address:p.target.value}),placeholder:"Street address"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),O.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.city,onChange:p=>l({...o,city:p.target.value})})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),O.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.state,onChange:p=>l({...o,state:p.target.value})})]})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),O.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.country,onChange:p=>l({...o,country:p.target.value})})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pin Code"}),O.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o.pincode,onChange:p=>l({...o,pincode:p.target.value})})]})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 mt-6",children:[O.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200",children:"Cancel"}),O.jsxs("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c&&O.jsx(vw,{className:"animate-spin mr-2",size:16}),s?"Save Changes":"Add Contact"]})]})]})]})})}const zg=BA.forwardRef(({contacts:r,pageSize:e="A5",orientation:t="landscape"},s)=>O.jsxs("div",{ref:s,className:"p-8 bg-white",children:[O.jsx("style",{type:"text/css",media:"print",children:`
                    @page {
                        size: ${e} ${t};
                        margin: 0;
                    }
                    body {
                        -webkit-print-color-adjust: exact;
                    }
                `}),r.map((o,l)=>O.jsx("div",{className:"mb-8 border-2 border-gray-800 p-8 rounded-xl break-inside-avoid page-break-after-always",style:{pageBreakAfter:"always",width:"100%",height:"100%"},children:O.jsxs("div",{className:"flex flex-col gap-2 text-gray-900 font-sans",children:[O.jsx("h1",{className:"text-3xl font-bold mb-4 uppercase tracking-wide border-b-2 border-gray-800 pb-2",children:o.name}),O.jsxs("div",{className:"text-xl leading-relaxed space-y-1",children:[O.jsx("div",{className:"font-medium",children:Ew(o.address)}),O.jsxs("p",{children:[o.city,", ",o.state]}),O.jsxs("p",{children:[o.country," - ",O.jsx("span",{className:"font-bold",children:o.pincode})]})]}),O.jsx("div",{className:"mt-8 pt-4 border-t border-gray-300",children:O.jsxs("p",{className:"text-lg font-mono",children:[O.jsx("span",{className:"font-bold mr-2",children:"PH:"}),o.phone]})})]})},o.id))]}));zg.displayName="PrintableLabel";const j1=()=>{};var _0={};const Tw=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},L1=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,m=c?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,b=l>>2,w=(l&3)<<4|m>>4;let T=(m&15)<<2|p>>6,x=p&63;g||(x=64,c||(T=64)),s.push(t[b],t[w],t[T],t[x])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Tw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):L1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const p=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||p==null||w==null)throw new z1;const T=l<<2|m>>4;if(s.push(T),p!==64){const x=m<<4&240|p>>2;if(s.push(x),w!==64){const V=p<<6&192|w;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B1=function(r){const e=Tw(r);return Sw.encodeByteArray(e,!0)},Mh=function(r){return B1(r).replace(/\./g,"")},Aw=function(r){try{return Sw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const H1=()=>q1().__FIREBASE_DEFAULTS__,$1=()=>{if(typeof process>"u"||typeof _0>"u")return;const r=_0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},F1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Aw(r[1]);return e&&JSON.parse(e)},id=()=>{try{return j1()||H1()||$1()||F1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Rw=r=>id()?.emulatorHosts?.[r],G1=r=>{const e=Rw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Cw=()=>id()?.config,Iw=r=>id()?.[`_${r}`];let K1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};function Bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ow(r){return(await fetch(r,{credentials:"include"})).ok}function Q1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Mh(JSON.stringify(t)),Mh(JSON.stringify(c)),""].join(".")}const nu={};function Y1(){const r={prod:[],emulator:[]};for(const e of Object.keys(nu))nu[e]?r.emulator.push(e):r.prod.push(e);return r}function X1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let v0=!1;function xw(r,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||nu[r]===e||nu[r]||v0)return;nu[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=Y1().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,x){T.setAttribute("width","24"),T.setAttribute("id",x),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{v0=!0,c()},T}function b(T,x){T.setAttribute("id",x),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=X1(s),x=t("text"),V=document.getElementById(x)||document.createElement("span"),z=t("learnmore"),q=document.getElementById(z)||document.createElement("a"),te=t("preprendIcon"),H=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const L=T.element;m(L),b(q,z);const se=p();g(H,te),L.append(H,V,q,se),document.body.appendChild(L)}l?(V.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function W1(){const r=id()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nR(){const r=yn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rR(){return!W1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const aR="FirebaseError";class Is extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=aR,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?oR(l,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Is(o,m,s)}}function oR(r,e){return r.replace(lR,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const lR=/\{\$([^}]+)}/g;function uR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ga(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],c=e[o];if(b0(l)&&b0(c)){if(!ga(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function b0(r){return r!==null&&typeof r=="object"}function Ru(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function cR(r,e){const t=new hR(r,e);return t.subscribe.bind(t)}class hR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");dR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Dm),o.error===void 0&&(o.error=Dm),o.complete===void 0&&(o.complete=Dm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Dm(){}function En(r){return r&&r._delegate?r._delegate:r}class pa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ua="[DEFAULT]";class fR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new K1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(r){return r===ua?void 0:r}function gR(r){return r.instantiationMode==="EAGER"}class pR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const yR={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},_R=qe.INFO,vR={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},bR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=vR[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const wR=(r,e)=>e.some(t=>r instanceof t);let w0,E0;function ER(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,tg=new WeakMap,kw=new WeakMap,Pm=new WeakMap,qg=new WeakMap;function SR(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(pi(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Nw.set(t,r)}).catch(()=>{}),qg.set(e,r),e}function AR(r){if(tg.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});tg.set(r,e)}let ng={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return tg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function RR(r){ng=r(ng)}function CR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Mm(this),e,...t);return kw.set(s,e.sort?e.sort():[e]),pi(s)}:TR().includes(r)?function(...e){return r.apply(Mm(this),e),pi(Nw.get(this))}:function(...e){return pi(r.apply(Mm(this),e))}}function IR(r){return typeof r=="function"?CR(r):(r instanceof IDBTransaction&&AR(r),wR(r,ER())?new Proxy(r,ng):r)}function pi(r){if(r instanceof IDBRequest)return SR(r);if(Pm.has(r))return Pm.get(r);const e=IR(r);return e!==r&&(Pm.set(r,e),qg.set(e,r)),e}const Mm=r=>qg.get(r);function OR(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),m=pi(c);return s&&c.addEventListener("upgradeneeded",g=>{s(pi(c.result),g.oldVersion,g.newVersion,pi(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const xR=["get","getKey","getAll","getAllKeys","count"],NR=["put","add","delete","clear"],Vm=new Map;function T0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=NR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||xR.includes(t)))return;const l=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Vm.set(e,l),l}RR(r=>({...r,get:(e,t,s)=>T0(e,t)||r.get(e,t,s),has:(e,t)=>!!T0(e,t)||r.has(e,t)}));class kR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function DR(r){return r.getComponent()?.type==="VERSION"}const rg="@firebase/app",S0="0.14.6";const Ts=new Bg("@firebase/app"),PR="@firebase/app-compat",MR="@firebase/analytics-compat",VR="@firebase/analytics",UR="@firebase/app-check-compat",jR="@firebase/app-check",LR="@firebase/auth",zR="@firebase/auth-compat",BR="@firebase/database",qR="@firebase/data-connect",HR="@firebase/database-compat",$R="@firebase/functions",FR="@firebase/functions-compat",GR="@firebase/installations",KR="@firebase/installations-compat",QR="@firebase/messaging",YR="@firebase/messaging-compat",XR="@firebase/performance",JR="@firebase/performance-compat",WR="@firebase/remote-config",ZR="@firebase/remote-config-compat",eC="@firebase/storage",tC="@firebase/storage-compat",nC="@firebase/firestore",rC="@firebase/ai",sC="@firebase/firestore-compat",iC="firebase",aC="12.6.0";const sg="[DEFAULT]",oC={[rg]:"fire-core",[PR]:"fire-core-compat",[VR]:"fire-analytics",[MR]:"fire-analytics-compat",[jR]:"fire-app-check",[UR]:"fire-app-check-compat",[LR]:"fire-auth",[zR]:"fire-auth-compat",[BR]:"fire-rtdb",[qR]:"fire-data-connect",[HR]:"fire-rtdb-compat",[$R]:"fire-fn",[FR]:"fire-fn-compat",[GR]:"fire-iid",[KR]:"fire-iid-compat",[QR]:"fire-fcm",[YR]:"fire-fcm-compat",[XR]:"fire-perf",[JR]:"fire-perf-compat",[WR]:"fire-rc",[ZR]:"fire-rc-compat",[eC]:"fire-gcs",[tC]:"fire-gcs-compat",[nC]:"fire-fst",[sC]:"fire-fst-compat",[rC]:"fire-vertex","fire-js":"fire-js",[iC]:"fire-js-all"};const Vh=new Map,lC=new Map,ig=new Map;function A0(r,e){try{r.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Po(r){const e=r.name;if(ig.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,r);for(const t of Vh.values())A0(t,r);for(const t of lC.values())A0(t,r);return!0}function Hg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function br(r){return r==null?!1:r.settings!==void 0}const uC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Au("app","Firebase",uC);class cC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}const qo=aC;function Dw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:sg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw yi.create("bad-app-name",{appName:String(o)});if(t||(t=Cw()),!t)throw yi.create("no-options");const l=Vh.get(o);if(l){if(ga(t,l.options)&&ga(s,l.config))return l;throw yi.create("duplicate-app",{appName:o})}const c=new pR(o);for(const g of ig.values())c.addComponent(g);const m=new cC(t,s,c);return Vh.set(o,m),m}function Pw(r=sg){const e=Vh.get(r);if(!e&&r===sg&&Cw())return Dw();if(!e)throw yi.create("no-app",{appName:r});return e}function _i(r,e,t){let s=oC[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(c.join(" "));return}Po(new pa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const hC="firebase-heartbeat-database",dC=1,cu="firebase-heartbeat-store";let Um=null;function Mw(){return Um||(Um=OR(hC,dC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(r=>{throw yi.create("idb-open",{originalErrorMessage:r.message})})),Um}async function fC(r){try{const t=(await Mw()).transaction(cu),s=await t.objectStore(cu).get(Vw(r));return await t.done,s}catch(e){if(e instanceof Is)Ts.warn(e.message);else{const t=yi.create("idb-get",{originalErrorMessage:e?.message});Ts.warn(t.message)}}}async function R0(r,e){try{const s=(await Mw()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,Vw(r)),await s.done}catch(t){if(t instanceof Is)Ts.warn(t.message);else{const s=yi.create("idb-set",{originalErrorMessage:t?.message});Ts.warn(s.message)}}}function Vw(r){return`${r.name}!${r.options.appId}`}const mC=1024,gC=30;class pC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _C(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>gC){const o=vC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C0(),{heartbeatsToSend:t,unsentEntries:s}=yC(this._heartbeatsCache.heartbeats),o=Mh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ts.warn(e),""}}}function C0(){return new Date().toISOString().substring(0,10)}function yC(r,e=mC){const t=[];let s=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),I0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),I0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class _C{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function I0(r){return Mh(JSON.stringify({version:2,heartbeats:r})).length}function vC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function bC(r){Po(new pa("platform-logger",e=>new kR(e),"PRIVATE")),Po(new pa("heartbeat",e=>new pC(e),"PRIVATE")),_i(rg,S0,r),_i(rg,S0,"esm2020"),_i("fire-js","")}bC("");var wC="firebase",EC="12.7.0";_i(wC,EC,"app");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vi,Uw;(function(){var r;function e(C,A){function I(){}I.prototype=A.prototype,C.F=A.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(P,k,U){for(var R=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)R[Ae-2]=arguments[Ae];return A.prototype[k].apply(P,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,I){I||(I=0);const P=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)P[k]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(k=0;k<16;++k)P[k]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=C.g[0],I=C.g[1],k=C.g[2];let U=C.g[3],R;R=A+(U^I&(k^U))+P[0]+3614090360&4294967295,A=I+(R<<7&4294967295|R>>>25),R=U+(k^A&(I^k))+P[1]+3905402710&4294967295,U=A+(R<<12&4294967295|R>>>20),R=k+(I^U&(A^I))+P[2]+606105819&4294967295,k=U+(R<<17&4294967295|R>>>15),R=I+(A^k&(U^A))+P[3]+3250441966&4294967295,I=k+(R<<22&4294967295|R>>>10),R=A+(U^I&(k^U))+P[4]+4118548399&4294967295,A=I+(R<<7&4294967295|R>>>25),R=U+(k^A&(I^k))+P[5]+1200080426&4294967295,U=A+(R<<12&4294967295|R>>>20),R=k+(I^U&(A^I))+P[6]+2821735955&4294967295,k=U+(R<<17&4294967295|R>>>15),R=I+(A^k&(U^A))+P[7]+4249261313&4294967295,I=k+(R<<22&4294967295|R>>>10),R=A+(U^I&(k^U))+P[8]+1770035416&4294967295,A=I+(R<<7&4294967295|R>>>25),R=U+(k^A&(I^k))+P[9]+2336552879&4294967295,U=A+(R<<12&4294967295|R>>>20),R=k+(I^U&(A^I))+P[10]+4294925233&4294967295,k=U+(R<<17&4294967295|R>>>15),R=I+(A^k&(U^A))+P[11]+2304563134&4294967295,I=k+(R<<22&4294967295|R>>>10),R=A+(U^I&(k^U))+P[12]+1804603682&4294967295,A=I+(R<<7&4294967295|R>>>25),R=U+(k^A&(I^k))+P[13]+4254626195&4294967295,U=A+(R<<12&4294967295|R>>>20),R=k+(I^U&(A^I))+P[14]+2792965006&4294967295,k=U+(R<<17&4294967295|R>>>15),R=I+(A^k&(U^A))+P[15]+1236535329&4294967295,I=k+(R<<22&4294967295|R>>>10),R=A+(k^U&(I^k))+P[1]+4129170786&4294967295,A=I+(R<<5&4294967295|R>>>27),R=U+(I^k&(A^I))+P[6]+3225465664&4294967295,U=A+(R<<9&4294967295|R>>>23),R=k+(A^I&(U^A))+P[11]+643717713&4294967295,k=U+(R<<14&4294967295|R>>>18),R=I+(U^A&(k^U))+P[0]+3921069994&4294967295,I=k+(R<<20&4294967295|R>>>12),R=A+(k^U&(I^k))+P[5]+3593408605&4294967295,A=I+(R<<5&4294967295|R>>>27),R=U+(I^k&(A^I))+P[10]+38016083&4294967295,U=A+(R<<9&4294967295|R>>>23),R=k+(A^I&(U^A))+P[15]+3634488961&4294967295,k=U+(R<<14&4294967295|R>>>18),R=I+(U^A&(k^U))+P[4]+3889429448&4294967295,I=k+(R<<20&4294967295|R>>>12),R=A+(k^U&(I^k))+P[9]+568446438&4294967295,A=I+(R<<5&4294967295|R>>>27),R=U+(I^k&(A^I))+P[14]+3275163606&4294967295,U=A+(R<<9&4294967295|R>>>23),R=k+(A^I&(U^A))+P[3]+4107603335&4294967295,k=U+(R<<14&4294967295|R>>>18),R=I+(U^A&(k^U))+P[8]+1163531501&4294967295,I=k+(R<<20&4294967295|R>>>12),R=A+(k^U&(I^k))+P[13]+2850285829&4294967295,A=I+(R<<5&4294967295|R>>>27),R=U+(I^k&(A^I))+P[2]+4243563512&4294967295,U=A+(R<<9&4294967295|R>>>23),R=k+(A^I&(U^A))+P[7]+1735328473&4294967295,k=U+(R<<14&4294967295|R>>>18),R=I+(U^A&(k^U))+P[12]+2368359562&4294967295,I=k+(R<<20&4294967295|R>>>12),R=A+(I^k^U)+P[5]+4294588738&4294967295,A=I+(R<<4&4294967295|R>>>28),R=U+(A^I^k)+P[8]+2272392833&4294967295,U=A+(R<<11&4294967295|R>>>21),R=k+(U^A^I)+P[11]+1839030562&4294967295,k=U+(R<<16&4294967295|R>>>16),R=I+(k^U^A)+P[14]+4259657740&4294967295,I=k+(R<<23&4294967295|R>>>9),R=A+(I^k^U)+P[1]+2763975236&4294967295,A=I+(R<<4&4294967295|R>>>28),R=U+(A^I^k)+P[4]+1272893353&4294967295,U=A+(R<<11&4294967295|R>>>21),R=k+(U^A^I)+P[7]+4139469664&4294967295,k=U+(R<<16&4294967295|R>>>16),R=I+(k^U^A)+P[10]+3200236656&4294967295,I=k+(R<<23&4294967295|R>>>9),R=A+(I^k^U)+P[13]+681279174&4294967295,A=I+(R<<4&4294967295|R>>>28),R=U+(A^I^k)+P[0]+3936430074&4294967295,U=A+(R<<11&4294967295|R>>>21),R=k+(U^A^I)+P[3]+3572445317&4294967295,k=U+(R<<16&4294967295|R>>>16),R=I+(k^U^A)+P[6]+76029189&4294967295,I=k+(R<<23&4294967295|R>>>9),R=A+(I^k^U)+P[9]+3654602809&4294967295,A=I+(R<<4&4294967295|R>>>28),R=U+(A^I^k)+P[12]+3873151461&4294967295,U=A+(R<<11&4294967295|R>>>21),R=k+(U^A^I)+P[15]+530742520&4294967295,k=U+(R<<16&4294967295|R>>>16),R=I+(k^U^A)+P[2]+3299628645&4294967295,I=k+(R<<23&4294967295|R>>>9),R=A+(k^(I|~U))+P[0]+4096336452&4294967295,A=I+(R<<6&4294967295|R>>>26),R=U+(I^(A|~k))+P[7]+1126891415&4294967295,U=A+(R<<10&4294967295|R>>>22),R=k+(A^(U|~I))+P[14]+2878612391&4294967295,k=U+(R<<15&4294967295|R>>>17),R=I+(U^(k|~A))+P[5]+4237533241&4294967295,I=k+(R<<21&4294967295|R>>>11),R=A+(k^(I|~U))+P[12]+1700485571&4294967295,A=I+(R<<6&4294967295|R>>>26),R=U+(I^(A|~k))+P[3]+2399980690&4294967295,U=A+(R<<10&4294967295|R>>>22),R=k+(A^(U|~I))+P[10]+4293915773&4294967295,k=U+(R<<15&4294967295|R>>>17),R=I+(U^(k|~A))+P[1]+2240044497&4294967295,I=k+(R<<21&4294967295|R>>>11),R=A+(k^(I|~U))+P[8]+1873313359&4294967295,A=I+(R<<6&4294967295|R>>>26),R=U+(I^(A|~k))+P[15]+4264355552&4294967295,U=A+(R<<10&4294967295|R>>>22),R=k+(A^(U|~I))+P[6]+2734768916&4294967295,k=U+(R<<15&4294967295|R>>>17),R=I+(U^(k|~A))+P[13]+1309151649&4294967295,I=k+(R<<21&4294967295|R>>>11),R=A+(k^(I|~U))+P[4]+4149444226&4294967295,A=I+(R<<6&4294967295|R>>>26),R=U+(I^(A|~k))+P[11]+3174756917&4294967295,U=A+(R<<10&4294967295|R>>>22),R=k+(A^(U|~I))+P[2]+718787259&4294967295,k=U+(R<<15&4294967295|R>>>17),R=I+(U^(k|~A))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+U&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const I=A-this.blockSize,P=this.C;let k=this.h,U=0;for(;U<A;){if(k==0)for(;U<=I;)o(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<A;)if(P[k++]=C.charCodeAt(U++),k==this.blockSize){o(this,P),k=0;break}}else for(;U<A;)if(P[k++]=C[U++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)C[A++]=this.g[I]>>>P&255;return C};function l(C,A){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=A(C)}function c(C,A){this.h=A;const I=[];let P=!0;for(let k=C.length-1;k>=0;k--){const U=C[k]|0;P&&U==A||(I[k]=U,P=!1)}this.g=I}var m={};function g(C){return-128<=C&&C<128?l(C,function(A){return new c([A|0],A<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return w;if(C<0)return q(p(-C));const A=[];let I=1;for(let P=0;C>=I;P++)A[P]=C/I|0,I*=4294967296;return new c(A,0)}function b(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return q(b(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(A,8));let P=w;for(let U=0;U<C.length;U+=8){var k=Math.min(8,C.length-U);const R=parseInt(C.substring(U,U+k),A);k<8?(k=p(Math.pow(A,k)),P=P.j(k).add(p(R))):(P=P.j(I),P=P.add(p(R)))}return P}var w=g(0),T=g(1),x=g(16777216);r=c.prototype,r.m=function(){if(z(this))return-q(this).m();let C=0,A=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);C+=(P>=0?P:4294967296+P)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(z(this))return"-"+q(this).toString(C);const A=p(Math.pow(C,6));var I=this;let P="";for(;;){const k=se(I,A).g;I=te(I,k.j(A));let U=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=k,V(I))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function z(C){return C.h==-1}r.l=function(C){return C=te(this,C),z(C)?-1:V(C)?0:1};function q(C){const A=C.g.length,I=[];for(let P=0;P<A;P++)I[P]=~C.g[P];return new c(I,~C.h).add(T)}r.abs=function(){return z(this)?q(this):this},r.add=function(C){const A=Math.max(this.g.length,C.g.length),I=[];let P=0;for(let k=0;k<=A;k++){let U=P+(this.i(k)&65535)+(C.i(k)&65535),R=(U>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);P=R>>>16,U&=65535,R&=65535,I[k]=R<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function te(C,A){return C.add(q(A))}r.j=function(C){if(V(this)||V(C))return w;if(z(this))return z(C)?q(this).j(q(C)):q(q(this).j(C));if(z(C))return q(this.j(q(C)));if(this.l(x)<0&&C.l(x)<0)return p(this.m()*C.m());const A=this.g.length+C.g.length,I=[];for(var P=0;P<2*A;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<C.g.length;k++){const U=this.i(P)>>>16,R=this.i(P)&65535,Ae=C.i(k)>>>16,Ke=C.i(k)&65535;I[2*P+2*k]+=R*Ke,H(I,2*P+2*k),I[2*P+2*k+1]+=U*Ke,H(I,2*P+2*k+1),I[2*P+2*k+1]+=R*Ae,H(I,2*P+2*k+1),I[2*P+2*k+2]+=U*Ae,H(I,2*P+2*k+2)}for(C=0;C<A;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=A;C<2*A;C++)I[C]=0;return new c(I,0)};function H(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function L(C,A){this.g=C,this.h=A}function se(C,A){if(V(A))throw Error("division by zero");if(V(C))return new L(w,w);if(z(C))return A=se(q(C),A),new L(q(A.g),q(A.h));if(z(A))return A=se(C,q(A)),new L(q(A.g),A.h);if(C.g.length>30){if(z(C)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=A;P.l(C)<=0;)I=de(I),P=de(P);var k=le(I,1),U=le(P,1);for(P=le(P,2),I=le(I,2);!V(P);){var R=U.add(P);R.l(C)<=0&&(k=k.add(I),U=R),P=le(P,1),I=le(I,1)}return A=te(C,k.j(A)),new L(k,A)}for(k=w;C.l(A)>=0;){for(I=Math.max(1,Math.floor(C.m()/A.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=p(I),R=U.j(A);z(R)||R.l(C)>0;)I-=P,U=p(I),R=U.j(A);V(U)&&(U=T),k=k.add(U),C=te(C,R)}return new L(k,C)}r.B=function(C){return se(this,C).h},r.and=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)&C.i(P);return new c(I,this.h&C.h)},r.or=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)|C.i(P);return new c(I,this.h|C.h)},r.xor=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)^C.i(P);return new c(I,this.h^C.h)};function de(C){const A=C.g.length+1,I=[];for(let P=0;P<A;P++)I[P]=C.i(P)<<1|C.i(P-1)>>>31;return new c(I,C.h)}function le(C,A){const I=A>>5;A%=32;const P=C.g.length-I,k=[];for(let U=0;U<P;U++)k[U]=A>0?C.i(U+I)>>>A|C.i(U+I+1)<<32-A:C.i(U+I);return new c(k,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Uw=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=b,vi=c}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jw,Wl,Lw,Ah,ag,zw,Bw,qw;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var v=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in v))break e;v=v[B]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function b(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function w(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,B,Q){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return y.prototype[B].apply(S,ae)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function V(h,y){for(let S=1;S<arguments.length;S++){const B=arguments[S];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=h.length||0;const Q=B.length||0;h.length=v+Q;for(let ae=0;ae<Q;ae++)h[v+ae]=B[ae]}else h.push(B)}}class z{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){c.setTimeout(()=>{throw h},0)}function te(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,v){const S=L.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var L=new z(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let de,le=!1,C=new H,A=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(I)}};function I(){for(var h;h=te();){try{h.h.call(h.g)}catch(v){q(v)}var y=L;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Ae(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(Ae,k),Ae.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(h,y,v,S,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=B,this.key=++X,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Me(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function D(h){const y={};for(const v in h)y[v]=h[v];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(h,y){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)h[v]=S[v];for(let Q=0;Q<$.length;Q++)v=$[Q],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function re(h){this.src=h,this.g={},this.h=0}re.prototype.add=function(h,y,v,S,B){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const ae=Ee(h,y,S,B);return ae>-1?(y=h[ae],v||(y.fa=!1)):(y=new oe(y,this.src,Q,!!S,B),y.fa=v,h.push(y)),y};function he(h,y){const v=y.type;if(v in h.g){var S=h.g[v],B=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(S,B,1),Q&&(me(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ee(h,y,v,S){for(let B=0;B<h.length;++B){const Q=h[B];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==S)return B}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),ht={};function Xe(h,y,v,S,B){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Xe(h,y[Q],v,S,B);return null}return v=dn(v),h&&h[Ke]?h.J(y,v,m(S)?!!S.capture:!1,B):kt(h,y,v,!1,S,B)}function kt(h,y,v,S,B,Q){if(!y)throw Error("Invalid event type");const ae=m(B)?!!B.capture:!!B;let Ne=at(h);if(Ne||(h[Ce]=Ne=new re(h)),v=Ne.add(y,v,S,ae,Q),v.proxy)return v;if(S=_n(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)U||(B=ae),B===void 0&&(B=!1),h.addEventListener(y.toString(),S,B);else if(h.attachEvent)h.attachEvent(dt(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function _n(){function h(v){return y.call(h.src,h.listener,v)}const y=Qe;return h}function Le(h,y,v,S,B){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Le(h,y[Q],v,S,B);else S=m(S)?!!S.capture:!!S,v=dn(v),h&&h[Ke]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],v=Ee(y,v,S,B),v>-1&&(me(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=at(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,v,S,B)),(v=h>-1?y[h]:null)&&Te(v))}function Te(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ke])he(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(dt(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=at(y))?(he(v,h),v.h==0&&(v.src=null,y[Ce]=null)):me(h)}}}function dt(h){return h in ht?ht[h]:ht[h]="on"+h}function Qe(h,y){if(h.da)h=!0;else{y=new Ae(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Te(h),h=v.call(S,y)}return h}function at(h){return h=h[Ce],h instanceof re?h:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function dn(h){return typeof h=="function"?h:(h[Tt]||(h[Tt]=function(y){return h.handleEvent(y)}),h[Tt])}function Ye(){P.call(this),this.i=new re(this),this.M=this,this.G=null}w(Ye,P),Ye.prototype[Ke]=!0,Ye.prototype.removeEventListener=function(h,y,v,S){Le(this,h,y,v,S)};function nt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var B=y;y=new k(S,h),ie(y,B)}B=!0;let Q,ae;if(v)for(ae=v.length-1;ae>=0;ae--)Q=y.g=v[ae],B=Sr(Q,S,!0,y)&&B;if(Q=y.g=h,B=Sr(Q,S,!0,y)&&B,B=Sr(Q,S,!1,y)&&B,v)for(ae=0;ae<v.length;ae++)Q=y.g=v[ae],B=Sr(Q,S,!1,y)&&B}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)me(v[S]);delete h.g[y],h.h--}}this.G=null},Ye.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ye.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Sr(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Q=0;Q<y.length;++Q){const ae=y[Q];if(ae&&!ae.da&&ae.capture==v){const Ne=ae.listener,It=ae.ha||ae.src;ae.fa&&he(h.i,ae),B=Ne.call(It,S)!==!1&&B}}return B&&!S.defaultPrevented}function Id(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ju(h){h.g=Id(()=>{h.g=null,h.i&&(h.i=!1,ju(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class vn extends P{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(h){P.call(this),this.h=h,this.g={}}w(ki,P);var Yo=[];function Xo(h){De(h.g,function(y,v){this.g.hasOwnProperty(v)&&Te(y)},h),h.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Xo(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=c.JSON.stringify,Od=c.JSON.parse,Lu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zu(){}function Bu(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){k.call(this,"d")}w(en,k);function Fn(){k.call(this,"c")}w(Fn,k);var Ct={},qu=null;function Sa(){return qu=qu||new Ye}Ct.Ia="serverreachability";function Hu(h){k.call(this,Ct.Ia,h)}w(Hu,k);function Ar(h){const y=Sa();nt(y,new Hu(y))}Ct.STAT_EVENT="statevent";function Di(h,y){k.call(this,Ct.STAT_EVENT,h),this.stat=y}w(Di,k);function Dt(h){const y=Sa();nt(y,new Di(y,h))}Ct.Ja="timingevent";function Rr(h,y){k.call(this,Ct.Ja,h),this.size=y}w(Rr,k);function Cr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ar(){this.g=!0}ar.prototype.ua=function(){this.g=!1};function xd(h,y,v,S,B,Q){h.info(function(){if(h.g)if(Q){var ae="",Ne=Q.split("&");for(let Ze=0;Ze<Ne.length;Ze++){var It=Ne[Ze].split("=");if(It.length>1){const vt=It[0];It=It[1];const Yn=vt.split("_");ae=Yn.length>=2&&Yn[1]=="type"?ae+(vt+"="+It+"&"):ae+(vt+"=redacted&")}}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+v+`
`+ae})}function $u(h,y,v,S,B,Q,ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+v+`
`+Q+" "+ae})}function Ir(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Nd(h,v)+(S?" "+S:"")})}function Pi(h,y){h.info(function(){return"TIMEOUT: "+y})}ar.prototype.info=function(){};function Nd(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var v=Q[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return xs(Q)}catch{return y}}var Mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wo;function Vi(){}w(Vi,zu),Vi.prototype.g=function(){return new XMLHttpRequest},Wo=new Vi;function es(h){return encodeURIComponent(String(h))}function Fu(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function or(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var Pt={},Xt={};function Or(h,y,v){h.M=1,h.A=Ui(Vt(y)),h.u=v,h.R=!0,Aa(h,null)}function Aa(h,y){h.F=Date.now(),xr(h),h.B=Vt(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Oa(v.i,"t",S),h.C=0,v=h.j.L,h.h=new lr,h.g=ac(h.j,v?y:null,!h.u),h.P>0&&(h.O=new vn(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Yo[0]=B.toString()),B=Yo);for(let Q=0;Q<B.length;Q++){const ae=Xe(v,B[Q],S||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ar(),xd(h.i,h.v,h.B,h.l,h.S,h.u)}or.prototype.ba=function(h){h=h.target;const y=this.O;y&&hr(h)==3?y.j():this.Y(h)},or.prototype.Y=function(h){try{if(h==this.g)e:{const Ne=hr(this.g),It=this.g.ya(),Ze=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Ne!=4||It==7||(It==8||Ze<=0?Ar(3):Ar(2)),Nr(this);var y=this.g.ca();this.X=y;var v=kd(this);if(this.o=y==200,$u(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var Q=S;break t}}Q=null}if(h=Q)Ir(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,kr(this,h);else{this.o=!1,this.m=3,Dt(12),kn(this),Gn(this);break e}}if(this.R){h=!0;let vt;for(;!this.K&&this.C<v.length;)if(vt=Ku(this,v),vt==Xt){Ne==4&&(this.m=4,Dt(14),h=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Pt){this.m=4,Dt(15),Ir(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ir(this.i,this.l,vt,null),kr(this,vt);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||v.length!=0||this.h.h||(this.m=1,Dt(16),h=!1),this.o=this.o&&h,!h)Ir(this.i,this.l,v,"[Invalid Chunked Response]"),kn(this),Gn(this);else if(v.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),fl(ae),ae.P=!0,Dt(11))}}else Ir(this.i,this.l,v,null),kr(this,v);Ne==4&&kn(this),this.o&&!this.K&&(Ne==4?nc(this.j,this):(this.o=!1,xr(this)))}else ns(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),kn(this),Gn(this)}}}catch{}};function kd(h){if(!Gu(h))return h.g.la();const y=tn(h.g);if(y==="")return"";let v="";const S=y.length,B=hr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return kn(h),Gn(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<S;Q++)h.h.h=!0,v+=h.h.i.decode(y[Q],{stream:!(B&&Q==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Gu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ku(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?Xt:(v=Number(y.substring(v,S)),isNaN(v)?Pt:(S+=1,S+v>y.length?Xt:(y=y.slice(S,S+v),h.C=S+v,y)))}or.prototype.cancel=function(){this.K=!0,kn(this)};function xr(h){h.T=Date.now()+h.H,Ra(h,h.H)}function Ra(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Cr(p(h.aa,h),y)}function Nr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}or.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(Ar(),Dt(17)),kn(this),this.m=2,Gn(this)):Ra(this,this.T-h)};function Gn(h){h.j.I==0||h.K||nc(h.j,h)}function kn(h){Nr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Xo(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function kr(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Pr(v.h,h))){if(!h.L&&Pr(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Pa(v),js(v);else break e;$i(v),Dt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Cr(p(v.Va,v),6e3));Dr(v.h)<=1&&v.ta&&(v.ta=void 0)}else zr(v,11)}else if((h.L||v.g==h)&&Pa(v),!R(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let Ze=B[y];const vt=Ze[0];if(!(vt<=v.K))if(v.K=vt,Ze=Ze[1],v.I==2)if(Ze[0]=="c"){v.M=Ze[1],v.ba=Ze[2];const Yn=Ze[3];Yn!=null&&(v.ka=Yn,v.j.info("VER="+v.ka));const Br=Ze[4];Br!=null&&(v.za=Br,v.j.info("SVER="+v.za));const dr=Ze[5];dr!=null&&typeof dr=="number"&&dr>0&&(S=1.5*dr,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const fr=h.g;if(fr){const Fi=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var Q=S.h;Q.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(tl(Q,Q.h),Q.h=null))}if(S.G){const Ma=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(S.wa=Ma,rt(S.J,S.G,Ma))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ae=h;if(S.na=ic(S,S.L?S.ba:null,S.W),ae.L){nl(S.h,ae);var Ne=ae,It=S.O;It&&(Ne.H=It),Ne.D&&(Nr(Ne),xr(Ne)),S.g=ae}else ec(S);v.i.length>0&&Lr(v)}else Ze[0]!="stop"&&Ze[0]!="close"||zr(v,7);else v.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?zr(v,7):hl(v):Ze[0]!="noop"&&v.l&&v.l.qa(Ze),v.A=0)}}Ar(4)}catch{}}var Mt=class{constructor(h,y){this.g=h,this.map=y}};function Zo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function el(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Dr(h){return h.h?1:h.g?h.g.size:0}function Pr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function tl(h,y){h.g?h.g.add(y):h.h=y}function nl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Zo.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function rl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return x(h.i)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let B,Q=null;S>=0?(B=h[v].substring(0,S),Q=h[v].substring(S+1)):B=h[v],y(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Dn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Dn?(this.l=h.l,Jt(this,h.j),this.o=h.o,this.g=h.g,Ns(this,h.u),this.h=h.h,sl(this,Wu(h.i)),this.m=h.m):h&&(y=String(h).match(Qu))?(this.l=!1,Jt(this,y[1]||"",!0),this.o=Mr(y[2]||""),this.g=Mr(y[3]||"",!0),Ns(this,y[4]),this.h=Mr(y[5]||"",!0),sl(this,y[6]||"",!0),this.m=Mr(y[7]||"")):(this.l=!1,this.i=new Ds(null,this.l))}Dn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ji(y,Ia,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ji(y,Ia,!0),"@"),h.push(es(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ji(v,v.charAt(0)=="/"?il:Yu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ji(v,Xu)),h.join("")},Dn.prototype.resolve=function(h){const y=Vt(this);let v=!!h.j;v?Jt(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Ns(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=y.h.lastIndexOf("/");B!=-1&&(S=y.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let ae=0;ae<B.length;){const Ne=B[ae++];Ne=="."?S&&ae==B.length&&Q.push(""):Ne==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&ae==B.length&&Q.push("")):(Q.push(Ne),S=!0)}S=Q.join("/")}else S=B}return v?y.h=S:v=h.i.toString()!=="",v?sl(y,Wu(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Vt(h){return new Dn(h)}function Jt(h,y,v){h.j=v?Mr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ns(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function sl(h,y,v){y instanceof Ds?(h.i=y,xa(h.i,h.l)):(v||(y=ji(y,ks)),h.i=new Ds(y,h.l))}function rt(h,y,v){h.i.set(y,v)}function Ui(h){return rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ji(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Tn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ia=/[#\/\?@]/g,Yu=/[#\?:]/g,il=/[#\?]/g,ks=/[#\?@]/g,Xu=/#/g;function Ds(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Sn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ca(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Ds.prototype,r.add=function(h,y){Sn(this),this.i=null,h=Ps(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ju(h,y){Sn(h),y=Ps(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function al(h,y){return Sn(h),y=Ps(h,y),h.g.has(y)}r.forEach=function(h,y){Sn(this),this.g.forEach(function(v,S){v.forEach(function(B){h.call(y,B,S,this)},this)},this)};function ol(h,y){Sn(h);let v=[];if(typeof y=="string")al(h,y)&&(v=v.concat(h.g.get(Ps(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return Sn(this),this.i=null,h=Ps(this,h),al(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=ol(this,h),h.length>0?String(h[0]):y):y};function Oa(h,y,v){Ju(h,y),v.length>0&&(h.i=null,h.g.set(Ps(h,y),x(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const B=es(v);v=ol(this,v);for(let Q=0;Q<v.length;Q++){let ae=B;v[Q]!==""&&(ae+="="+es(v[Q])),h.push(ae)}}return this.i=h.join("&")};function Wu(h){const y=new Ds;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ps(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function xa(h,y){y&&!h.j&&(Sn(h),h.i=null,h.g.forEach(function(v,S){const B=S.toLowerCase();S!=B&&(Ju(this,S),Oa(this,B,v))},h)),h.j=y}function ur(h,y){const v=new ar;if(c.Image){const S=new Image;S.onload=b(Kn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=b(Kn,v,"TestLoadImage: error",!1,y,S),S.onabort=b(Kn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(Kn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function ll(h,y){const v=new ar,S=new AbortController,B=setTimeout(()=>{S.abort(),Kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(B),Q.ok?Kn(v,"TestPingServer: ok",!0,y):Kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Kn(v,"TestPingServer: error",!1,y)})}function Kn(h,y,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Ms(){this.g=new Lu}function Vr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Vr,zu),Vr.prototype.g=function(){return new Li(this.i,this.h)};function Li(h,y){Ye.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Li,Ye),r=Li.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,cr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Na(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Na(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Vs(this):cr(this),this.readyState==3&&Na(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Vs(this))},r.Na=function(h){this.g&&(this.response=h,Vs(this))},r.ga=function(){this.g&&Vs(this)};function Vs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,cr(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qn(h){let y="";return De(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function zi(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Qn(v),typeof h=="string"?v!=null&&es(v):rt(h,y,v))}function ot(h){Ye.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ot,Ye);var Ur=/^https?$/i,ul=["POST","PUT"];r=ot.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wo.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Bi(this,Q);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())v.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ul,y,void 0)>=0)||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of v)this.g.setRequestHeader(Q,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Bi(this,Q)}};function Bi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,cl(h),ts(h)}function cl(h){h.A||(h.A=!0,nt(h,"complete"),nt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,nt(this,"complete"),nt(this,"abort"),ts(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},r.Xa=function(){qi(this)};function qi(h){if(h.h&&typeof l<"u"){if(h.v&&hr(h)==4)setTimeout(h.Ca.bind(h),0);else if(nt(h,"readystatechange"),hr(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=Q===0){let ae=String(h.D).match(Qu)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),S=!Ur.test(ae?ae.toLowerCase():"")}v=S}if(v)nt(h,"complete"),nt(h,"success");else{h.o=6;try{var B=hr(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",cl(h)}}finally{ts(h)}}}}function ts(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||nt(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function hr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return hr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Od(y)}};function tn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(h){const y={};h=(h.g&&hr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var v=Fu(h[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[B]||[];y[B]=Q,Q.push(v)}Me(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Us(h){this.za=0,this.i=[],this.j=new ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jr("baseRetryDelayMs",5e3,h),this.Za=jr("retryDelaySeedMs",1e4,h),this.Ta=jr("forwardChannelMaxRetries",2,h),this.va=jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Zo(h&&h.concurrentRequestLimit),this.Ba=new Ms,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Us.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,S){Dt(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=ic(this,null,this.W),Lr(this)};function hl(h){if(ka(h),h.I==3){var y=h.V++,v=Vt(h.J);if(rt(v,"SID",h.M),rt(v,"RID",y),rt(v,"TYPE","terminate"),Hi(h,v),y=new or(h,h.j,y),y.M=2,y.A=Ui(Vt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=ac(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xr(y)}sc(h)}function js(h){h.g&&(fl(h),h.g.cancel(),h.g=null)}function ka(h){js(h),h.v&&(c.clearTimeout(h.v),h.v=null),Pa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Lr(h){if(!el(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||A(),le||(de(),le=!0),C.add(y,h),h.D=0}}function Da(h,y){return Dr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Cr(p(h.Ea,h,y),rc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new or(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=D(Q),ie(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Zu(this,B,y),v=Vt(this.J),rt(v,"RID",h),rt(v,"CVER",22),this.G&&rt(v,"X-HTTP-Session-Id",this.G),Hi(this,v),Q&&(this.R?y="headers="+es(Qn(Q))+"&"+y:this.u&&zi(v,this.u,Q)),tl(this.h,B),this.Ra&&rt(v,"TYPE","init"),this.S?(rt(v,"$req",y),rt(v,"SID","null"),B.U=!0,Or(B,v,null)):Or(B,v,y),this.I=2}}else this.I==3&&(h?dl(this,h):this.i.length==0||el(this.h)||dl(this))};function dl(h,y){var v;y?v=y.l:v=h.V++;const S=Vt(h.J);rt(S,"SID",h.M),rt(S,"RID",v),rt(S,"AID",h.K),Hi(h,S),h.u&&h.o&&zi(S,h.u,h.o),v=new or(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Zu(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tl(h.h,v),Or(v,S,y)}function Hi(h,y){h.H&&De(h.H,function(v,S){rt(y,S,v)}),h.l&&De({},function(v,S){rt(y,S,v)})}function Zu(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ne=-1;for(;;){const It=["count="+v];Ne==-1?v>0?(Ne=B[0].g,It.push("ofs="+Ne)):Ne=0:It.push("ofs="+Ne);let Ze=!0;for(let vt=0;vt<v;vt++){var Q=B[vt].g;const Yn=B[vt].map;if(Q-=Ne,Q<0)Ne=Math.max(0,B[vt].g-100),Ze=!1;else try{Q="req"+Q+"_"||"";try{var ae=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Br,dr]of ae){let fr=dr;m(dr)&&(fr=xs(dr)),It.push(Q+Br+"="+encodeURIComponent(fr))}}catch(Br){throw It.push(Q+"type="+encodeURIComponent("_badmap")),Br}}catch{S&&S(Yn)}}if(Ze){ae=It.join("&");break e}}ae=void 0}return h=h.i.splice(0,v),y.G=h,ae}function ec(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||A(),le||(de(),le=!0),C.add(y,h),h.A=0}}function $i(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Cr(p(h.Da,h),rc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Cr(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),js(this),tc(this))};function fl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function tc(h){h.g=new or(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Vt(h.na);rt(y,"RID","rpc"),rt(y,"SID",h.M),rt(y,"AID",h.K),rt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&rt(y,"TO",h.ia),rt(y,"TYPE","xmlhttp"),Hi(h,y),h.u&&h.o&&zi(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Ui(Vt(y)),v.u=null,v.R=!0,Aa(v,h)}r.Va=function(){this.C!=null&&(this.C=null,js(this),$i(this),Dt(19))};function Pa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function nc(h,y){var v=null;if(h.g==y){Pa(h),fl(h),h.g=null;var S=2}else if(Pr(h.h,y))v=y.G,nl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;S=Sa(),nt(S,new Rr(S,v)),Lr(h)}else ec(h);else if(B=y.m,B==3||B==0&&y.X>0||!(S==1&&Da(h,y)||S==2&&$i(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),B){case 1:zr(h,5);break;case 4:zr(h,10);break;case 3:zr(h,6);break;default:zr(h,2)}}}function rc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function zr(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const B=!S;S=new Dn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(S,"https"),Ui(S),B?ur(S.toString(),v):ll(S.toString(),v)}else Dt(2);h.I=0,h.l&&h.l.pa(y),sc(h),ka(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function sc(h){if(h.I=0,h.ja=[],h.l){const y=rl(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function ic(h,y,v){var S=v instanceof Dn?Vt(v):new Dn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ns(S,S.u);else{var B=c.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Q=new Dn(null);S&&Jt(Q,S),y&&(Q.g=y),B&&Ns(Q,B),v&&(Q.h=v),S=Q}return v=h.G,y=h.wa,v&&y&&rt(S,v,y),rt(S,"VER",h.ka),Hi(h,S),S}function ac(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ot(new Vr({ab:v})):new ot(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}r=oc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ls(){}Ls.prototype.g=function(h,y){return new bn(h,y)};function bn(h,y){Ye.call(this),this.g=new Us(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new rs(this)}w(bn,Ye),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){hl(this.g)},bn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=xs(h),h=v);y.i.push(new Mt(y.Ya++,h)),y.I==3&&Lr(y)},bn.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,bn.Z.N.call(this)};function lc(h){en.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(lc,en);function uc(){Fn.call(this),this.status=1}w(uc,Fn);function rs(h){this.g=h}w(rs,oc),rs.prototype.ra=function(){nt(this.g,"a")},rs.prototype.qa=function(h){nt(this.g,new lc(h))},rs.prototype.pa=function(h){nt(this.g,new uc)},rs.prototype.oa=function(){nt(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,qw=function(){return new Ls},Bw=function(){return Sa()},zw=Ct,ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,Ah=Mi,Jo.COMPLETE="complete",Lw=Jo,Bu.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Wl=Bu,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,jw=ot}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const x0="@firebase/firestore",N0="4.9.3";class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");let Ho="12.7.0";const ya=new Bg("@firebase/firestore");function _o(){return ya.logLevel}function ce(r,...e){if(ya.logLevel<=qe.DEBUG){const t=e.map($g);ya.debug(`Firestore (${Ho}): ${r}`,...t)}}function Ss(r,...e){if(ya.logLevel<=qe.ERROR){const t=e.map($g);ya.error(`Firestore (${Ho}): ${r}`,...t)}}function Mo(r,...e){if(ya.logLevel<=qe.WARN){const t=e.map($g);ya.warn(`Firestore (${Ho}): ${r}`,...t)}}function $g(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Hw(r,s,t)}function Hw(r,e,t){let s=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ss(s),new Error(s)}function tt(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Hw(e,o,s)}function xe(r,e){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $w{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class SC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AC{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new bi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new bi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string",31837,{l:s}),new $w(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class RC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new RC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function He(r,e){return r<e?-1:r>e?1:0}function og(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return jm(o)===jm(l)?He(o,l):jm(o)?1:-1}return He(r.length,e.length)}const xC=55296,NC=57343;function jm(r){const e=r.charCodeAt(0);return e>=xC&&e<=NC}function Vo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const D0="__name__";class Gr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Gr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const s=Gr.isNumericId(e),o=Gr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Gr.extractNumericId(e).compare(Gr.extractNumericId(t)):og(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class gt extends Gr{construct(e,t,s){return new gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const kC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Gr{construct(e,t,s){return new cn(e,t,s)}static isValidIdentifier(e){return kC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D0}static keyField(){return new cn([D0])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(l(),o++)}if(l(),c)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(gt.fromString(e))}static fromName(e){return new _e(gt.fromString(e).popFirst(5))}static empty(){return new _e(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new gt(e.slice()))}}function Fw(r,e,t){if(!t)throw new ue(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DC(r,e,t,s){if(e===!0&&s===!0)throw new ue(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function P0(r){if(!_e.isDocumentKey(r))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function M0(r){if(_e.isDocumentKey(r))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ad(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function _a(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ad(r);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function $t(r,e){const t={typeString:r};return e&&(t.value=e),t}function Cu(r,e){if(!Gw(r))throw new ue(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ue(ee.INVALID_ARGUMENT,t);return!0}const V0=-62135596800,U0=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*U0);return new _t(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<V0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U0}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:$t("string",_t._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new _t(0,0))}static max(){return new Ie(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hu=-1;function PC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new _t(t+1,0):new _t(t,s));return new Ti(o,_e.empty(),e)}function MC(r){return new Ti(r.readTime,r.key,hu)}class Ti{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ti(Ie.min(),_e.empty(),hu)}static max(){return new Ti(Ie.max(),_e.empty(),hu)}}function VC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:He(r.largestBatchId,e.largestBatchId))}const UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $o(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==UC)throw r;ce("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let o=0,l=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++l,c&&l===o&&t()}),(g=>s(g)))})),c=!0,l===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((o=>o?ne.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,o)=>{const l=e.length,c=new Array(l);let m=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((b=>{c[p]=b,++m,m===l&&s(c)}),(b=>o(b)))}}))}static doWhile(e,t){return new ne(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function LC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(r){return r.name==="IndexedDbTransactionError"}class od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}od.ce=-1;const Gg=-1;function ld(r){return r==null}function Uh(r){return r===0&&1/r==-1/0}function zC(r){return typeof r=="number"&&Number.isInteger(r)&&!Uh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Kw="";function BC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=j0(e)),e=qC(r.get(t),e);return j0(e)}function qC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Kw:t+="";break;default:t+=l}}return t}function j0(r){return r+Kw+""}function L0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Qw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Et{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mh(this.root,e,this.comparator,!0)}}class mh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new un(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $n{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new $n([])}unionWith(e){let t=new Qt(cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Yw("Invalid base64 string: "+l):l}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const HC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(r){if(tt(!!r,39018),typeof r=="string"){let e=0;const t=HC.exec(r);if(tt(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?hn.fromBase64String(r):hn.fromUint8Array(r)}const Xw="server_timestamp",Jw="__type__",Ww="__previous_value__",Zw="__local_write_time__";function Kg(r){return(r?.mapValue?.fields||{})[Jw]?.stringValue===Xw}function ud(r){const e=r.mapValue.fields[Ww];return Kg(e)?ud(e):e}function du(r){const e=Si(r.mapValue.fields[Zw].timestampValue);return new _t(e.seconds,e.nanos)}class $C{constructor(e,t,s,o,l,c,m,g,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=b}}const jh="(default)";class fu{constructor(e,t){this.projectId=e,this.database=t||jh}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===jh}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}const eE="__type__",FC="__max__",gh={mapValue:{}},tE="__vector__",Lh="value";function Ri(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Kg(r)?4:KC(r)?9007199254740991:GC(r)?10:11:Se(28295,{value:r})}function Zr(r,e){if(r===e)return!0;const t=Ri(r);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return du(r).isEqual(du(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Si(o.timestampValue),m=Si(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ai(o.bytesValue).isEqual(Ai(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Nt(o.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(o.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Nt(o.integerValue)===Nt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Nt(o.doubleValue),m=Nt(l.doubleValue);return c===m?Uh(c)===Uh(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},m=l.mapValue.fields||{};if(L0(c)!==L0(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Zr(c[g],m[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function mu(r,e){return(r.values||[]).find((t=>Zr(t,e)))!==void 0}function Uo(r,e){if(r===e)return 0;const t=Ri(r),s=Ri(e);if(t!==s)return He(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=Nt(l.integerValue||l.doubleValue),g=Nt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return B0(r.timestampValue,e.timestampValue);case 4:return B0(du(r),du(e));case 5:return og(r.stringValue,e.stringValue);case 6:return(function(l,c){const m=Ai(l),g=Ai(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const b=He(m[p],g[p]);if(b!==0)return b}return He(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=He(Nt(l.latitude),Nt(c.latitude));return m!==0?m:He(Nt(l.longitude),Nt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return q0(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const m=l.fields||{},g=c.fields||{},p=m[Lh]?.arrayValue,b=g[Lh]?.arrayValue,w=He(p?.values?.length||0,b?.values?.length||0);return w!==0?w:q0(p,b)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===gh.mapValue&&c===gh.mapValue)return 0;if(l===gh.mapValue)return 1;if(c===gh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),p=c.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const T=og(g[w],b[w]);if(T!==0)return T;const x=Uo(m[g[w]],p[b[w]]);if(x!==0)return x}return He(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function B0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const t=Si(r),s=Si(e),o=He(t.seconds,s.seconds);return o!==0?o:He(t.nanos,s.nanos)}function q0(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Uo(t[o],s[o]);if(l)return l}return He(t.length,s.length)}function jo(r){return lg(r)}function lg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Si(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ai(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=lg(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${lg(t.fields[c])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Rh(r){switch(Ri(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ud(r);return e?16+Rh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Rh(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return xi(s.fields,((l,c)=>{o+=l.length+Rh(c)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function H0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ug(r){return!!r&&"integerValue"in r}function Qg(r){return!!r&&"arrayValue"in r}function $0(r){return!!r&&"nullValue"in r}function F0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ch(r){return!!r&&"mapValue"in r}function GC(r){return(r?.mapValue?.fields||{})[eE]?.stringValue===tE}function ru(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return xi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ru(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(r.arrayValue.values[t]);return e}return{...r}}function KC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FC}class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=cn.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=ru(c):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){xi(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Nn(ru(this.value))}}function nE(r){const e=[];return xi(r.fields,((t,s)=>{const o=new cn([t]);if(Ch(s)){const l=nE(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new $n(e)}class pn{constructor(e,t,s,o,l,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new pn(e,0,Ie.min(),Ie.min(),Ie.min(),Nn.empty(),0)}static newFoundDocument(e,t,s,o){return new pn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new pn(e,2,t,Ie.min(),Ie.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Ie.min(),Ie.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zh{constructor(e,t){this.position=e,this.inclusive=t}}function G0(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(c.referenceValue),t.key):s=Uo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function K0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Zr(r.position[t],e.position[t]))return!1;return!0}class gu{constructor(e,t="asc"){this.field=e,this.dir=t}}function QC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class rE{}class Ht extends rE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new XC(e,t,s):t==="array-contains"?new ZC(e,s):t==="in"?new eI(e,s):t==="not-in"?new tI(e,s):t==="array-contains-any"?new nI(e,s):new Ht(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new JC(e,s):new WC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends rE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tr(e,t)}matches(e){return sE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sE(r){return r.op==="and"}function iE(r){return YC(r)&&sE(r)}function YC(r){for(const e of r.filters)if(e instanceof Tr)return!1;return!0}function cg(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(iE(r))return r.filters.map((e=>cg(e))).join(",");{const e=r.filters.map((t=>cg(t))).join(",");return`${r.op}(${e})`}}function aE(r,e){return r instanceof Ht?(function(s,o){return o instanceof Ht&&s.op===o.op&&s.field.isEqual(o.field)&&Zr(s.value,o.value)})(r,e):r instanceof Tr?(function(s,o){return o instanceof Tr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,m)=>l&&aE(c,o.filters[m])),!0):!1})(r,e):void Se(19439)}function oE(r){return r instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof Tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(oE).join(" ,")+"}"})(r):"Filter"}class XC extends Ht{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class JC extends Ht{constructor(e,t){super(e,"in",t),this.keys=lE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class WC extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=lE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lE(r,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class ZC extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qg(t)&&mu(t.arrayValue,this.value)}}class eI extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mu(this.value.arrayValue,t)}}class tI extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mu(this.value.arrayValue,t)}}class nI extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>mu(this.value.arrayValue,s)))}}class rI{constructor(e,t=null,s=[],o=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function Q0(r,e=null,t=[],s=[],o=null,l=null,c=null){return new rI(r,e,t,s,o,l,c)}function Yg(r){const e=xe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>cg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>jo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>jo(s))).join(",")),e.Te=t}return e.Te}function Xg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!QC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!aE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!K0(r.startAt,e.startAt)&&K0(r.endAt,e.endAt)}function hg(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Go{constructor(e,t=null,s=[],o=[],l=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sI(r,e,t,s,o,l,c,m){return new Go(r,e,t,s,o,l,c,m)}function uE(r){return new Go(r)}function Y0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cE(r){return r.collectionGroup!==null}function su(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Qt(cn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gu(l,s))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new gu(cn.keyField(),s))}return e.Ie}function Kr(r){const e=xe(r);return e.Ee||(e.Ee=iI(e,su(r))),e.Ee}function iI(r,e){if(r.limitType==="F")return Q0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new gu(o.field,l)}));const t=r.endAt?new zh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new zh(r.startAt.position,r.startAt.inclusive):null;return Q0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function dg(r,e){const t=r.filters.concat([e]);return new Go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function fg(r,e,t){return new Go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function cd(r,e){return Xg(Kr(r),Kr(e))&&r.limitType===e.limitType}function hE(r){return`${Yg(Kr(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>oE(o))).join(", ")}]`),ld(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${s})`})(Kr(r))}; limitType=${r.limitType})`}function hd(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of su(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=G0(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,su(s),o)||s.endAt&&!(function(c,m,g){const p=G0(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,su(s),o))})(r,e)}function aI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dE(r){return(e,t)=>{let s=!1;for(const o of su(r)){const l=oI(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function oI(r,e,t){const s=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,m){const g=c.data.field(l),p=m.data.field(l);return g!==null&&p!==null?Uo(g,p):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:r.dir})}}class wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Qw(this.inner)}size(){return this.innerSize}}const lI=new Et(_e.comparator);function As(){return lI}const fE=new Et(_e.comparator);function Zl(...r){let e=fE;for(const t of r)e=e.insert(t.key,t);return e}function mE(r){let e=fE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function fa(){return iu()}function gE(){return iu()}function iu(){return new wa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const uI=new Et(_e.comparator),cI=new Qt(_e.comparator);function $e(...r){let e=cI;for(const t of r)e=e.add(t);return e}const hI=new Qt(He);function dI(){return hI}function Jg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function pE(r){return{integerValue:""+r}}function fI(r,e){return zC(e)?pE(e):Jg(r,e)}class dd{constructor(){this._=void 0}}function mI(r,e,t){return r instanceof Bh?(function(o,l){const c={fields:{[Jw]:{stringValue:Xw},[Zw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Kg(l)&&(l=ud(l)),l&&(c.fields[Ww]=l),{mapValue:c}})(t,e):r instanceof pu?_E(r,e):r instanceof yu?vE(r,e):(function(o,l){const c=yE(o,l),m=X0(c)+X0(o.Ae);return ug(c)&&ug(o.Ae)?pE(m):Jg(o.serializer,m)})(r,e)}function gI(r,e,t){return r instanceof pu?_E(r,e):r instanceof yu?vE(r,e):t}function yE(r,e){return r instanceof qh?(function(s){return ug(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Bh extends dd{}class pu extends dd{constructor(e){super(),this.elements=e}}function _E(r,e){const t=bE(e);for(const s of r.elements)t.some((o=>Zr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class yu extends dd{constructor(e){super(),this.elements=e}}function vE(r,e){let t=bE(e);for(const s of r.elements)t=t.filter((o=>!Zr(o,s)));return{arrayValue:{values:t}}}class qh extends dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function X0(r){return Nt(r.integerValue||r.doubleValue)}function bE(r){return Qg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function pI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof pu&&o instanceof pu||s instanceof yu&&o instanceof yu?Vo(s.elements,o.elements,Zr):s instanceof qh&&o instanceof qh?Zr(s.Ae,o.Ae):s instanceof Bh&&o instanceof Bh})(r.transform,e.transform)}class yI{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class fd{}function wE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wg(r.key,Er.none()):new Iu(r.key,r.data,Er.none());{const t=r.data,s=Nn.empty();let o=new Qt(cn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Ni(r.key,s,new $n(o.toArray()),Er.none())}}function _I(r,e,t){r instanceof Iu?(function(o,l,c){const m=o.value.clone(),g=W0(o.fieldTransforms,l,c.transformResults);m.setAll(g),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ni?(function(o,l,c){if(!Ih(o.precondition,l))return void l.convertToUnknownDocument(c.version);const m=W0(o.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(EE(o)),g.setAll(m),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function au(r,e,t,s){return r instanceof Iu?(function(l,c,m,g){if(!Ih(l.precondition,c))return m;const p=l.value.clone(),b=Z0(l.fieldTransforms,g,c);return p.setAll(b),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ni?(function(l,c,m,g){if(!Ih(l.precondition,c))return m;const p=Z0(l.fieldTransforms,g,c),b=c.data;return b.setAll(EE(l)),b.setAll(p),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(r,e,t,s):(function(l,c,m){return Ih(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function vI(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=yE(s.transform,o||null);l!=null&&(t===null&&(t=Nn.empty()),t.set(s.field,l))}return t||null}function J0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((l,c)=>pI(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Iu extends fd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends fd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function EE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function W0(r,e,t){const s=new Map;tt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,m=e.data.field(l.field);s.set(l.field,gI(c,m,t[o]))}return s}function Z0(r,e,t){const s=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);s.set(o.field,mI(l,c,e))}return s}class Wg extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bI extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wI{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&_I(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=gE();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(o.key)?null:m;const g=wE(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,s)=>J0(t,s)))&&Vo(this.baseMutations,e.baseMutations,((t,s)=>J0(t,s)))}}class Zg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return uI})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Zg(e,t,s,o)}}class EI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class TI{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bt,Ge;function SI(r){switch(r){case ee.OK:return Se(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function TE(r){if(r===void 0)return Ss("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Bt.OK:return ee.OK;case Bt.CANCELLED:return ee.CANCELLED;case Bt.UNKNOWN:return ee.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ee.INTERNAL;case Bt.UNAVAILABLE:return ee.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ee.NOT_FOUND;case Bt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Bt.ABORTED:return ee.ABORTED;case Bt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Bt.DATA_LOSS:return ee.DATA_LOSS;default:return Se(39323,{code:r})}}(Ge=Bt||(Bt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function AI(){return new TextEncoder}const RI=new vi([4294967295,4294967295],0);function eb(r){const e=AI().encode(r),t=new Uw;return t.update(e),new Uint8Array(t.digest())}function tb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vi([t,s],0),new vi([o,l],0)]}class ep{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vi.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(vi.fromNumber(s)));return o.compare(RI)===1&&(o=new vi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eb(e),[s,o]=tb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ep(l,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=eb(e),[s,o]=tb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class md{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new md(Ie.min(),o,new Et(He),As(),$e())}}class Ou{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ou(s,t,$e(),$e(),$e())}}class Oh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class SE{constructor(e,t){this.targetId=e,this.Ce=t}}class AE{constructor(e,t,s=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class nb{constructor(){this.ve=0,this.Fe=rb(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:l})}})),new Ou(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=rb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CI{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=ph(),this.He=ph(),this.Ye=new Et(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(hg(l))if(s===0){const c=new _e(l.path);this.et(t,c,pn.newNoDocument(c,Ie.min()))}else tt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,m;try{c=Ai(s).toUint8Array()}catch(g){if(g instanceof Yw)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ep(c,o,l)}catch(g){return Mo(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&hg(m.target)){const g=new _e(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=$e();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new md(e,t,this.Ye,this.je,s);return this.je=As(),this.Je=ph(),this.He=ph(),this.Ye=new Et(He),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ph(){return new Et(_e.comparator)}function rb(){return new Et(_e.comparator)}const II={asc:"ASCENDING",desc:"DESCENDING"},OI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xI={and:"AND",or:"OR"};class NI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mg(r,e){return r.useProto3Json||ld(e)?e:{value:e}}function Hh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function kI(r,e){return Hh(r,e.toTimestamp())}function Qr(r){return tt(!!r,49232),Ie.fromTimestamp((function(t){const s=Si(t);return new _t(s.seconds,s.nanos)})(r))}function tp(r,e){return gg(r,e).canonicalString()}function gg(r,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function CE(r){const e=gt.fromString(r);return tt(kE(e),10190,{key:e.toString()}),e}function pg(r,e){return tp(r.databaseId,e.path)}function Lm(r,e){const t=CE(e);if(t.get(1)!==r.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(OE(t))}function IE(r,e){return tp(r.databaseId,e)}function DI(r){const e=CE(r);return e.length===4?gt.emptyPath():OE(e)}function yg(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function OE(r){return tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function sb(r,e,t){return{name:pg(r,e),fields:t.value.mapValue.fields}}function PI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Se(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,b){return p.useProto3Json?(tt(b===void 0||typeof b=="string",58123),hn.fromBase64String(b||"")):(tt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),hn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const b=p.code===void 0?ee.UNKNOWN:TE(p.code);return new ue(b,p.message||"")})(c);t=new AE(s,o,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Lm(r,s.document.name),l=Qr(s.document.updateTime),c=s.document.createTime?Qr(s.document.createTime):Ie.min(),m=new Nn({mapValue:{fields:s.document.fields}}),g=pn.newFoundDocument(o,l,c,m),p=s.targetIds||[],b=s.removedTargetIds||[];t=new Oh(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Lm(r,s.document),l=s.readTime?Qr(s.readTime):Ie.min(),c=pn.newNoDocument(o,l),m=s.removedTargetIds||[];t=new Oh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Lm(r,s.document),l=s.removedTargetIds||[];t=new Oh([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new TI(o,l),m=s.targetId;t=new SE(m,c)}}return t}function MI(r,e){let t;if(e instanceof Iu)t={update:sb(r,e.key,e.value)};else if(e instanceof Wg)t={delete:pg(r,e.key)};else if(e instanceof Ni)t={update:sb(r,e.key,e.data),updateMask:$I(e.fieldMask)};else{if(!(e instanceof bI))return Se(16599,{Vt:e.type});t={verify:pg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const m=c.transform;if(m instanceof Bh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof pu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof qh)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Se(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:kI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function VI(r,e){return r&&r.length>0?(tt(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?Qr(o.updateTime):Qr(l);return c.isEqual(Ie.min())&&(c=Qr(l)),new yI(c,o.transformResults||[])})(t,e)))):[]}function UI(r,e){return{documents:[IE(r,e.path)]}}function jI(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=IE(r,o);const l=(function(p){if(p.length!==0)return NE(Tr.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:bo(T.field),direction:BI(T.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=mg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function LI(r){let e=DI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){tt(s===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(w){const T=xE(w);return T instanceof Tr&&iE(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((T=>(function(V){return new gu(wo(V.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let m=null;t.limit&&(m=(function(w){let T;return T=typeof w=="object"?w.value:w,ld(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(w){const T=!!w.before,x=w.values||[];return new zh(x,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const T=!w.before,x=w.values||[];return new zh(x,T)})(t.endAt)),sI(e,o,c,l,m,"F",g,p)}function zI(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=wo(t.unaryFilter.field);return Ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return Ht.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wo(t.unaryFilter.field);return Ht.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ht.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Tr.create(t.compositeFilter.filters.map((s=>xE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function BI(r){return II[r]}function qI(r){return OI[r]}function HI(r){return xI[r]}function bo(r){return{fieldPath:r.canonicalString()}}function wo(r){return cn.fromServerFormat(r.fieldPath)}function NE(r){return r instanceof Ht?(function(t){if(t.op==="=="){if(F0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if($0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(F0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if($0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:qI(t.op),value:t.value}}})(r):r instanceof Tr?(function(t){const s=t.getFilters().map((o=>NE(o)));return s.length===1?s[0]:{compositeFilter:{op:HI(t.op),filters:s}}})(r):Se(54877,{filter:r})}function $I(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class gi{constructor(e,t,s,o,l=Ie.min(),c=Ie.min(),m=hn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FI{constructor(e){this.yt=e}}function GI(r){const e=LI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fg(e,e.limit,"L"):e}class KI{constructor(){this.Cn=new QI}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ti.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class QI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Qt(gt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Qt(gt.comparator)).toArray()}}const ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DE=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(DE,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}const ab="LruGarbageCollector",YI=1048576;function ob([r,e],[t,s]){const o=He(r,t);return o===0?He(e,s):o}class XI{constructor(e){this.Ir=e,this.buffer=new Qt(ob),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ob(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(ab,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?ce(ab,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Vr(3e5)}))}}class WI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(od.ce);const s=new XI(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ib)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ib):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,m,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(s=w,m=Date.now(),this.removeTargets(e,s,t)))).next((w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(p=Date.now(),_o()<=qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function ZI(r,e){return new WI(r,e)}class e2{constructor(){this.changes=new wa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class t2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class n2{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&au(s.mutation,o,$n.empty(),_t.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const o=fa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Zl();return l.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=fa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let l=As();const c=iu(),m=(function(){return iu()})();return t.forEach(((g,p)=>{const b=s.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Ni)?l=l.insert(p.key,p):b!==void 0?(c.set(p.key,b.mutation.getFieldMask()),au(b.mutation,p,b.mutation.getFieldMask(),_t.now())):c.set(p.key,$n.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,b)=>c.set(p,b))),t.forEach(((p,b)=>m.set(p,new t2(b,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=iu();let o=new Et(((c,m)=>c-m)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let b=s.get(g)||$n.empty();b=m.applyToLocalView(p,b),s.set(g,b);const w=(o.get(m.batchId)||$e()).add(g);o=o.insert(m.batchId,w)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,b=g.value,w=gE();b.forEach((T=>{if(!l.has(T)){const x=wE(t.get(T),s.get(T));x!==null&&w.set(T,x),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ne.resolve(fa());let m=hu,g=l;return c.next((p=>ne.forEach(p,((b,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),l.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,$e()))).next((b=>({batchId:m,changes:mE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let o=Zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Zl();return this.indexManager.getCollectionParents(e,l).next((m=>ne.forEach(m,(g=>{const p=(function(w,T){return new Go(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((b=>{b.forEach(((w,T)=>{c=c.insert(w,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((g,p)=>{const b=p.getKey();c.get(b)===null&&(c=c.insert(b,pn.newInvalidDocument(b)))}));let m=Zl();return c.forEach(((g,p)=>{const b=l.get(g);b!==void 0&&au(b.mutation,p,$n.empty(),_t.now()),hd(t,p)&&(m=m.insert(g,p))})),m}))}}class r2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Qr(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:GI(o.bundledQuery),readTime:Qr(o.readTime)}})(t)),ne.resolve()}}class s2{constructor(){this.overlays=new Et(_e.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fa();return ne.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=fa(),l=t.length+1,c=new _e(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Et(((p,b)=>p-b));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let b=l.get(p.largestBatchId);b===null&&(b=fa(),l=l.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const m=fa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,b)=>m.set(p,b))),!(m.size()>=o)););return ne.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new EI(t,s));let l=this.qr.get(t);l===void 0&&(l=$e(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class i2{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}class np{constructor(){this.Qr=new Qt(Zt.$r),this.Ur=new Qt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Zt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new gt([])),s=new Zt(t,e),o=new Zt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new gt([])),s=new Zt(t,e),o=new Zt(t,e+1);let l=$e();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Zt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}class a2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Zt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new wI(l,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Zt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Gg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Zt(t,0),o=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);l.push(m)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qt(He);return t.forEach((o=>{const l=new Zt(o,0),c=new Zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const c=new Zt(new _e(l),0);let m=new Qt(He);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),ne.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(o=>{const l=new Zt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Zt(t,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class o2{constructor(e){this.ri=e,this.docs=(function(){return new Et(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():pn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=As();const c=t.path,m=new _e(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||VC(MC(b),s)<=0||(o.has(b.key)||hd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Se(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new l2(this)}getSize(e){return ne.resolve(this.size)}}class l2 extends e2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class u2{constructor(e){this.persistence=e,this.si=new wa((t=>Yg(t)),Xg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new np,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(l).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}class PE{constructor(e,t){this.ui={},this.overlays={},this.ci=new od(0),this.li=!1,this.li=!0,this.hi=new i2,this.referenceDelegate=e(this),this.Pi=new u2(this),this.indexManager=new KI,this.remoteDocumentCache=(function(o){return new o2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new FI(t),this.Ii=new r2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new a2(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new c2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class c2 extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Ri=new np,this.Vi=null}static mi(e){return new rp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=_e.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.pi=new wa((s=>BC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=ZI(this,t)}static mi(e,t){return new $h(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?ne.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rh(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=$e(),o=$e();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sp(e,t.fromCache,s,o)}}class h2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class d2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rR()?8:LC(yn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new h2;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(_o()<=qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(_o()<=qe.DEBUG&&ce("QueryEngine","Query:",vo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(_o()<=qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):ne.resolve())}ys(e,t){if(Y0(t))return ne.resolve(null);let s=Kr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=fg(t,null,"F"),s=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=$e(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,fg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return Y0(t)||o.isEqual(Ie.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?ne.resolve(null):(_o()<=qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.vs(e,c,t,PC(o,hu)).next((m=>m)))}))}Ds(e,t){let s=new Qt(dE(e));return t.forEach(((o,l)=>{hd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return _o()<=qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",vo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ti.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const ip="LocalStore",f2=3e8;class m2{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(He),this.xs=new wa((l=>Yg(l)),Xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function g2(r,e,t,s){return new m2(r,e,t,s)}async function ME(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],m=[];let g=$e();for(const p of o){c.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of l){m.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function p2(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,b){const w=p.batch,T=w.keys();let x=ne.resolve();return T.forEach((V=>{x=x.next((()=>b.getEntry(g,V))).next((z=>{const q=p.docVersions.get(V);tt(q!==null,48541),z.version.compareTo(q)<0&&(w.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),b.addEntry(z)))}))})),x.next((()=>m.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=$e();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function VE(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function y2(r,e){const t=xe(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((b,w)=>{const T=o.get(w);if(!T)return;m.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,w))));let x=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?x=x.withResumeToken(hn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):b.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(b.resumeToken,s)),o=o.insert(w,x),(function(z,q,te){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=f2?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(T,x,b)&&m.push(t.Pi.updateTargetData(l,x))}));let g=As(),p=$e();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),m.push(_2(l,c,e.documentUpdates).next((b=>{g=b.ks,p=b.qs}))),!s.isEqual(Ie.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(b)}return ne.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function _2(r,e,t){let s=$e(),o=$e();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let c=As();return t.forEach(((m,g)=>{const p=l.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ce(ip,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function v2(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Gg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function b2(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,ne.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new gi(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function _g(r,e,t){const s=xe(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Fo(c))throw c;ce(ip,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function lb(r,e,t){const s=xe(r);let o=Ie.min(),l=$e();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,b){const w=xe(g),T=w.xs.get(b);return T!==void 0?ne.resolve(w.Ms.get(T)):w.Pi.getTargetData(p,b)})(s,c,Kr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:$e()))).next((m=>(w2(s,aI(e),m),{documents:m,Qs:l})))))}function w2(r,e,t){let s=r.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class ub{constructor(){this.activeTargetIds=dI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E2{constructor(){this.Mo=new ub,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ub,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class T2{Oo(e){}shutdown(){}}const cb="ConnectivityMonitor";class hb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(cb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yh=null;function vg(){return yh===null?yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():yh++,"0x"+yh.toString(16)}const zm="RestConnection",S2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===jh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=vg(),m=this.zo(e,t.toUriEncodedString());ce(zm,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:p}=new URL(m),b=Bo(p);return this.Jo(e,m,g,s,b).then((w=>(ce(zm,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Mo(zm,`RPC '${e}' ${c} failed with error: `,w,"url: ",m,"request:",s),w}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=S2[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class R2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const mn="WebChannelConnection";class C2 extends A2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=vg();return new Promise(((m,g)=>{const p=new jw;p.setWithCredentials(!0),p.listenOnce(Lw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Ah.NO_ERROR:const w=p.getResponseJson();ce(mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),m(w);break;case Ah.TIMEOUT:ce(mn,`RPC '${e}' ${c} timed out`),g(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const T=p.getStatus();if(ce(mn,`RPC '${e}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const V=x?.error;if(V&&V.status&&V.message){const z=(function(te){const H=te.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(H)>=0?H:ee.UNKNOWN})(V.status);g(new ue(z,V.message))}else g(new ue(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(mn,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(o);ce(mn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",b,s,15)}))}T_(e,t,s){const o=vg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qw(),m=Bw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const b=l.join("");ce(mn,`Creating RPC '${e}' stream ${o}: ${b}`,g);const w=c.createWebChannel(b,g);this.I_(w);let T=!1,x=!1;const V=new R2({Yo:q=>{x?ce(mn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(T||(ce(mn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ce(mn,`RPC '${e}' stream ${o} sending:`,q),w.send(q))},Zo:()=>w.close()}),z=(q,te,H)=>{q.listen(te,(L=>{try{H(L)}catch(se){setTimeout((()=>{throw se}),0)}}))};return z(w,Wl.EventType.OPEN,(()=>{x||(ce(mn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),z(w,Wl.EventType.CLOSE,(()=>{x||(x=!0,ce(mn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(w))})),z(w,Wl.EventType.ERROR,(q=>{x||(x=!0,Mo(mn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),V.a_(new ue(ee.UNAVAILABLE,"The operation could not be completed")))})),z(w,Wl.EventType.MESSAGE,(q=>{if(!x){const te=q.data[0];tt(!!te,16349);const H=te,L=H?.error||H[0]?.error;if(L){ce(mn,`RPC '${e}' stream ${o} received error:`,L);const se=L.status;let de=(function(A){const I=Bt[A];if(I!==void 0)return TE(I)})(se),le=L.message;de===void 0&&(de=ee.INTERNAL,le="Unknown error status: "+se+" with message "+L.message),x=!0,V.a_(new ue(de,le)),w.close()}else ce(mn,`RPC '${e}' stream ${o} received:`,te),V.u_(te)}})),z(m,zw.STAT_EVENT,(q=>{q.stat===ag.PROXY?ce(mn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===ag.NOPROXY&&ce(mn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Bm(){return typeof document<"u"?document:null}function gd(r){return new NI(r,!0)}class UE{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const db="PersistentStream";class jE{constructor(e,t,s,o,l,c,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ss(t.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ue(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(db,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class I2 extends jE{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Qr(c.readTime):Ie.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=yg(this.serializer),t.addTarget=(function(l,c){let m;const g=c.target;if(m=hg(g)?{documents:UI(l,g)}:{query:jI(l,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=RE(l,c.resumeToken);const p=mg(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Hh(l,c.snapshotVersion.toTimestamp());const p=mg(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=zI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=yg(this.serializer),t.removeTarget=e,this.q_(t)}}class O2 extends jE{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VI(e.writeResults,e.commitTime),s=Qr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=yg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>MI(this.serializer,s)))};this.q_(t)}}class x2{}class N2 extends x2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,gg(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(ee.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,gg(t,s),o,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class k2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const va="RemoteStore";class D2{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ea(this)&&(ce(va,"Restarting streams for network reachability change."),await(async function(g){const p=xe(g);p.Ea.add(4),await xu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await pd(p)})(this))}))})),this.Ra=new k2(s,o)}}async function pd(r){if(Ea(r))for(const e of r.da)await e(!0)}async function xu(r){for(const e of r.da)await e(!1)}function LE(r,e){const t=xe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),up(t)?lp(t):Ko(t).O_()&&op(t,e))}function ap(r,e){const t=xe(r),s=Ko(t);t.Ia.delete(e),s.O_()&&zE(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ea(t)&&t.Ra.set("Unknown"))}function op(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(r).Y_(e)}function zE(r,e){r.Va.Ue(e),Ko(r).Z_(e)}function lp(r){r.Va=new CI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ko(r).start(),r.Ra.ua()}function up(r){return Ea(r)&&!Ko(r).x_()&&r.Ia.size>0}function Ea(r){return xe(r).Ea.size===0}function BE(r){r.Va=void 0}async function P2(r){r.Ra.set("Online")}async function M2(r){r.Ia.forEach(((e,t)=>{op(r,e)}))}async function V2(r,e){BE(r),up(r)?(r.Ra.ha(e),lp(r)):r.Ra.set("Unknown")}async function U2(r,e,t){if(r.Ra.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ce(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof Oh?r.Va.Ze(e):e instanceof SE?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await VE(r.localStore);t.compareTo(s)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(p);b&&l.Ia.set(p,b.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(hn.EMPTY_BYTE_STRING,b.snapshotVersion)),zE(l,g);const w=new gi(b.target,g,p,b.sequenceNumber);op(l,w)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ce(va,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,t){if(!Fo(e))throw e;r.Ea.add(1),await xu(r),r.Ra.set("Offline"),t||(t=()=>VE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(va,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await pd(r)}))}function qE(r,e){return e().catch((t=>Fh(r,t,e)))}async function yd(r){const e=xe(r),t=Ci(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gg;for(;j2(e);)try{const o=await v2(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,L2(e,o)}catch(o){await Fh(e,o)}HE(e)&&$E(e)}function j2(r){return Ea(r)&&r.Ta.length<10}function L2(r,e){r.Ta.push(e);const t=Ci(r);t.O_()&&t.X_&&t.ea(e.mutations)}function HE(r){return Ea(r)&&!Ci(r).x_()&&r.Ta.length>0}function $E(r){Ci(r).start()}async function z2(r){Ci(r).ra()}async function B2(r){const e=Ci(r);for(const t of r.Ta)e.ea(t.mutations)}async function q2(r,e,t){const s=r.Ta.shift(),o=Zg.from(s,e,t);await qE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await yd(r)}async function H2(r,e){e&&Ci(r).X_&&await(async function(s,o){if((function(c){return SI(c)&&c!==ee.ABORTED})(o.code)){const l=s.Ta.shift();Ci(s).B_(),await qE(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await yd(s)}})(r,e),HE(r)&&$E(r)}async function fb(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),ce(va,"RemoteStore received new credentials");const s=Ea(t);t.Ea.add(3),await xu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pd(t)}async function $2(r,e){const t=xe(r);e?(t.Ea.delete(2),await pd(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function Ko(r){return r.ma||(r.ma=(function(t,s,o){const l=xe(t);return l.sa(),new I2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:P2.bind(null,r),t_:M2.bind(null,r),r_:V2.bind(null,r),H_:U2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),up(r)?lp(r):r.Ra.set("Unknown")):(await r.ma.stop(),BE(r))}))),r.ma}function Ci(r){return r.fa||(r.fa=(function(t,s,o){const l=xe(t);return l.sa(),new O2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:z2.bind(null,r),r_:H2.bind(null,r),ta:B2.bind(null,r),na:q2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await yd(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(va,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class cp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,m=new cp(e,t,c,o,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(Ss("AsyncQueue",`${e}: ${r}`),Fo(r))return new ue(ee.UNAVAILABLE,`${e}: ${r}`);throw r}class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=Zl(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class mb{constructor(){this.ga=new Et(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zo{constructor(e,t,s,o,l,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new zo(e,t,Co.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class F2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class G2{constructor(){this.queries=gb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=xe(t),l=o.queries;o.queries=gb(),l.forEach(((c,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function gb(){return new wa((r=>hE(r)),cd)}async function K2(r,e){const t=xe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new F2,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=hp(c,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&dp(t)}async function Q2(r,e){const t=xe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Y2(r,e){const t=xe(r);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&dp(t)}function X2(r,e,t){const s=xe(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function dp(r){r.Ca.forEach((e=>{e.next()}))}var bg,pb;(pb=bg||(bg={})).Ma="default",pb.Cache="cache";class J2{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bg.Cache}}class FE{constructor(e){this.key=e}}class GE{constructor(e){this.key=e}}class W2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=dE(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new mb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const T=o.get(b),x=hd(this.query,w)?w:null,V=!!T&&this.mutatedKeys.has(T.key),z=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let q=!1;T&&x?T.data.isEqual(x.data)?V!==z&&(s.track({type:3,doc:x}),q=!0):this.su(T,x)||(s.track({type:2,doc:x}),q=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(m=!0)):!T&&x?(s.track({type:0,doc:x}),q=!0):T&&!x&&(s.track({type:1,doc:T}),q=!0,(g||p)&&(m=!0)),q&&(x?(c=c.add(x),l=z?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,w)=>(function(x,V){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:q})}};return z(x)-z(V)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new zo(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new GE(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new FE(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fp="SyncEngine";class Z2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class eO{constructor(e){this.key=e,this.hu=!1}}class tO{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new wa((m=>hE(m)),cd),this.Iu=new Map,this.Eu=new Set,this.du=new Et(_e.comparator),this.Au=new Map,this.Ru=new np,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nO(r,e,t=!0){const s=WE(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await KE(s,e,t,!0),o}async function rO(r,e){const t=WE(r);await KE(t,e,!0,!1)}async function KE(r,e,t,s){const o=await b2(r.localStore,Kr(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await sO(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&LE(r.remoteStore,o),m}async function sO(r,e,t,s,o){r.pu=(w,T,x)=>(async function(z,q,te,H){let L=q.view.ru(te);L.Cs&&(L=await lb(z.localStore,q.query,!1).then((({documents:C})=>q.view.ru(C,L))));const se=H&&H.targetChanges.get(q.targetId),de=H&&H.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(L,z.isPrimaryClient,se,de);return _b(z,q.targetId,le.au),le.snapshot})(r,w,T,x);const l=await lb(r.localStore,e,!0),c=new W2(e,l.Qs),m=c.ru(l.documents),g=Ou.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),p=c.applyChanges(m,r.isPrimaryClient,g);_b(r,t,p.au);const b=new Z2(e,t,c);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function iO(r,e,t){const s=xe(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!cd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await _g(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&ap(s.remoteStore,o.targetId),wg(s,o.targetId)})).catch($o)):(wg(s,o.targetId),await _g(s.localStore,o.targetId,!0))}async function aO(r,e){const t=xe(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ap(t.remoteStore,s.targetId))}async function oO(r,e,t){const s=mO(r);try{const o=await(function(c,m){const g=xe(c),p=_t.now(),b=m.reduce(((x,V)=>x.add(V.key)),$e());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let V=As(),z=$e();return g.Ns.getEntries(x,b).next((q=>{V=q,V.forEach(((te,H)=>{H.isValidDocument()||(z=z.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,V))).next((q=>{w=q;const te=[];for(const H of m){const L=vI(H,w.get(H.key).overlayedDocument);L!=null&&te.push(new Ni(H.key,L,nE(L.value.mapValue),Er.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,te,m)})).next((q=>{T=q;const te=q.applyToLocalDocumentSet(w,z);return g.documentOverlayCache.saveOverlays(x,q.batchId,te)}))})).then((()=>({batchId:T.batchId,changes:mE(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new Et(He)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await Nu(s,o.changes),await yd(s.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function QE(r,e){const t=xe(r);try{const s=await y2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?tt(c.hu,14607):o.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await Nu(t,s,e)}catch(s){await $o(s)}}function yb(r,e,t){const s=xe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=xe(c);g.onlineState=m;let p=!1;g.queries.forEach(((b,w)=>{for(const T of w.Sa)T.va(m)&&(p=!0)})),p&&dp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lO(r,e,t){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Et(_e.comparator);c=c.insert(l,pn.newNoDocument(l,Ie.min()));const m=$e().add(l),g=new md(Ie.min(),new Map,new Et(He),c,m);await QE(s,g),s.du=s.du.remove(l),s.Au.delete(e),mp(s)}else await _g(s.localStore,e,!1).then((()=>wg(s,e,t))).catch($o)}async function uO(r,e){const t=xe(r),s=e.batch.batchId;try{const o=await p2(t.localStore,e);XE(t,s,null),YE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Nu(t,o)}catch(o){await $o(o)}}async function cO(r,e,t){const s=xe(r);try{const o=await(function(c,m){const g=xe(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return g.mutationQueue.lookupMutationBatch(p,m).next((w=>(tt(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(p,w)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,b,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>g.localDocuments.getDocuments(p,b)))}))})(s.localStore,e);XE(s,e,t),YE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Nu(s,o)}catch(o){await $o(o)}}function YE(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function XE(r,e,t){const s=xe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function wg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||JE(r,s)}))}function JE(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ap(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),mp(r))}function _b(r,e,t){for(const s of t)s instanceof FE?(r.Ru.addReference(s.key,e),hO(r,s)):s instanceof GE?(ce(fp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||JE(r,s.key)):Se(19791,{wu:s})}function hO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ce(fp,"New document in limbo: "+t),r.Eu.add(s),mp(r))}function mp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new _e(gt.fromString(e)),s=r.fu.next();r.Au.set(s,new eO(t)),r.du=r.du.insert(t,s),LE(r.remoteStore,new gi(Kr(uE(t.path)),s,"TargetPurposeLimboResolution",od.ce))}}async function Nu(r,e,t){const s=xe(r),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const b=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(p){o.push(p);const b=sp.As(g.targetId,p);l.push(b)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,p){const b=xe(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(p,(T=>ne.forEach(T.Es,(x=>b.persistence.referenceDelegate.addReference(w,T.targetId,x))).next((()=>ne.forEach(T.ds,(x=>b.persistence.referenceDelegate.removeReference(w,T.targetId,x)))))))))}catch(w){if(!Fo(w))throw w;ce(ip,"Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const x=b.Ms.get(T),V=x.snapshotVersion,z=x.withLastLimboFreeSnapshotVersion(V);b.Ms=b.Ms.insert(T,z)}}})(s.localStore,l))}async function dO(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){ce(fp,"User change. New user:",e.toKey());const s=await ME(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new ue(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Nu(t,s.Ls)}}function fO(r,e){const t=xe(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let o=$e();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function WE(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lO.bind(null,e),e.Pu.H_=Y2.bind(null,e.eventManager),e.Pu.yu=X2.bind(null,e.eventManager),e}function mO(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cO.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return g2(this.persistence,new d2,e.initialUser,this.serializer)}Cu(e){return new PE(rp.mi,this.serializer)}Du(e){return new E2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class gO extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof $h,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new JI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new PE((s=>$h.mi(s,t)),this.serializer)}}class Eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dO.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new G2})()}createDatastore(e){const t=gd(e.databaseInfo.databaseId),s=(function(l){return new C2(l)})(e.databaseInfo);return(function(l,c,m,g){return new N2(l,c,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,m){return new D2(s,o,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>yb(this.syncEngine,t,0)),(function(){return hb.v()?new hb:new T2})())}createSyncEngine(e,t){return(function(o,l,c,m,g,p,b){const w=new tO(o,l,c,m,g,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=xe(t);ce(va,"RemoteStore shutting down."),s.Ea.add(5),await xu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Eg.provider={build:()=>new Eg};class pO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ii="FirestoreClient";class yO{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=gn.UNAUTHENTICATED,this.clientId=Fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ce(Ii,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ce(Ii,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=hp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qm(r,e){r.asyncQueue.verifyOperationInProgress(),ce(Ii,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await ME(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function vb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await _O(r);ce(Ii,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>fb(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>fb(e.remoteStore,o))),r._onlineComponents=e}async function _O(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(Ii,"Using user provided OfflineComponentProvider");try{await qm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await qm(r,new Gh)}}else ce(Ii,"Using default OfflineComponentProvider"),await qm(r,new gO(void 0));return r._offlineComponents}async function ZE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(Ii,"Using user provided OnlineComponentProvider"),await vb(r,r._uninitializedComponentsProvider._online)):(ce(Ii,"Using default OnlineComponentProvider"),await vb(r,new Eg))),r._onlineComponents}function vO(r){return ZE(r).then((e=>e.syncEngine))}async function bO(r){const e=await ZE(r),t=e.eventManager;return t.onListen=nO.bind(null,e.syncEngine),t.onUnlisten=iO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aO.bind(null,e.syncEngine),t}function wO(r,e,t={}){const s=new bi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,g,p){const b=new pO({next:T=>{b.Nu(),c.enqueueAndForget((()=>Q2(l,w))),T.fromCache&&g.source==="server"?p.reject(new ue(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new J2(m,b,{includeMetadataChanges:!0,qa:!0});return K2(l,w)})(await bO(r),r.asyncQueue,e,t,s))),s.promise}function eT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const bb=new Map;const tT="firestore.googleapis.com",wb=!0;class Eb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tT,this.ssl=wb}else this.host=e.host,this.ssl=e.ssl??wb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YI)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TC;switch(s.type){case"firstParty":return new CC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=bb.get(t);s&&(ce("ComponentProvider","Removing Datastore"),bb.delete(t),s.terminate())})(this),Promise.resolve()}}function EO(r,e,t,s={}){r=_a(r,_d);const o=Bo(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(Ow(`https://${m}`),xw("Firestore",!0)),l.host!==tT&&l.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:s};if(!ga(g,c)&&(r._setSettings(g),s.mockUserToken)){let p,b;if(typeof s.mockUserToken=="string")p=s.mockUserToken,b=gn.MOCK_USER;else{p=Q1(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new gn(w)}r._authCredentials=new SC(new $w(p,b))}}class Ta{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class Kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Cu(t,Kt._jsonSchema))return new Kt(e,s||null,new _e(gt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:$t("string",Kt._jsonSchemaVersion),referencePath:$t("string")};class wi extends Ta{constructor(e,t,s){super(e,t,uE(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new _e(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function Tg(r,e,...t){if(r=En(r),Fw("collection","path",e),r instanceof _d){const s=gt.fromString(e,...t);return M0(s),new wi(r,null,s)}{if(!(r instanceof Kt||r instanceof wi))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return M0(s),new wi(r.firestore,null,s)}}function Sg(r,e,...t){if(r=En(r),arguments.length===1&&(e=Fg.newId()),Fw("doc","path",e),r instanceof _d){const s=gt.fromString(e,...t);return P0(s),new Kt(r,null,new _e(s))}{if(!(r instanceof Kt||r instanceof wi))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return P0(s),new Kt(r.firestore,r instanceof wi?r.converter:null,new _e(s))}}const Tb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UE(this,"async_queue_retry"),this._c=()=>{const s=Bm();s&&ce(Tb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fo(e))throw e;ce(Tb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",Ab(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=cp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:Ab(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ab(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ku extends _d{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Sb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function TO(r,e){const t=typeof r=="object"?r:Pw(),s=typeof r=="string"?r:jh,o=Hg(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=G1("firestore");l&&EO(o,...l)}return o}function nT(r){if(r._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||SO(r),r._firestoreClient}function SO(r){const e=r._freezeSettings(),t=(function(o,l,c,m){return new $C(o,l,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,eT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new yO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(hn.fromBase64String(e))}catch(t){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:$t("string",sr._jsonSchemaVersion),bytes:$t("string")};class vd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._methodName=e}}class Yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yr._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Yr._jsonSchema))return new Yr(e.latitude,e.longitude)}}Yr._jsonSchemaVersion="firestore/geoPoint/1.0",Yr._jsonSchema={type:$t("string",Yr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};class Xr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xr(e.vectorValues);throw new ue(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xr._jsonSchemaVersion="firestore/vectorValue/1.0",Xr._jsonSchema={type:$t("string",Xr._jsonSchemaVersion),vectorValues:$t("object")};const AO=/^__.*__$/;class RO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class rT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class pp{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sT(this.Ac)&&AO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||gd(e)}Cc(e,t,s,o=!1){return new pp({Ac:e,methodName:t,Dc:s,path:cn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yp(r){const e=r._freezeSettings(),t=gd(r._databaseId);return new CO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function IO(r,e,t,s,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",c,s);const m=iT(s,c);let g,p;if(l.merge)g=new $n(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const T=Ag(e,w,t);if(!c.contains(T))throw new ue(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);oT(b,T)||b.push(T)}g=new $n(b),p=c.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,p=c.fieldTransforms;return new RO(new Nn(m),g,p)}class bd extends gp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}function OO(r,e,t,s){const o=r.Cc(1,e,t);_p("Data must be an object, but it was:",o,s);const l=[],c=Nn.empty();xi(s,((g,p)=>{const b=vp(e,g,t);p=En(p);const w=o.yc(b);if(p instanceof bd)l.push(b);else{const T=Du(p,w);T!=null&&(l.push(b),c.set(b,T))}}));const m=new $n(l);return new rT(c,m,o.fieldTransforms)}function xO(r,e,t,s,o,l){const c=r.Cc(1,e,t),m=[Ag(e,s,t)],g=[o];if(l.length%2!=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(Ag(e,l[T])),g.push(l[T+1]);const p=[],b=Nn.empty();for(let T=m.length-1;T>=0;--T)if(!oT(p,m[T])){const x=m[T];let V=g[T];V=En(V);const z=c.yc(x);if(V instanceof bd)p.push(x);else{const q=Du(V,z);q!=null&&(p.push(x),b.set(x,q))}}const w=new $n(p);return new rT(b,w,c.fieldTransforms)}function NO(r,e,t,s=!1){return Du(t,r.Cc(s?4:3,e))}function Du(r,e){if(aT(r=En(r)))return _p("Unsupported field value:",e,r),iT(r,e);if(r instanceof gp)return(function(s,o){if(!sT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const m of s){let g=Du(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=En(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=_t.fromDate(s);return{timestampValue:Hh(o.serializer,l)}}if(s instanceof _t){const l=new _t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hh(o.serializer,l)}}if(s instanceof Yr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sr)return{bytesValue:RE(o.serializer,s._byteString)};if(s instanceof Kt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Xr)return(function(c,m){return{mapValue:{fields:{[eE]:{stringValue:tE},[Lh]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Jg(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ad(s)}`)})(r,e)}function iT(r,e){const t={};return Qw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(r,((s,o)=>{const l=Du(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function aT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof _t||r instanceof Yr||r instanceof sr||r instanceof Kt||r instanceof gp||r instanceof Xr)}function _p(r,e,t){if(!aT(t)||!Gw(t)){const s=ad(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Ag(r,e,t){if((e=En(e))instanceof vd)return e._internalPath;if(typeof e=="string")return vp(r,e);throw Kh("Field path arguments must be of type string or ",r,!1,void 0,t)}const kO=new RegExp("[~\\*/\\[\\]]");function vp(r,e,t){if(e.search(kO)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Kh(r,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new ue(ee.INVALID_ARGUMENT,m+r+g)}function oT(r,e){return r.some((t=>t.isEqual(e)))}class lT{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DO extends lT{data(){return super.data()}}function bp(r,e){return typeof e=="string"?vp(r,e):e instanceof vd?e._internalPath:e._delegate._internalPath}function PO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wp{}class uT extends wp{}function MO(r,e,...t){let s=[];e instanceof wp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Tp)).length,m=l.filter((g=>g instanceof Ep)).length;if(c>1||c>0&&m>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Ep extends uT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ep(e,t,s)}_apply(e){const t=this._parse(e);return cT(e._query,t),new Ta(e.firestore,e.converter,dg(e._query,t))}_parse(e){const t=yp(e.firestore);return(function(l,c,m,g,p,b,w){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Cb(w,b);const V=[];for(const z of w)V.push(Rb(g,l,z));T={arrayValue:{values:V}}}else T=Rb(g,l,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Cb(w,b),T=NO(m,c,w,b==="in"||b==="not-in");return Ht.create(p,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tp extends wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const m=l.getFlattenedFilters();for(const g of m)cT(c,g),c=dg(c,g)})(e._query,t),new Ta(e.firestore,e.converter,dg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sp extends uT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sp(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gu(l,c)})(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new Go(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function VO(r,e="asc"){const t=e,s=bp("orderBy",r);return Sp._create(s,t)}function Rb(r,e,t){if(typeof(t=En(t))=="string"){if(t==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&t.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(gt.fromString(t));if(!_e.isDocumentKey(s))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return H0(r,new _e(s))}if(t instanceof Kt)return H0(r,t._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(t)}.`)}function Cb(r,e){if(!Array.isArray(r)||r.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cT(r,e){const t=(function(o,l){for(const c of o)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UO{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xi(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Lh].arrayValue?.values?.map((s=>Nt(s.doubleValue)));return new Xr(t)}convertGeoPoint(e){return new Yr(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ud(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const t=Si(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=gt.fromString(e);tt(kE(s),9688,{name:e});const o=new fu(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return o.isEqual(t)||Ss(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function jO(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class _h{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends lT{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(bp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:$t("string",Io._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class xh extends Io{data(e={}){return super.data(e)}}class Oo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _h(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new xh(this._firestore,this._userDataWriter,s.key,s,new _h(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _h(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _h(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),b=c.indexOf(m.doc.key)),{type:LO(m.type),doc:g,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:$t("string",Oo._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class zO extends UO{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function Ib(r){r=_a(r,Ta);const e=_a(r.firestore,ku),t=nT(e),s=new zO(e);return PO(r._query),wO(t,r._query).then((o=>new Oo(e,s,r,o)))}function BO(r,e,t,...s){r=_a(r,Kt);const o=_a(r.firestore,ku),l=yp(o);let c;return c=typeof(e=En(e))=="string"||e instanceof vd?xO(l,"updateDoc",r._key,e,t,s):OO(l,"updateDoc",r._key,e),Ap(o,[c.toMutation(r._key,Er.exists(!0))])}function qO(r){return Ap(_a(r.firestore,ku),[new Wg(r._key,Er.none())])}function hT(r,e){const t=_a(r.firestore,ku),s=Sg(r),o=jO(r.converter,e);return Ap(t,[IO(yp(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Er.exists(!1))]).then((()=>s))}function Ap(r,e){return(function(s,o){const l=new bi;return s.asyncQueue.enqueueAndForget((async()=>oO(await vO(s),o,l))),l.promise})(nT(r),e)}(function(e,t=!0){(function(o){Ho=o})(qo),Po(new pa("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),m=new ku(new AC(s.getProvider("auth-internal")),new IC(c,s.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(p.options.projectId,b)})(c,o),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),_i(x0,N0,e),_i(x0,N0,"esm2020")})();function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HO=dT,fT=new Au("auth","Firebase",dT());const Qh=new Bg("@firebase/auth");function $O(r,...e){Qh.logLevel<=qe.WARN&&Qh.warn(`Auth (${qo}): ${r}`,...e)}function Nh(r,...e){Qh.logLevel<=qe.ERROR&&Qh.error(`Auth (${qo}): ${r}`,...e)}function Rs(r,...e){throw Rp(r,...e)}function Jr(r,...e){return Rp(r,...e)}function mT(r,e,t){const s={...HO(),[e]:t};return new Au("auth","Firebase",s).create(e,{appName:r.name})}function Ei(r){return mT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return fT.create(r,...e)}function Re(r,e,...t){if(!r)throw Rp(e,...t)}function ws(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Nh(e),new Error(e)}function Cs(r,e){r||ws(e)}function Rg(){return typeof self<"u"&&self.location?.href||""}function FO(){return Ob()==="http:"||Ob()==="https:"}function Ob(){return typeof self<"u"&&self.location?.protocol||null}function GO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FO()||eR()||"connection"in navigator)?navigator.onLine:!0}function KO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=J1()||tR()}get(){return GO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cp(r,e){Cs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class gT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const YO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XO=new Pu(3e4,6e4);function wd(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Qo(r,e,t,s,o={}){return pT(r,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const m=Ru({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...l};return Z1()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(p.credentials="include"),gT.fetch()(await _T(r,r.config.apiHost,t,m),p)})}async function pT(r,e,t){r._canInitEmulator=!1;const s={...QO,...e};try{const o=new JO(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw vh(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw vh(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw vh(r,"user-disabled",c);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw mT(r,b,p);Rs(r,b)}}catch(o){if(o instanceof Is)throw o;Rs(r,"network-request-failed",{message:String(o)})}}async function yT(r,e,t,s,o={}){const l=await Qo(r,e,t,s,o);return"mfaPendingCredential"in l&&Rs(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function _T(r,e,t,s){const o=`${e}${t}?${s}`,l=r,c=l.config.emulator?Cp(r.config,o):`${r.config.apiScheme}://${o}`;return YO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class JO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Jr(this.auth,"network-request-failed")),XO.get())})}}function vh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Jr(r,e,s);return o.customData._tokenResponse=t,o}async function WO(r,e){return Qo(r,"POST","/v1/accounts:delete",e)}async function Yh(r,e){return Qo(r,"POST","/v1/accounts:lookup",e)}function ou(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZO(r,e=!1){const t=En(r),s=await t.getIdToken(e),o=Ip(s);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:s,authTime:ou(Hm(o.auth_time)),issuedAtTime:ou(Hm(o.iat)),expirationTime:ou(Hm(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Hm(r){return Number(r)*1e3}function Ip(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Aw(t);return o?JSON.parse(o):(Nh("Failed to decode base64 JWT payload"),null)}catch(o){return Nh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function xb(r){const e=Ip(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function _u(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Is&&ex(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ex({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class tx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xh(r){const e=r.auth,t=await r.getIdToken(),s=await _u(r,Yh(e,{idToken:t}));Re(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?vT(o.providerUserInfo):[],c=rx(r.providerData,l),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!c?.length,p=m?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,b)}async function nx(r){const e=En(r);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function vT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function sx(r,e){const t=await pT(r,{},async()=>{const s=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await _T(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(g.credentials="include"),gT.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ix(r,e){return Qo(r,"POST","/v2/accounts:revokeToken",wd(r,e))}class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=xb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await sx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new xo;return s&&(Re(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Re(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return ws("not implemented")}}function li(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class wr{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new tx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZO(this,e)}reload(){return nx(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await _u(this,WO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:x,providerData:V,stsTokenManager:z}=t;Re(w&&z,e,"internal-error");const q=xo.fromJSON(this.name,z);Re(typeof w=="string",e,"internal-error"),li(s,e.name),li(o,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof x=="boolean",e,"internal-error"),li(l,e.name),li(c,e.name),li(m,e.name),li(g,e.name),li(p,e.name),li(b,e.name);const te=new wr({uid:w,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:m,stsTokenManager:q,createdAt:p,lastLoginAt:b});return V&&Array.isArray(V)&&(te.providerData=V.map(H=>({...H}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,t,s=!1){const o=new xo;o.updateFromServerResponse(t);const l=new wr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Xh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?vT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,m=new xo;m.updateFromIdToken(s);const g=new wr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Cg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,p),g}}const Nb=new Map;function Es(r){Cs(r instanceof Function,"Expected a class definition");let e=Nb.get(r);return e?(Cs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Nb.set(r,e),e)}class bT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bT.type="NONE";const kb=bT;function kh(r,e,t){return`firebase:${r}:${e}:${t}`}class No{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=kh(this.userKey,o.apiKey,l),this.fullPersistenceKey=kh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yh(this.auth,{idToken:e}).catch(()=>{});return t?wr._fromGetAccountInfoResponse(this.auth,t,e):null}return wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new No(Es(kb),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||Es(kb);const c=kh(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const b=await p._get(c);if(b){let w;if(typeof b=="string"){const T=await Yh(e,{idToken:b}).catch(()=>{});if(!T)break;w=await wr._fromGetAccountInfoResponse(e,T,b)}else w=wr._fromJSON(e,b);p!==l&&(m=w),l=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new No(l,e,s):(l=g[0],m&&await l._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new No(l,e,s))}}function Db(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ST(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(CT(e))return"Webos";if(ET(e))return"Safari";if((e.includes("chrome/")||TT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function wT(r=yn()){return/firefox\//i.test(r)}function ET(r=yn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TT(r=yn()){return/crios\//i.test(r)}function ST(r=yn()){return/iemobile/i.test(r)}function AT(r=yn()){return/android/i.test(r)}function RT(r=yn()){return/blackberry/i.test(r)}function CT(r=yn()){return/webos/i.test(r)}function Op(r=yn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ax(r=yn()){return Op(r)&&!!window.navigator?.standalone}function ox(){return nR()&&document.documentMode===10}function IT(r=yn()){return Op(r)||AT(r)||CT(r)||RT(r)||/windows phone/i.test(r)||ST(r)}function OT(r,e=[]){let t;switch(r){case"Browser":t=Db(yn());break;case"Worker":t=`${Db(yn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${s}`}class lx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,m)=>{try{const g=e(l);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function ux(r,e={}){return Qo(r,"GET","/v2/passwordPolicy",wd(r,e))}const cx=6;class hx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??cx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class dx{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pb(this),this.idTokenSubscription=new Pb(this),this.beforeStateQueue=new lx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await No.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yh(this,{idToken:e}),s=await wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(br(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(Ei(this));const t=e?En(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ux(this),t=new hx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ix(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$O(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ed(r){return En(r)}class Pb{constructor(e){this.auth=e,this.observer=null,this.addObserver=cR(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fx(r){xp=r}function mx(r){return xp.loadJS(r)}function gx(){return xp.gapiScript}function px(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function yx(r,e){const t=Hg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ga(l,e??{}))return o;Rs(o,"already-initialized")}return t.initialize({options:e})}function _x(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Es);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function vx(r,e,t){const s=Ed(r);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=xT(e),{host:c,port:m}=bx(e),g=m===null?"":`:${m}`,p={url:`${l}//${c}${g}/`},b=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(ga(p,s.config.emulator)&&ga(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Bo(c)?(Ow(`${l}//${c}${g}`),xw("Auth",!0)):wx()}function xT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function bx(r){const e=xT(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Mb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Mb(c)}}}function Mb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function wx(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class NT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function ko(r,e){return yT(r,"POST","/v1/accounts:signInWithIdp",wd(r,e))}const Ex="http://localhost";class ba extends NT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new ba(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:Ex,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}class kT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mu extends kT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ci extends Mu{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";class hi extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";class di extends Mu{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";class fi extends Mu{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return fi.credential(t,s)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";async function Tx(r,e){return yT(r,"POST","/v1/accounts:signUp",wd(r,e))}class Oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await wr._fromIdTokenResponse(e,s,o),c=Vb(s);return new Oi({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Vb(s);return new Oi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Vb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function Sx(r){if(br(r.app))return Promise.reject(Ei(r));const e=Ed(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Oi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Tx(e,{returnSecureToken:!0}),s=await Oi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class Jh extends Is{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Jh(e,t,s,o)}}function DT(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(r,l,e,s):l})}async function Ax(r,e,t=!1){const s=await _u(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Oi._forOperation(r,"link",s)}async function Rx(r,e,t=!1){const{auth:s}=r;if(br(s.app))return Promise.reject(Ei(s));const o="reauthenticate";try{const l=await _u(r,DT(s,o,e,r),t);Re(l.idToken,s,"internal-error");const c=Ip(l.idToken);Re(c,s,"internal-error");const{sub:m}=c;return Re(r.uid===m,s,"user-mismatch"),Oi._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Rs(s,"user-mismatch"),l}}async function Cx(r,e,t=!1){if(br(r.app))return Promise.reject(Ei(r));const s="signIn",o=await DT(r,s,e),l=await Oi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function Ix(r,e,t,s){return En(r).onIdTokenChanged(e,t,s)}function Ox(r,e,t){return En(r).beforeAuthStateChanged(e,t)}const Wh="__sak";class PT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xx=1e3,Nx=10;class MT extends PT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);ox()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Nx):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}MT.type="LOCAL";const kx=MT;class VT extends PT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VT.type="SESSION";const UT=VT;function Dx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Td(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,l)),g=await Dx(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];function Np(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class Px{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((m,g)=>{const p=Np("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Wr(){return window}function Mx(r){Wr().location.href=r}function jT(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function Vx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ux(){return navigator?.serviceWorker?.controller||null}function jx(){return jT()?self:null}const LT="firebaseLocalStorageDb",Lx=1,Zh="firebaseLocalStorage",zT="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sd(r,e){return r.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function zx(){const r=indexedDB.deleteDatabase(LT);return new Vu(r).toPromise()}function Ig(){const r=indexedDB.open(LT,Lx);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Zh,{keyPath:zT})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Zh)?e(s):(s.close(),await zx(),e(await Ig()))})})}async function Ub(r,e,t){const s=Sd(r,!0).put({[zT]:e,value:t});return new Vu(s).toPromise()}async function Bx(r,e){const t=Sd(r,!1).get(e),s=await new Vu(t).toPromise();return s===void 0?null:s.value}function jb(r,e){const t=Sd(r,!0).delete(e);return new Vu(t).toPromise()}const qx=800,Hx=3;class BT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ig(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Hx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(jx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Vx(),!this.activeServiceWorker)return;this.sender=new Px(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ux()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ig();return await Ub(e,Wh,"1"),await jb(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ub(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Bx(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sd(o,!1).getAll();return new Vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BT.type="LOCAL";const $x=BT;new Pu(3e4,6e4);function Fx(r,e){return e?Es(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class kp extends NT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gx(r){return Cx(r.auth,new kp(r),r.bypassAuthState)}function Kx(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),Rx(t,new kp(r),r.bypassAuthState)}async function Qx(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),Ax(t,new kp(r),r.bypassAuthState)}class qT{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gx;case"linkViaPopup":case"linkViaRedirect":return Qx;case"reauthViaPopup":case"reauthViaRedirect":return Kx;default:Rs(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yx=new Pu(2e3,1e4);class Ao extends qT{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=Np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yx.get())};e()}}Ao.currentPopupAction=null;const Xx="pendingRedirect",Dh=new Map;class Jx extends qT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Dh.get(this.auth._key());if(!e){try{const s=await Wx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Dh.set(this.auth._key(),e)}return this.bypassAuthState||Dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Wx(r,e){const t=tN(e),s=eN(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Zx(r,e){Dh.set(r._key(),e)}function eN(r){return Es(r._redirectPersistence)}function tN(r){return kh(Xx,r.config.apiKey,r.name)}async function nN(r,e,t=!1){if(br(r.app))return Promise.reject(Ei(r));const s=Ed(r),o=Fx(s,e),c=await new Jx(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const rN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!HT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lb(e))}saveEventToCache(e){this.cachedEventUids.add(Lb(e)),this.lastProcessedEventTime=Date.now()}}function Lb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function HT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function iN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(r);default:return!1}}async function aN(r,e={}){return Qo(r,"GET","/v1/projects",e)}const oN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lN=/^https?/;async function uN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aN(r);for(const t of e)try{if(cN(t))return}catch{}Rs(r,"unauthorized-domain")}function cN(r){const e=Rg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!lN.test(t))return!1;if(oN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const hN=new Pu(3e4,6e4);function zb(){const r=Wr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function dN(r){return new Promise((e,t)=>{function s(){zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zb(),t(Jr(r,"network-request-failed"))},timeout:hN.get()})}if(Wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wr().gapi?.load)s();else{const o=px("iframefcb");return Wr()[o]=()=>{gapi.load?s():t(Jr(r,"network-request-failed"))},mx(`${gx()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function fN(r){return Ph=Ph||dN(r),Ph}const mN=new Pu(5e3,15e3),gN="__/auth/iframe",pN="emulator/auth/iframe",yN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_N=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vN(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Cp(e,pN):`https://${r.config.authDomain}/${gN}`,s={apiKey:e.apiKey,appName:r.name,v:qo},o=_N.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Ru(s).slice(1)}`}async function bN(r){const e=await fN(r),t=Wr().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:vN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yN,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Jr(r,"network-request-failed"),m=Wr().setTimeout(()=>{l(c)},mN.get());function g(){Wr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{l(c)})}))}const wN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EN=500,TN=600,SN="_blank",AN="http://localhost";class Bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RN(r,e,t,s=EN,o=TN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...wN,width:s.toString(),height:o.toString(),top:l,left:c},p=yn().toLowerCase();t&&(m=TT(p)?SN:t),wT(p)&&(e=e||AN,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[x,V])=>`${T}${x}=${V},`,"");if(ax(p)&&m!=="_self")return CN(e||"",m),new Bb(null);const w=window.open(e||"",m,b);Re(w,r,"popup-blocked");try{w.focus()}catch{}return new Bb(w)}function CN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const IN="__/auth/handler",ON="emulator/auth/handler",xN=encodeURIComponent("fac");async function qb(r,e,t,s,o,l){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:qo,eventId:o};if(e instanceof kT){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",uR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))c[b]=w}if(e instanceof Mu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(c.scopes=b.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await r._getAppCheckToken(),p=g?`#${xN}=${encodeURIComponent(g)}`:"";return`${NN(r)}?${Ru(m).slice(1)}${p}`}function NN({config:r}){return r.emulator?Cp(r,ON):`https://${r.authDomain}/${IN}`}const $m="webStorageSupport";class kN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=nN,this._overrideRedirectResult=Zx}async _openPopup(e,t,s,o){Cs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await qb(e,t,s,Rg(),o);return RN(e,l,Np())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await qb(e,t,s,Rg(),o);return Mx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Cs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await bN(e),s=new sN(e);return t.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},o=>{const l=o?.[0]?.[$m];l!==void 0&&t(!!l),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IT()||ET()||Op()}}const DN=kN;var Hb="@firebase/auth",$b="1.12.0";class PN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function MN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VN(r){Po(new pa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OT(r)},p=new dx(s,o,l,g);return _x(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Po(new pa("auth-internal",e=>{const t=Ed(e.getProvider("auth").getImmediate());return(s=>new PN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(Hb,$b,MN(r)),_i(Hb,$b,"esm2020")}const UN=300,jN=Iw("authIdTokenMaxAge")||UN;let Fb=null;const LN=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>jN)return;const o=t?.token;Fb!==o&&(Fb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zN(r=Pw()){const e=Hg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=yx(r,{popupRedirectResolver:DN,persistence:[$x,kx,UT]}),s=Iw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=LN(l.toString());Ox(t,c,()=>c(t.currentUser)),Ix(t,m=>c(m))}}const o=Rw("auth");return o&&vx(t,`http://${o}`),t}function BN(){return document.getElementsByTagName("head")?.[0]??document}fx({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Jr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",BN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VN("Browser");function qN(){const r=localStorage.getItem("firebase_api_key"),e=localStorage.getItem("firebase_project_id"),t=localStorage.getItem("firebase_app_id"),s=localStorage.getItem("firebase_auth_domain")||void 0,o=localStorage.getItem("firebase_storage_bucket")||void 0,l=localStorage.getItem("firebase_messaging_sender_id")||void 0;return r&&e&&t?{apiKey:r,authDomain:s,projectId:e,storageBucket:o,messagingSenderId:l,appId:t}:null}let Fm=null,bs=null,Gb=null;const Kb=qN();if(Kb)try{Fm=Dw(Kb),bs=TO(Fm),Gb=zN(Fm),Sx(Gb).catch(r=>{console.error("Error signing in anonymously:",r)})}catch(r){console.error("Error initializing Firebase:",r)}function HN(r){if(!r.apiKey||!r.projectId||!r.appId)throw new Error("API Key, Project ID, and App ID are required.");localStorage.setItem("firebase_api_key",r.apiKey),localStorage.setItem("firebase_project_id",r.projectId),localStorage.setItem("firebase_app_id",r.appId),r.authDomain&&localStorage.setItem("firebase_auth_domain",r.authDomain),r.storageBucket&&localStorage.setItem("firebase_storage_bucket",r.storageBucket),r.messagingSenderId&&localStorage.setItem("firebase_messaging_sender_id",r.messagingSenderId),window.location.reload()}function $N(){localStorage.removeItem("firebase_api_key"),localStorage.removeItem("firebase_project_id"),localStorage.removeItem("firebase_app_id"),localStorage.removeItem("firebase_auth_domain"),localStorage.removeItem("firebase_storage_bucket"),localStorage.removeItem("firebase_messaging_sender_id"),window.location.reload()}function FN(){return!!bs}function Ad(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function GN(r,e,t,s){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function m(b){try{p(s.next(b))}catch(w){c(w)}}function g(b){try{p(s.throw(b))}catch(w){c(w)}}function p(b){b.done?l(b.value):o(b.value).then(m,g)}p((s=s.apply(r,e||[])).next())})}const KN=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Dp extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class QN extends Dp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qb extends Dp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yb extends Dp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Og;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Og||(Og={}));class YN{constructor(e,{headers:t={},customFetch:s,region:o=Og.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=KN(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return GN(this,arguments,void 0,function*(t,s={}){var o;let l,c;try{const{headers:m,method:g,body:p,signal:b,timeout:w}=s;let T={},{region:x}=s;x||(x=this.region);const V=new URL(`${this.url}/${t}`);x&&x!=="any"&&(T["x-region"]=x,V.searchParams.set("forceFunctionRegion",x));let z;p&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",z=p):typeof p=="string"?(T["Content-Type"]="text/plain",z=p):typeof FormData<"u"&&p instanceof FormData?z=p:(T["Content-Type"]="application/json",z=JSON.stringify(p)):z=p;let q=b;w&&(c=new AbortController,l=setTimeout(()=>c.abort(),w),b?(q=c.signal,b.addEventListener("abort",()=>c.abort())):q=c.signal);const te=yield this.fetch(V.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),m),body:z,signal:q}).catch(de=>{throw new QN(de)}),H=te.headers.get("x-relay-error");if(H&&H==="true")throw new Qb(te);if(!te.ok)throw new Yb(te);let L=((o=te.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),se;return L==="application/json"?se=yield te.json():L==="application/octet-stream"||L==="application/pdf"?se=yield te.blob():L==="text/event-stream"?se=te:L==="multipart/form-data"?se=yield te.formData():se=yield te.text(),{data:se,error:null,response:te}}catch(m){return{data:null,error:m,response:m instanceof Yb||m instanceof Qb?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var XN=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},JN=class{constructor(r){var e,t;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,m=null,g=null,p=l.status,b=l.statusText;if(l.ok){var w,T;if(t.method!=="HEAD"){var x;const te=await l.text();te===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((x=t.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?m=te:m=JSON.parse(te))}const z=(w=t.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),q=(T=l.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");z&&q&&q.length>1&&(g=parseInt(q[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(m)&&(m.length>1?(c={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,p=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var V;const z=await l.text();try{c=JSON.parse(z),Array.isArray(c)&&l.status===404&&(m=[],c=null,p=200,b="OK")}catch{l.status===404&&z===""?(p=204,b="No Content"):c={message:z}}if(c&&t.isMaybeSingle&&(!(c==null||(V=c.details)===null||V===void 0)&&V.includes("0 rows"))&&(c=null,p=200,b="OK"),c&&t.shouldThrowOnError)throw new XN(c)}return{error:c,data:m,count:g,status:p,statusText:b}});return this.shouldThrowOnError||(o=o.catch(l=>{var c;let m="";const g=l?.cause;if(g){var p,b,w,T;const V=(p=g?.message)!==null&&p!==void 0?p:"",z=(b=g?.code)!==null&&b!==void 0?b:"";m=`${(w=l?.name)!==null&&w!==void 0?w:"FetchError"}: ${l?.message}`,m+=`

Caused by: ${(T=g?.name)!==null&&T!==void 0?T:"Error"}: ${V}`,z&&(m+=` (${z})`),g?.stack&&(m+=`
${g.stack}`)}else{var x;m=(x=l?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(c=l?.name)!==null&&c!==void 0?c:"FetchError"}: ${l?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,e)}returns(){return this}overrideTypes(){return this}},WN=class extends JN{select(r){let e=!1;const t=(r??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:s=t}={}){const o=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(l,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:s=!1,wal:o=!1,format:l="text"}={}){var c;const m=[r?"analyze":null,e?"verbose":null,t?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${m};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const Xb=new RegExp("[,()]");var Eo=class extends WN{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&Xb.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&Xb.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${o}fts${l}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},ZN=class{constructor(r,{headers:e={},schema:t,fetch:s}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=s}select(r,e){const{head:t=!1,count:s}=e??{},o=t?"HEAD":"GET";let l=!1;const c=(r??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new Eo({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:t=!0}={}){var s;const o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const l=r.reduce((c,m)=>c.concat(Object.keys(m)),[]);if(l.length>0){const c=[...new Set(l)].map(m=>`"${m}"`);this.url.searchParams.set("columns",c.join(","))}}return new Eo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:s,defaultToNull:o=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const m=r.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(m.length>0){const g=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new Eo({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(r,{count:e}={}){var t;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Eo({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:r}={}){var e;const t="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Eo({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ek=class $T{constructor(e,{headers:t={},schema:s,fetch:o}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ZN(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $T(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:o=!1,count:l}={}){var c;let m;const g=new URL(`${this.url}/rpc/${e}`);let p;s||o?(m=s?"HEAD":"GET",Object.entries(t).filter(([w,T])=>T!==void 0).map(([w,T])=>[w,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([w,T])=>{g.searchParams.append(w,T)})):(m="POST",p=t);const b=new Headers(this.headers);return l&&b.set("Prefer",`count=${l}`),new Eo({method:m,url:g,headers:b,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class tk{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nk="2.89.0",rk=`realtime-js/${nk}`,FT="1.0.0",sk="2.0.0",Jb=FT,xg=1e4,ik=1e3,ak=100;var ui;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ui||(ui={}));var Gt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Gt||(Gt={}));var vr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(vr||(vr={}));var Ng;(function(r){r.websocket="websocket"})(Ng||(Ng={}));var ha;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ha||(ha={}));class ok{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var o,l;const c=e.topic,m=(o=e.ref)!==null&&o!==void 0?o:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+c.length+p.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+T);let V=new DataView(x),z=0;V.setUint8(z++,this.KINDS.userBroadcastPush),V.setUint8(z++,g.length),V.setUint8(z++,m.length),V.setUint8(z++,c.length),V.setUint8(z++,p.length),V.setUint8(z++,w.length),V.setUint8(z++,t),Array.from(g,te=>V.setUint8(z++,te.charCodeAt(0))),Array.from(m,te=>V.setUint8(z++,te.charCodeAt(0))),Array.from(c,te=>V.setUint8(z++,te.charCodeAt(0))),Array.from(p,te=>V.setUint8(z++,te.charCodeAt(0))),Array.from(w,te=>V.setUint8(z++,te.charCodeAt(0)));var q=new Uint8Array(x.byteLength+s.byteLength);return q.set(new Uint8Array(x),0),q.set(new Uint8Array(s),x.byteLength),q.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,c,m,g]=s;return t({join_ref:o,ref:l,topic:c,event:m,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),o=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,o)}_decodeUserBroadcast(e,t,s){const o=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),m=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+o));g=g+o;const b=s.decode(e.slice(g,g+l));g=g+l;const w=s.decode(e.slice(g,g+c));g=g+c;const T=e.slice(g,e.byteLength),x=m===this.JSON_ENCODING?JSON.parse(s.decode(T)):T,V={type:this.BROADCAST_EVENT,event:b,payload:x};return c>0&&(V.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:V}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class GT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const Wb=(r,e,t={})=>{var s;const o=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=lk(c,r,e,o),l),{}):{}},lk=(r,e,t,s)=>{const o=e.find(m=>m.name===r),l=o?.type,c=t[r];return l&&!s.includes(l)?KT(l,c):kg(c)},KT=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return dk(e,t)}switch(r){case mt.bool:return uk(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return ck(e);case mt.json:case mt.jsonb:return hk(e);case mt.timestamp:return fk(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return kg(e);default:return kg(e)}},kg=r=>r,uk=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ck=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},hk=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},dk=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const c=r.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(m=>KT(e,m))}return r},fk=r=>typeof r=="string"?r.replace(" ","T"):r,QT=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Gm{constructor(e,t,s={},o=xg){this.channel=e,this.event=t,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zb;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Zb||(Zb={}));class lu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,o,l,c),this.pendingDiffs.forEach(g=>{this.state=lu.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],m()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=lu.syncDiff(this.state,o,l,c),m())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,o){const l=this.cloneDeep(e),c=this.transformState(t),m={},g={};return this.map(l,(p,b)=>{c[p]||(g[p]=b)}),this.map(c,(p,b)=>{const w=l[p];if(w){const T=b.map(q=>q.presence_ref),x=w.map(q=>q.presence_ref),V=b.filter(q=>x.indexOf(q.presence_ref)<0),z=w.filter(q=>T.indexOf(q.presence_ref)<0);V.length>0&&(m[p]=V),z.length>0&&(g[p]=z)}else m[p]=b}),this.syncDiff(l,{joins:m,leaves:g},s,o)}static syncDiff(e,t,s,o){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(m,g)=>{var p;const b=(p=e[m])!==null&&p!==void 0?p:[];if(e[m]=this.cloneDeep(g),b.length>0){const w=e[m].map(x=>x.presence_ref),T=b.filter(x=>w.indexOf(x.presence_ref)<0);e[m].unshift(...T)}s(m,b,g)}),this.map(c,(m,g)=>{let p=e[m];if(!p)return;const b=g.map(w=>w.presence_ref);p=p.filter(w=>b.indexOf(w.presence_ref)<0),e[m]=p,o(m,p,g),p.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const o=e[s];return"metas"in o?t[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ew;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ew||(ew={}));var uu;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(uu||(uu={}));var vs;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(vs||(vs={}));class Ro{constructor(e,t={config:{}},s){var o,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gm(this,vr.join,this.params,this.timeout),this.rejoinTimer=new GT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(c,m)=>{this._trigger(this._replyEventName(m),c)}),this.presence=new lu(this),this.broadcastEndpointURL=QT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Gt.closed){const{config:{broadcast:c,presence:m,private:g}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},T={broadcast:c,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(vs.CHANNEL_ERROR,x)),this._onClose(()=>e?.(vs.CLOSED)),this.updateJoinPayload(Object.assign({config:T},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var V;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(vs.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,q=(V=z?.length)!==null&&V!==void 0?V:0,te=[];for(let H=0;H<q;H++){const L=z[H],{filter:{event:se,schema:de,table:le,filter:C}}=L,A=x&&x[H];if(A&&A.event===se&&Ro.isFilterValueEqual(A.schema,de)&&Ro.isFilterValueEqual(A.table,le)&&Ro.isFilterValueEqual(A.filter,C))te.push(Object.assign(Object.assign({},L),{id:A.id}));else{this.unsubscribe(),this.state=Gt.errored,e?.(vs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=te,e&&e(vs.SUBSCRIBED);return}}).receive("error",x=>{this.state=Gt.errored,e?.(vs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(vs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Gt.joined&&e===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,m,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(c=this.params)===null||c===void 0?void 0:c.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Gm(this,vr.leave,{},e),s.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Gm(this,e,t,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ak){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var o,l;const c=e.toLocaleLowerCase(),{close:m,error:g,leave:p,join:b}=vr;if(s&&[m,g,p,b].indexOf(c)>=0&&s!==this._joinRef())return;let T=this._onMessage(c,t,s);if(t&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var V,z,q;return((V=x.filter)===null||V===void 0?void 0:V.event)==="*"||((q=(z=x.filter)===null||z===void 0?void 0:z.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===c}).map(x=>x.callback(T,s)):(l=this.bindings[c])===null||l===void 0||l.filter(x=>{var V,z,q,te,H,L;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const se=x.id,de=(V=x.filter)===null||V===void 0?void 0:V.event;return se&&((z=t.ids)===null||z===void 0?void 0:z.includes(se))&&(de==="*"||de?.toLocaleLowerCase()===((q=t.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const se=(H=(te=x?.filter)===null||te===void 0?void 0:te.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return se==="*"||se===((L=t?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof T=="object"&&"ids"in T){const V=T.data,{schema:z,table:q,commit_timestamp:te,type:H,errors:L}=V;T=Object.assign(Object.assign({},{schema:z,table:q,commit_timestamp:te,eventType:H,new:{},old:{},errors:L}),this._getPayloadRecords(V))}x.callback(T,s)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ro.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vr.close,{},e)}_onError(e){this._on(vr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Wb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Wb(e.columns,e.old_record)),t}}const Km=()=>{},bh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mk=[1e3,2e3,5e3,1e4],gk=1e4,pk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yk{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xg,this.transport=null,this.heartbeatIntervalMs=bh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Km,this.ref=0,this.reconnectTimer=null,this.vsn=Jb,this.logger=Km,this.conn=null,this.sendBuffer=[],this.serializer=new ok,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ng.websocket}`,this.httpEndpoint=QT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ui.connecting:return ha.Connecting;case ui.open:return ha.Open;case ui.closing:return ha.Closing;default:return ha.Closed}}isConnected(){return this.connectionState()===ha.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new Ro(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:o,ref:l}=e,c=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${t} ${s} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ik,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},bh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:c}=t,m=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${o} ${m}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ui.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ui.open||this.conn.readyState===ui.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${s}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([pk],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const l={access_token:t,version:rk};t&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(vr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new GT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,o,l,c,m,g,p,b,w,T,x;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:xg,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:bh.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(m=e?.heartbeatCallback)!==null&&m!==void 0?m:Km,this.vsn=(g=e?.vsn)!==null&&g!==void 0?g:Jb,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(V=>mk[V-1]||gk),this.vsn){case FT:this.encode=(b=e?.encode)!==null&&b!==void 0?b:((V,z)=>z(JSON.stringify(V))),this.decode=(w=e?.decode)!==null&&w!==void 0?w:((V,z)=>z(JSON.parse(V)));break;case sk:this.encode=(T=e?.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var vu=class extends Error{constructor(r,e){super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _k(r,e,t){const s=new URL(e,r);if(t)for(const[o,l]of Object.entries(t))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function vk(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function bk(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:o,body:l,headers:c}){const m=_k(r.baseUrl,s,o),g=await vk(r.auth),p=await e(m,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),b=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),T=w&&b?JSON.parse(b):b;if(!p.ok){const x=w?T:void 0,V=x?.error;throw new vu(V?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:V?.type,icebergCode:V?.code,details:x})}return{status:p.status,headers:p.headers,data:T}}}}function wh(r){return r.join("")}var wk=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:wh(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wh(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wh(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wh(r.namespace)}`}),!0}catch(e){if(e instanceof vu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof vu&&t.status===409)return;throw t}}};function ho(r){return r.join("")}var Ek=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof vu&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof vu&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},Tk=class{constructor(r){let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=bk({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new wk(this.client,e),this.tableOps=new Ek(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Rd=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function wt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Sk=class extends Rd{constructor(r,e,t){super(r),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dg=class extends Rd{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}};const Pp=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ak=()=>Response,Pg=r=>{if(Array.isArray(r))return r.map(t=>Pg(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Pg(s)}),e},Rk=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ck=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function bu(r){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(r)}function Ik(r,e){if(bu(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(bu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ok(r){var e=Ik(r,"string");return bu(e)=="symbol"?e:e+""}function xk(r,e,t){return(e=Ok(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function we(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tw(Object(t),!0).forEach(function(s){xk(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tw(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const Qm=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},Nk=async(r,e,t)=>{r instanceof await Ak()&&!t?.noResolveJson?r.json().then(s=>{const o=r.status||500,l=s?.statusCode||o+"";e(new Sk(Qm(s),o,l))}).catch(s=>{e(new Dg(Qm(s),s))}):e(new Dg(Qm(r),r))},kk=(r,e,t,s)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"||!s?o:(Rk(s)?(o.headers=we({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,e?.duplex&&(o.duplex=e.duplex),we(we({},o),t))};async function Uu(r,e,t,s,o,l){return new Promise((c,m)=>{r(t,kk(e,s,o,l)).then(g=>{if(!g.ok)throw g;return s?.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>Nk(g,m,s))})}async function wu(r,e,t,s){return Uu(r,"GET",e,t,s)}async function _r(r,e,t,s,o){return Uu(r,"POST",e,s,o,t)}async function Mg(r,e,t,s,o){return Uu(r,"PUT",e,s,o,t)}async function Dk(r,e,t,s){return Uu(r,"HEAD",e,we(we({},t),{},{noResolveJson:!0}),s)}async function Mp(r,e,t,s,o){return Uu(r,"DELETE",e,s,o,t)}var Pk=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}}};let YT;YT=Symbol.toStringTag;var Mk=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[YT]="BlobDownloadBuilder",this.promise=null}asStream(){return new Pk(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}}};const Vk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Uk=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.bucketId=t,this.fetch=Pp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,e,t,s){var o=this;try{let l;const c=we(we({},nw),s);let m=we(we({},o.headers),r==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",o.encodeMetadata(g)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(g))):(l=t,m["cache-control"]=`max-age=${c.cacheControl}`,m["content-type"]=c.contentType,g&&(m["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s?.headers&&(m=we(we({},m),s.headers));const p=o._removeEmptyFolders(e),b=o._getFinalPath(p),w=await(r=="PUT"?Mg:_r)(o.fetch,`${o.url}/object/${b}`,l,we({headers:m},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,s){var o=this;const l=o._removeEmptyFolders(r),c=o._getFinalPath(l),m=new URL(o.url+`/object/upload/sign/${c}`);m.searchParams.set("token",e);try{let g;const p=we({upsert:nw.upsert},s),b=we(we({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",t)):typeof FormData<"u"&&t instanceof FormData?(g=t,g.append("cacheControl",p.cacheControl)):(g=t,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{data:{path:l,fullPath:(await Mg(o.fetch,m.toString(),g,{headers:b})).Key},error:null}}catch(g){if(o.shouldThrowOnError)throw g;if(wt(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(r,e){var t=this;try{let s=t._getFinalPath(r);const o=we({},t.headers);e?.upsert&&(o["x-upsert"]="true");const l=await _r(t.fetch,`${t.url}/object/upload/sign/${s}`,{},{headers:o}),c=new URL(t.url+l.url),m=c.searchParams.get("token");if(!m)throw new Rd("No token returned by API");return{data:{signedUrl:c.toString(),path:r,token:m},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var s=this;try{return{data:await _r(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}}async copy(r,e,t){var s=this;try{return{data:{path:(await _r(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}}async createSignedUrl(r,e,t){var s=this;try{let o=s._getFinalPath(r),l=await _r(s.fetch,`${s.url}/object/sign/${o}`,we({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:s.headers});const c=t?.download?`&download=${t.download===!0?"":t.download}`:"";return l={signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}}async createSignedUrls(r,e,t){var s=this;try{const o=await _r(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:r},{headers:s.headers}),l=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:o.map(c=>we(we({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}}download(r,e){const t=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"",l=this._getFinalPath(r),c=()=>wu(this.fetch,`${this.url}/${t}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new Mk(c,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);try{return{data:Pg(await wu(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await Dk(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(wt(s)&&s instanceof Dg){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,e){const t=this._getFinalPath(r),s=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&s.push(o);const l=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&s.push(c);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${m}`)}}}async remove(r){var e=this;try{return{data:await Mp(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async list(r,e,t){var s=this;try{const o=we(we(we({},Vk),e),{},{prefix:r||""});return{data:await _r(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},t),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}}async listV2(r,e){var t=this;try{const s=we({},r);return{data:await _r(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,s,{headers:t.headers},e),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const XT="2.89.0",JT={"X-Client-Info":`storage-js/${XT}`};var jk=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1;const o=new URL(r);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=we(we({},JT),e),this.fetch=Pp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var e=this;try{const t=e.listBucketOptionsToQueryString(r);return{data:await wu(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await wu(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async createBucket(r,e={public:!1}){var t=this;try{return{data:await _r(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}}async updateBucket(r,e){var t=this;try{return{data:await Mg(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}}async emptyBucket(r){var e=this;try{return{data:await _r(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Mp(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Lk=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},JT),e),this.fetch=Pp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await _r(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async listBuckets(r){var e=this;try{const t=new URLSearchParams;r?.limit!==void 0&&t.set("limit",r.limit.toString()),r?.offset!==void 0&&t.set("offset",r.offset.toString()),r?.sortColumn&&t.set("sortColumn",r.sortColumn),r?.sortOrder&&t.set("sortOrder",r.sortOrder),r?.search&&t.set("search",r.search);const s=t.toString(),o=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await wu(e.fetch,o,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Mp(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wt(t))return{data:null,error:t};throw t}}from(r){var e=this;if(!Ck(r))throw new Rd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new Tk({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(t,{get(o,l){const c=o[l];return typeof c!="function"?c:async(...m)=>{try{return{data:await c.apply(o,m),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}};const Vp={"X-Client-Info":`storage-js/${XT}`,"Content-Type":"application/json"};var WT=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function qn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Ym=class extends WT{constructor(r,e,t){super(r),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zk=class extends WT{constructor(r,e){super(r),this.name="StorageVectorsUnknownError",this.originalError=e}};const Up=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Bk=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},rw=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),qk=async(r,e,t)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!t?.noResolveJson){const s=r.status||500,o=r;if(typeof o.json=="function")o.json().then(l=>{const c=l?.statusCode||l?.code||s+"";e(new Ym(rw(l),s,c))}).catch(()=>{const l=s+"";e(new Ym(o.statusText||`HTTP ${s} error`,s,l))});else{const l=s+"";e(new Ym(o.statusText||`HTTP ${s} error`,s,l))}}else e(new zk(rw(r),r))},Hk=(r,e,t,s)=>{const o={method:r,headers:e?.headers||{}};return s?(Bk(s)?(o.headers=we({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,we(we({},o),t)):o};async function $k(r,e,t,s,o,l){return new Promise((c,m)=>{r(t,Hk(e,s,o,l)).then(g=>{if(!g.ok)throw g;if(s?.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>qk(g,m,s))})}async function Hn(r,e,t,s,o){return $k(r,"POST",e,s,o,t)}var Fk=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Vp),e),this.fetch=Up(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async getIndex(r,e){var t=this;try{return{data:await Hn(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qn(s))return{data:null,error:s};throw s}}async listIndexes(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async deleteIndex(r,e){var t=this;try{return{data:await Hn(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qn(s))return{data:null,error:s};throw s}}},Gk=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Vp),e),this.fetch=Up(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var e=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Hn(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async getVectors(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async listVectors(r){var e=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await Hn(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async queryVectors(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async deleteVectors(r){var e=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Hn(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}},Kk=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Vp),e),this.fetch=Up(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async listBuckets(r={}){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Hn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qn(t))return{data:null,error:t};throw t}}},Qk=class extends Kk{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new Yk(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},Yk=class extends Fk{constructor(r,e,t,s){super(r,e,s),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new Xk(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},Xk=class extends Gk{constructor(r,e,t,s,o){super(r,e,o),this.vectorBucketName=t,this.indexName=s}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,we(we({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Jk=class extends jk{constructor(r,e={},t,s){super(r,e,t,s)}from(r){return new Uk(this.url,this.headers,r,this.fetch)}get vectors(){return new Qk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lk(this.url+"/iceberg",this.headers,this.fetch)}};const ZT="2.89.0",To=30*1e3,Vg=3,Xm=Vg*To,Wk="http://localhost:9999",Zk="supabase.auth.token",eD={"X-Client-Info":`gotrue-js/${ZT}`},Ug="X-Supabase-Api-Version",eS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nD=600*1e3;class Eu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function pe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class rD extends Eu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function sD(r){return pe(r)&&r.name==="AuthApiError"}class da extends Eu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Os extends Eu{constructor(e,t,s,o){super(e,s,o),this.name=t,this.status=s}}class Bn extends Os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iD(r){return pe(r)&&r.name==="AuthSessionMissingError"}class fo extends Os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eh extends Os{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Th extends Os{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aD(r){return pe(r)&&r.name==="AuthImplicitGrantRedirectError"}class sw extends Os{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oD extends Os{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jg extends Os{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Jm(r){return pe(r)&&r.name==="AuthRetryableFetchError"}class iw extends Os{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Lg extends Os{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aw=` 	
\r=`.split(""),lD=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<aw.length;e+=1)r[aw[e].charCodeAt(0)]=-2;for(let e=0;e<ed.length;e+=1)r[ed[e].charCodeAt(0)]=e;return r})();function ow(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ed[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ed[s]),e.queuedBits-=6}}function tS(r,e,t){const s=lD[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function lw(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{hD(c,s,t)};for(let c=0;c<r.length;c+=1)tS(r.charCodeAt(c),o,l);return e.join("")}function uD(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function cD(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}uD(s,e)}}function hD(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Do(r){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)tS(r.charCodeAt(o),t,s);return new Uint8Array(e)}function dD(r){const e=[];return cD(r,t=>e.push(t)),new Uint8Array(e)}function ma(r){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};return r.forEach(o=>ow(o,t,s)),ow(null,t,s),e.join("")}function fD(r){return Math.round(Date.now()/1e3)+r}function mD(){return Symbol("auth-callback")}const ln=()=>typeof window<"u"&&typeof document<"u",oa={tested:!1,writable:!1},nS=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oa.tested)return oa.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),oa.tested=!0,oa.writable=!0}catch{oa.tested=!0,oa.writable=!1}return oa.writable};function gD(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((s,o)=>{e[o]=s}),e}const rS=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),pD=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",So=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},la=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},on=async(r,e)=>{await r.removeItem(e)};class Cd{constructor(){this.promise=new Cd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Cd.promiseConstructor=Promise;function Wm(r){const e=r.split(".");if(e.length!==3)throw new Lg("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!tD.test(e[s]))throw new Lg("JWT not in base64url format");return{header:JSON.parse(lw(e[0])),payload:JSON.parse(lw(e[1])),signature:Do(e[2]),raw:{header:e[0],payload:e[1]}}}async function yD(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function _D(r,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await r(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function vD(r){return("0"+r.toString(16)).substr(-2)}function bD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,vD).join("")}async function wD(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function ED(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await wD(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(r,e,t=!1){const s=bD();let o=s;t&&(o+="/PASSWORD_RECOVERY"),await So(r,`${e}-code-verifier`,o);const l=await ED(s);return[l,s===l?"plain":"s256"]}const TD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SD(r){const e=r.headers.get(Ug);if(!e||!e.match(TD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AD(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function RD(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(r){if(!CD.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zm(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ID(r,e){return new Proxy(r,{get:(t,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,o)}})}function uw(r){return JSON.parse(JSON.stringify(r))}const ca=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),OD=[502,503,504];async function cw(r){var e;if(!pD(r))throw new jg(ca(r),0);if(OD.includes(r.status))throw new jg(ca(r),r.status);let t;try{t=await r.json()}catch(l){throw new da(ca(l),l)}let s;const o=SD(r);if(o&&o.getTime()>=eS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new iw(ca(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Bn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new iw(ca(t),r.status,t.weak_password.reasons);throw new rD(ca(t),r.status||500,s)}const xD=(r,e,t,s)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),t))};async function be(r,e,t,s){var o;const l=Object.assign({},s?.headers);l[Ug]||(l[Ug]=eS["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const m=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await ND(r,e,t+m,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(g):{data:Object.assign({},g),error:null}}async function ND(r,e,t,s,o,l){const c=xD(e,s,o,l);let m;try{m=await r(t,Object.assign({},c))}catch(g){throw console.error(g),new jg(ca(g),0)}if(m.ok||await cw(m),s?.noResolveJson)return m;try{return await m.json()}catch(g){await cw(g)}}function yr(r){var e;let t=null;PD(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=fD(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function hw(r){const e=yr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function mi(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function kD(r){return{data:r,error:null}}function DD(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l}=r,c=Ad(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l},g=Object.assign({},c);return{data:{properties:m,user:g},error:null}}function dw(r){return r}function PD(r){return r.access_token&&r.refresh_token&&r.expires_in}const eg=["global","local","others"];class MD{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=rS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=eg[0]){if(eg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eg.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mi})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ad(e,["options"]),o=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:DD,redirectTo:t?.redirectTo})}catch(t){if(pe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mi})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,o,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:dw});if(b.error)throw b.error;const w=await b.json(),T=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(V=>{const z=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(V.split(";")[1].split("=")[1]);p[`${q}Page`]=z}),p.total=parseInt(T)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(pe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){go(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mi})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){go(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:mi})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){go(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:mi})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){go(e.userId);try{const{data:t,error:s}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:s}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,o,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:dw});if(b.error)throw b.error;const w=await b.json(),T=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(V=>{const z=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(V.split(";")[1].split("=")[1]);p[`${q}Page`]=z}),p.total=parseInt(T)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(pe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}}function fw(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const po={debug:!!(globalThis&&nS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class VD extends sS{}async function UD(r,e,t){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),po.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await t()}finally{po.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw po.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new VD(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(po.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function jD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iS(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function LD(r){return parseInt(r,16)}function zD(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function BD(r){var e;const{chainId:t,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:m,requestId:g,resources:p,scheme:b,uri:w,version:T}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const x=iS(r.address),V=b?`${b}://${s}`:s,z=r.statement?`${r.statement}
`:"",q=`${V} wants you to sign in with your Ethereum account:
${x}

${z}`;let te=`URI: ${w}
Version: ${T}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(te+=`
Expiration Time: ${o.toISOString()}`),m&&(te+=`
Not Before: ${m.toISOString()}`),g&&(te+=`
Request ID: ${g}`),p){let H=`
Resources:`;for(const L of p){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);H+=`
- ${L}`}te+=H}return`${q}
${te}`}class qt extends Error{constructor({message:e,code:t,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class td extends qt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function qD({error:r,options:e}){var t,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new qt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(aS(c)){if(l.rp.id!==c)return new qt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function HD({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new qt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(aS(s)){if(t.rpId!==s)return new qt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class $D{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const FD=new $D;function GD(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,o=Ad(r,["challenge","user","excludeCredentials"]),l=Do(e).buffer,c=Object.assign(Object.assign({},t),{id:Do(t.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:l,user:c});if(s&&s.length>0){m.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Do(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function KD(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=Ad(r,["challenge","allowCredentials"]),o=Do(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const m=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},m),{id:Do(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function QD(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:ma(new Uint8Array(r.response.attestationObject)),clientDataJSON:ma(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function YD(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ma(new Uint8Array(o.authenticatorData)),clientDataJSON:ma(new Uint8Array(o.clientDataJSON)),signature:ma(new Uint8Array(o.signature)),userHandle:o.userHandle?ma(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function aS(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function mw(){var r,e;return!!(ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XD(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new td("Browser returned unexpected credential type",e)}:{data:null,error:new td("Empty credential response",e)}}catch(e){return{data:null,error:qD({error:e,options:r})}}}async function JD(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new td("Browser returned unexpected credential type",e)}:{data:null,error:new td("Empty credential response",e)}}catch(e){return{data:null,error:HD({error:e,options:r})}}}const WD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ZD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function nd(...r){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of r)if(o)for(const l in o){const c=o[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(t(c))s[l]=c;else if(e(c)){const m=s[l];e(m)?s[l]=nd(m,c):s[l]=nd(c)}else s[l]=c}return s}function e4(r,e){return nd(WD,r,e||{})}function t4(r,e){return nd(ZD,r,e||{})}class n4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:o},l){try{const{data:c,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:m};const g=o??FD.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=e4(c.webauthn.credential_options.publicKey,l?.create),{data:b,error:w}=await XD({publicKey:p,signal:g});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const p=t4(c.webauthn.credential_options.publicKey,l?.request),{data:b,error:w}=await JD(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Eu("rpId is required for WebAuthn authentication")};try{if(!mw())return{data:null,error:new da("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:o},{request:l});if(!c)return{data:null,error:m};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Eu("rpId is required for WebAuthn registration")};try{if(!mw())return{data:null,error:new da("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:o},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in register",c)}}}}jD();const r4={url:Wk,storageKey:Zk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function gw(r,e,t){return await t()}const yo={};class Tu{get jwks(){var e,t;return(t=(e=yo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},r4),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Tu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Tu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ln()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new MD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=rS(l.fetch),this.lock=l.lock||gw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&ln()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=UD:this.lock=gw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:nS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=fw(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ZT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(ln()&&(t=gD(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),ln()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),aD(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",m),await this._saveSession(c),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return pe(t)?this._returnResult({error:t}):this._returnResult({error:new da("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,o;try{const l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:yr}),{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,o;try{let l;if("email"in e){const{email:b,password:w,options:T}=e;let x=null,V=null;this.flowType==="pkce"&&([x,V]=await mo(this.storage,this.storageKey)),l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:b,password:w,data:(t=T?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:x,code_challenge_method:V},xform:yr})}else if("phone"in e){const{phone:b,password:w,options:T}=e;l=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(s=T?.data)!==null&&s!==void 0?s:{},channel:(o=T?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:yr})}else throw new Eh("You must provide either an email or phone number and a password");const{data:c,error:m}=l;if(m||!c)return await on(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:m}=e;t=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:hw})}else if("phone"in e){const{phone:l,password:c,options:m}=e;t=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:hw})}else throw new Eh("You must provide either an email or phone number and a password");const{data:s,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new fo;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,o,l,c,m,g,p,b,w,T;let x,V;if("message"in e)x=e.message,V=e.signature;else{const{chain:z,wallet:q,statement:te,options:H}=e;let L;if(ln())if(typeof q=="object")L=q;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")L=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=q}const se=new URL((t=H?.url)!==null&&t!==void 0?t:window.location.href),de=await L.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!de||de.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=iS(de[0]);let C=(s=H?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const I=await L.request({method:"eth_chainId"});C=LD(I)}const A={domain:se.host,address:le,statement:te,uri:se.href,version:"1",chainId:C,nonce:(o=H?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=H?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(m=H?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=H?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=H?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=H?.signInWithEthereum)===null||b===void 0?void 0:b.resources};x=BD(A),V=await L.request({method:"personal_sign",params:[zD(x),le]})}try{const{data:z,error:q}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:V},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:yr});if(q)throw q;if(!z||!z.session||!z.user){const te=new fo;return this._returnResult({data:{user:null,session:null},error:te})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:q})}catch(z){if(pe(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(e){var t,s,o,l,c,m,g,p,b,w,T,x;let V,z;if("message"in e)V=e.message,z=e.signature;else{const{chain:q,wallet:te,statement:H,options:L}=e;let se;if(ln())if(typeof te=="object")se=te;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))se=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof te!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");se=te}const de=new URL((t=L?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in se&&se.signIn){const le=await se.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:de.host,uri:de.href}),H?{statement:H}:null));let C;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")C=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)C=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)V=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),z=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in se)||typeof se.signMessage!="function"||!("publicKey"in se)||typeof se!="object"||!se.publicKey||!("toBase58"in se.publicKey)||typeof se.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");V=[`${de.host} wants you to sign in with your Solana account:`,se.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${de.href}`,`Issued At: ${(o=(s=L?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=L?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((g=L?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((w=(b=L?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...L.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const le=await se.signMessage(new TextEncoder().encode(V),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=le}}try{const{data:q,error:te}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:V,signature:ma(z)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:yr});if(te)throw te;if(!q||!q.session||!q.user){const H=new fo;return this._returnResult({data:{user:null,session:null},error:H})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:te})}catch(q){if(pe(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async _exchangeCodeForSession(e){const t=await la(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(t??"").split("/");try{if(!s&&this.flowType==="pkce")throw new oD;const{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:yr});if(await on(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const m=new fo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:o,access_token:l,nonce:c}=e,m=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:yr}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new fo;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,o,l,c;try{if("email"in e){const{email:m,options:g}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await mo(this.storage,this.storageKey));const{error:w}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g?.data)!==null&&t!==void 0?t:{},create_user:(s=g?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:m,options:g}=e,{data:p,error:b}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(l=g?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(c=g?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new Eh("You must provide either an email or phone number.")}catch(m){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var t,s;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:m}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:yr});if(m)throw m;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,s,o,l,c;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await mo(this.storage,this.storageKey));const p=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:kD});return!((l=p.data)===null||l===void 0)&&l.url&&ln()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(m){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Bn;const{error:o}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:c}=await be(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:c,error:m}=await be(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:m})}throw new Eh("You must provide either an email or phone number and a type")}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await la(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Xm:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await la(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Zm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=ID(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mi}):await this._useSession(async t=>{var s,o,l;const{data:c,error:m}=t;if(m)throw m;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:mi})})}catch(t){if(pe(t))return iD(t)&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Bn;const c=o.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await mo(this.storage,this.storageKey));const{data:p,error:b}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:c.access_token,xform:mi});if(b)throw b;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bn;const t=Date.now()/1e3;let s=t,o=!0,l=null;const{payload:c}=Wm(e.access_token);if(c.exp&&(s=c.exp,o=s<=t),o){const{data:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(pe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:m}=t;if(m)throw m;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Bn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!ln())throw new Th("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Th(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new sw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Th("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sw("No code detected.");const{data:H,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const se=new URL(window.location.href);return se.searchParams.delete("code"),window.history.replaceState(window.history.state,"",se.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:m,expires_at:g,token_type:p}=e;if(!l||!m||!c||!p)throw new Th("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let T=b+w;g&&(T=parseInt(g));const x=T-b;x*1e3<=To&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const V=T-w;b-V>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",V,T,b):b-V<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",V,T,b);const{data:z,error:q}=await this._getUser(l);if(q)throw q;const te={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:w,expires_at:T,refresh_token:c,token_type:p,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:te,redirectType:e.type},error:null})}catch(s){if(pe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await la(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const c=(s=o.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:m}=await this.admin.signOut(c,e);if(m&&!(sD(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=mD(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,o;try{const{data:{session:l},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await mo(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:o}=await this._useSession(async l=>{var c,m,g,p,b;const{data:w,error:T}=l;if(T)throw T;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",x,{headers:this.headers,jwt:(b=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return ln()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(pe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:c,provider:m,token:g,access_token:p,nonce:b}=e,w=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:m,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:yr}),{data:T,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new fo}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:x}))}catch(o){if(await on(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:c}=t;if(c)throw c;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await _D(async o=>(o>0&&await yD(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yr})),(o,l)=>{const c=200*Math.pow(2,o);return l&&Jm(l)&&Date.now()+c-s<To})}catch(s){if(this._debug(t,"error",s),pe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ln()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await la(this.storage,this.storageKey);if(o&&this.userStorage){let c=await la(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await So(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:Zm()}else if(o&&!o.user&&!o.user){const c=await la(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await on(this.storage,this.storageKey+"-user"),await So(this.storage,this.storageKey,o)):o.user=Zm()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xm;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Xm}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),Jm(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:m}=await this._getUser(o.access_token);!m&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Cd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Bn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(o,"error",l),pe(l)){const c={data:null,error:l};return Jm(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await on(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await So(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=uw(o);await So(this.storage,this.storageKey,l)}else{const o=uw(t);await So(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await on(this.storage,this.storageKey),await on(this.storage,this.storageKey+"-code-verifier"),await on(this.storage,this.storageKey+"-user"),this.userStorage&&await on(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),To);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/To);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${To}ms, refresh threshold is ${Vg} ticks`),o<=Vg&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const o=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await mo(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(m.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await be(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?QD(e.webauthn.credential_response):YD(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:g}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:m}=c;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:GD(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:KD(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Wm(s.access_token);let c=null;l.aal&&(c=l.aal);let m=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(m="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Bn});const c=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&ln()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Bn});const c=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&ln()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(e){if(pe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bn})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(m=>m.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(m=>m.kid===e),s&&this.jwks_cached_at+nD>o)return s;const{data:l,error:c}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(m=>m.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:x,error:V}=await this.getSession();if(V||!x.session)return this._returnResult({data:null,error:V});s=x.session.access_token}const{header:o,payload:l,signature:c,raw:{header:m,payload:g}}=Wm(s);t?.allowExpired||AD(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:l,header:o,signature:c},error:null}}const b=RD(o.alg),w=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,c,dD(`${m}.${g}`)))throw new Lg("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}}Tu.nextInstanceID={};const s4=Tu,i4="2.89.0";let tu="";typeof Deno<"u"?tu="deno":typeof document<"u"?tu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tu="react-native":tu="node";const a4={"X-Client-Info":`supabase-js-${tu}/${i4}`},o4={headers:a4},l4={schema:"public"},u4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c4={};function Su(r){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(r)}function h4(r,e){if(Su(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(Su(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function d4(r){var e=h4(r,"string");return Su(e)=="symbol"?e:e+""}function f4(r,e,t){return(e=d4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function Rt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pw(Object(t),!0).forEach(function(s){f4(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pw(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const m4=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),g4=()=>Headers,p4=(r,e,t)=>{const s=m4(t),o=g4();return async(l,c)=>{var m;const g=(m=await e())!==null&&m!==void 0?m:r;let p=new o(c?.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Rt(Rt({},c),{},{headers:p}))}};function y4(r){return r.endsWith("/")?r:r+"/"}function _4(r,e){var t,s;const{db:o,auth:l,realtime:c,global:m}=r,{db:g,auth:p,realtime:b,global:w}=e,T={db:Rt(Rt({},g),o),auth:Rt(Rt({},p),l),realtime:Rt(Rt({},b),c),storage:{},global:Rt(Rt(Rt({},w),m),{},{headers:Rt(Rt({},(t=w?.headers)!==null&&t!==void 0?t:{}),(s=m?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?T.accessToken=r.accessToken:delete T.accessToken,T}function v4(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(y4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var b4=class extends s4{constructor(r){super(r)}},w4=class{constructor(r,e,t){var s,o;this.supabaseUrl=r,this.supabaseKey=e;const l=v4(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,m={db:l4,realtime:c4,auth:Rt(Rt({},u4),{},{storageKey:c}),global:o4},g=_4(t??{},m);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=p4(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Rt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new ek(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Jk(this.storageUrl.href,this.headers,this.fetch,t?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new YN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:o,storageKey:l,flowType:c,lock:m,debug:g,throwOnError:p},b,w){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b4({url:this.authUrl.href,headers:Rt(Rt({},T),b),storageKey:l,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:o,flowType:c,lock:m,debug:g,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new yk(this.realtimeUrl.href,Rt(Rt({},r),{},{params:Rt(Rt({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e?.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const E4=(r,e,t)=>new w4(r,e,t);function T4(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}T4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function S4(r,e,t){if(!bs)throw new Error("Firebase is not configured. Please save Firebase settings first.");try{t("Connecting to Supabase...");const s=E4(r,e);t("Fetching contacts from Supabase...");const{data:o,error:l}=await s.from("contacts").select("*");if(l)throw l;if(!o||o.length===0)return{success:!0,message:"No contacts found in Supabase to migrate.",count:0};t(`Found ${o.length} contacts. Starting import...`);let c=0;const m=o.map(async g=>{const{id:p,...b}=g;await hT(Tg(bs,"contacts"),b),c++,c%5===0&&t(`Imported ${c}/${o.length}...`)});return await Promise.all(m),{success:!0,message:"Migration completed successfully!",count:c}}catch(s){throw console.error("Migration failed:",s),new Error(`Migration failed: ${s.message}`)}}function A4({isOpen:r,onClose:e}){const[t,s]=Ve.useState(""),[o,l]=Ve.useState(""),[c,m]=Ve.useState(""),[g,p]=Ve.useState(""),[b,w]=Ve.useState(""),[T,x]=Ve.useState(""),[V,z]=Ve.useState(!1),[q,te]=Ve.useState("config"),[H,L]=Ve.useState(""),[se,de]=Ve.useState(""),[le,C]=Ve.useState(""),[A,I]=Ve.useState(!1);if(Ve.useEffect(()=>{r&&(s(localStorage.getItem("firebase_api_key")||""),l(localStorage.getItem("firebase_project_id")||""),m(localStorage.getItem("firebase_app_id")||""),p(localStorage.getItem("firebase_auth_domain")||""),w(localStorage.getItem("firebase_storage_bucket")||""),x(localStorage.getItem("firebase_messaging_sender_id")||""),z(FN()),L(localStorage.getItem("custom_supabase_url")||""),de(localStorage.getItem("custom_supabase_key")||""))},[r]),!r)return null;const P=R=>{R.preventDefault();try{HN({apiKey:t,projectId:o,appId:c,authDomain:g,storageBucket:b,messagingSenderId:T})}catch(Ae){alert(Ae.message)}},k=()=>{confirm("Are you sure you want to disconnect Firebase and return to Demo Mode?")&&$N()},U=async R=>{if(R.preventDefault(),!H||!se){alert("Please provide Supabase URL and Key.");return}if(!V){alert("Please configure and save Firebase settings first.");return}if(confirm("This will copy contacts from Supabase to Firebase. Continue?")){I(!0),C("Starting...");try{const Ae=await S4(H,se,Ke=>C(Ke));alert(`${Ae.message} (${Ae.count} contacts imported)`),C("Done!")}catch(Ae){C(`Error: ${Ae.message}`),alert(`Migration failed: ${Ae.message}`)}finally{I(!1)}}};return O.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:O.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[O.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:O.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),O.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),O.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[O.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:O.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:e,children:[O.jsx("span",{className:"sr-only",children:"Close"}),O.jsx(sd,{className:"h-6 w-6"})]})}),O.jsxs("div",{className:"sm:flex sm:items-start",children:[O.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:O.jsx(_w,{className:"h-6 w-6 text-blue-600"})}),O.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[O.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Database Settings"}),O.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[O.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${q==="config"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>te("config"),children:"Connection"}),O.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${q==="migrate"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>te("migrate"),children:"Migration Tool"})]}),q==="config"?O.jsxs("form",{onSubmit:P,className:"space-y-4",children:[O.jsx("p",{className:"text-sm text-gray-500",children:"Enter your Firebase Project configuration."}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"API Key *"}),O.jsx("input",{type:"text",required:!0,value:t,onChange:R=>s(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Project ID *"}),O.jsx("input",{type:"text",required:!0,value:o,onChange:R=>l(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"App ID *"}),O.jsx("input",{type:"text",required:!0,value:c,onChange:R=>m(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]}),O.jsxs("details",{className:"text-xs text-gray-500",children:[O.jsx("summary",{className:"cursor-pointer mb-2",children:"Advanced (Optional)"}),O.jsxs("div",{className:"space-y-2",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Auth Domain"}),O.jsx("input",{type:"text",value:g,onChange:R=>p(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Storage Bucket"}),O.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Messaging Sender ID"}),O.jsx("input",{type:"text",value:T,onChange:R=>x(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm"})]})]})]}),O.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-2",children:[O.jsxs("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:[O.jsx(b1,{className:"mr-2 h-4 w-4"})," Save"]}),V&&O.jsxs("button",{type:"button",onClick:k,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:w-auto sm:text-sm",children:[O.jsx(_1,{className:"mr-2 h-4 w-4"})," Reset"]})]})]}):O.jsxs("div",{className:"space-y-4",children:[O.jsx("div",{className:"bg-yellow-50 p-3 rounded-md border border-yellow-200 text-xs text-yellow-800",children:"Use this to copy data from your old Supabase project to your new Firebase project."}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Old Supabase URL"}),O.jsx("input",{type:"text",value:H,onChange:R=>L(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm",placeholder:"https://..."})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Old Supabase Key"}),O.jsx("input",{type:"password",value:se,onChange:R=>de(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 sm:text-sm",placeholder:"ey..."})]}),le&&O.jsx("div",{className:"text-sm font-mono bg-gray-100 p-2 rounded text-blue-600",children:le}),O.jsxs("button",{onClick:U,disabled:A,className:`w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white sm:text-sm ${A?"bg-gray-400":"bg-green-600 hover:bg-green-700"}`,children:[O.jsx(t1,{className:"mr-2 h-4 w-4"}),A?"Migrating...":"Start Migration"]})]})]})]})]})]})})}function R4({isOpen:r,onClose:e,contacts:t,pageSize:s,orientation:o,onPrint:l}){return r?O.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:O.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[O.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:O.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),O.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),O.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[O.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b border-gray-200",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Print Preview"}),O.jsxs("button",{onClick:e,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[O.jsx("span",{className:"sr-only",children:"Close"}),O.jsx(sd,{className:"h-6 w-6"})]})]}),O.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Settings: ",s," - ",o]})]}),O.jsx("div",{className:"bg-gray-50 p-6 h-[60vh] overflow-y-auto",children:O.jsx("div",{className:"mx-auto bg-white shadow-lg origin-top transform scale-75 sm:scale-100 transition-transform",children:O.jsx(zg,{contacts:t,pageSize:s,orientation:o})})}),O.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-200",children:[O.jsxs("button",{type:"button",onClick:l,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:[O.jsx(bw,{className:"mr-2 h-4 w-4"}),"Print"]}),O.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Close"})]})]})]})}):null}function C4({onLogin:r}){const[e,t]=Ve.useState(""),[s,o]=Ve.useState(""),[l,c]=Ve.useState(""),m=g=>{g.preventDefault(),c("");try{r(e,s)}catch(p){c(p.message||"Invalid credentials")}};return O.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[O.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[O.jsx("div",{className:"flex justify-center",children:O.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center",children:O.jsx(g0,{className:"text-white h-6 w-6"})})}),O.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Address Book"})]}),O.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:O.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:O.jsxs("form",{className:"space-y-6",onSubmit:m,children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),O.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[O.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:O.jsx(ww,{className:"h-5 w-5 text-gray-400"})}),O.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:e,onChange:g=>t(g.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"admin or user"})]})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),O.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[O.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:O.jsx(g0,{className:"h-5 w-5 text-gray-400"})}),O.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:g=>o(g.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})]})]}),l&&O.jsx("div",{className:"rounded-md bg-red-50 p-4",children:O.jsx("div",{className:"flex",children:O.jsx("div",{className:"ml-3",children:O.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),O.jsx("div",{children:O.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Sign in"})})]})})})]})}function I4(){const[r,e]=Ve.useState([]),[t,s]=Ve.useState(!0),[o,l]=Ve.useState(null),c=!bs;Ve.useEffect(()=>{m()},[]);async function m(){s(!0);try{if(c){const w=JSON.parse(localStorage.getItem("demo_contacts")||"[]");e(w)}else{const w=Tg(bs,"contacts");try{const T=MO(w,VO("created_at","desc")),V=(await Ib(T)).docs.map(z=>({id:z.id,...z.data()}));e(V)}catch(T){console.warn("Index missing or error, fetching without sort:",T);const V=(await Ib(w)).docs.map(z=>({id:z.id,...z.data()}));V.sort((z,q)=>new Date(q.created_at)-new Date(z.created_at)),e(V)}}}catch(w){console.error("Error fetching contacts:",w),l(w.message)}finally{s(!1)}}async function g(w){try{const T={...w,created_at:new Date().toISOString()};if(c){const x={id:crypto.randomUUID(),...T},V=[x,...r];return e(V),localStorage.setItem("demo_contacts",JSON.stringify(V)),x}else{const V={id:(await hT(Tg(bs,"contacts"),T)).id,...T};return e([V,...r]),V}}catch(T){throw l(T.message),T}}async function p(w){try{if(c){const T=r.filter(x=>x.id!==w);e(T),localStorage.setItem("demo_contacts",JSON.stringify(T))}else await qO(Sg(bs,"contacts",w)),e(r.filter(T=>T.id!==w))}catch(T){throw l(T.message),T}}async function b(w,T){try{if(c){const x=r.map(V=>V.id===w?{...V,...T}:V);e(x),localStorage.setItem("demo_contacts",JSON.stringify(x))}else{const x=Sg(bs,"contacts",w);await BO(x,T),e(r.map(V=>V.id===w?{...V,...T}:V))}}catch(x){throw l(x.message),x}}return{contacts:r,loading:t,error:o,addContact:g,deleteContact:p,updateContact:b,isDemo:c}}const O4={admin:{password:"Warlord@12",role:"admin"},user:{password:"CWS$2025",role:"user"}},x4=["A3","A4","A5","Letter","Legal"],N4=["portrait","landscape"];function k4(){const{contacts:r,loading:e,isDemo:t,addContact:s,updateContact:o,deleteContact:l}=I4(),[c,m]=Ve.useState(!1),[g,p]=Ve.useState(!1),[b,w]=Ve.useState(!1),[T,x]=Ve.useState(null),[V,z]=Ve.useState(""),[q,te]=Ve.useState(null),[H,L]=Ve.useState(new Set),[se,de]=Ve.useState("A5"),[le,C]=Ve.useState("landscape"),A=Ve.useRef(),I=D1.useReactToPrint({contentRef:A,documentTitle:"Contact-Labels",onAfterPrint:()=>w(!1)}),P=r.filter($=>$.name.toLowerCase().includes(V.toLowerCase())||$.phone?.includes(V)),k=($,ie)=>{const re=new Set(H);ie?re.add($):re.delete($),L(re)},U=()=>{H.size===P.length?L(new Set):L(new Set(P.map($=>$.id)))},R=()=>{L(new Set)},Ae=r.filter($=>H.has($.id)),Ke=($,ie)=>{const re=O4[$];if(re&&re.password===ie)te({username:$,role:re.role});else throw new Error("Invalid username or password")},X=()=>{te(null)};if(!q)return O.jsx(C4,{onLogin:Ke});const oe=q.role==="admin",me=q.role==="admin",De=()=>{x(null),m(!0)},Me=$=>{x($),m(!0)},D=async $=>{T?await o(T.id,$):await s($)};return O.jsxs(M1,{isDemo:t,onLogout:X,onSetupClick:()=>p(!0),children:[O.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center mb-8",children:[O.jsxs("div",{className:"relative w-full sm:w-96",children:[O.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:O.jsx(E1,{className:"h-5 w-5 text-gray-400"})}),O.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-shadow shadow-sm",placeholder:"Search contacts...",value:V,onChange:$=>z($.target.value)})]}),O.jsxs("div",{className:"flex flex-wrap gap-3 w-full sm:w-auto justify-end",children:[H.size>0&&O.jsxs(O.Fragment,{children:[O.jsx("select",{value:se,onChange:$=>de($.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2.5 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-lg shadow-sm",children:x4.map($=>O.jsx("option",{value:$,children:$},$))}),O.jsx("select",{value:le,onChange:$=>C($.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2.5 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-lg shadow-sm capitalize",children:N4.map($=>O.jsx("option",{value:$,children:$.charAt(0).toUpperCase()+$.slice(1)},$))}),O.jsx("button",{onClick:R,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",title:"Clear Selection",children:O.jsx(sd,{className:"h-5 w-5"})}),O.jsxs("button",{onClick:()=>w(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",children:[O.jsx(s1,{className:"mr-2 h-5 w-5"}),"Preview"]}),O.jsxs("button",{onClick:I,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",children:[O.jsx(bw,{className:"mr-2 h-5 w-5"}),"Print (",H.size,")"]})]}),O.jsx("button",{onClick:()=>p(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",children:O.jsx(S1,{className:"h-5 w-5"})}),O.jsxs("button",{onClick:De,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2.5 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all hover:scale-[1.02]",children:[O.jsx(p0,{className:"mr-2 h-5 w-5"}),"New Contact"]})]})]}),O.jsx("div",{className:"flex justify-end mb-4",children:O.jsx("button",{onClick:U,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:H.size===P.length?"Deselect All":"Select All"})}),e?O.jsx("div",{className:"flex justify-center items-center h-64",children:O.jsx(vw,{className:"animate-spin text-blue-600",size:32})}):P.length>0?O.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map($=>O.jsx(V1,{contact:$,onEdit:Me,onDelete:l,canEdit:oe,canDelete:me,onSelect:k,isSelected:H.has($.id)},$.id))}):O.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[O.jsx("div",{className:"mx-auto h-12 w-12 text-gray-300",children:O.jsx(O1,{size:48,strokeWidth:1})}),O.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contacts found"}),O.jsx("p",{className:"mt-1 text-sm text-gray-500",children:V?"Try adjusting your search terms.":"Get started by creating a new contact."}),!V&&O.jsx("div",{className:"mt-6",children:O.jsxs("button",{onClick:De,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[O.jsx(p0,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Add Contact"]})})]}),O.jsx(U1,{isOpen:c,onClose:()=>m(!1),onSubmit:D,initialData:T}),O.jsx(A4,{isOpen:g,onClose:()=>p(!1)}),O.jsx(R4,{isOpen:b,onClose:()=>w(!1),contacts:Ae,pageSize:se,orientation:le,onPrint:I}),O.jsx("div",{style:{display:"none"},children:O.jsx(zg,{ref:A,contacts:Ae,pageSize:se,orientation:le})})]})}QA.createRoot(document.getElementById("root")).render(O.jsx(Ve.StrictMode,{children:O.jsx(k4,{})}));
